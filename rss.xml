<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>根号三</title>
  <subtitle>O ever youthful, O ever weeping.</subtitle>
  <link href="/rss.xml" rel="self"/>
  
  <link href="http://blog.sqrtthree.com/"/>
  <updated>2017-03-15T15:51:09.000Z</updated>
  <id>http://blog.sqrtthree.com/</id>
  
  <author>
    <name>sqrtthree</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>作为一个开源软件的作者是一种什么样的感受？</title>
    <link href="http://blog.sqrtthree.com/2017/03/15/what-it-feels-like-to-be-an-open-source-maintainer/"/>
    <id>http://blog.sqrtthree.com/2017/03/15/what-it-feels-like-to-be-an-open-source-maintainer/</id>
    <published>2017-03-15T15:51:09.000Z</published>
    <updated>2017-03-15T15:51:09.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<ul>
<li>原文地址：<a href="https://nolanlawson.com/2017/03/05/what-it-feels-like-to-be-an-open-source-maintainer/" target="_blank" rel="external">What it feels like to be an open-source maintainer</a></li>
<li>原文作者：<a href="https://twitter.com/nolanlawson" target="_blank" rel="external">Nolan Lawson</a></li>
<li>译文出自：<a href="https://github.com/sqrthree/sqrthree.github.io/issues/13" target="_blank" rel="external">[译] 作为一个开源软件的作者是一种什么样的感受？</a></li>
<li>译者：<a href="http://github.com/sqrthree" target="_blank" rel="external">根号三</a></li>
</ul>
</blockquote>
<p>你的门外有几百人在排队。他们耐心地等待着你回答他们的问题、抱怨、pull requests 和 功能请求。</p>
<p>你想帮助他们，但是现在你要关闭它们。或许你已经辛苦工作了一整天，或者你累了，或者你只是想和你的家人、朋友享受一个周末。</p>
<p>但是如果你访问 <a href="https://github.com/notifications" target="_blank" rel="external">github.com/notifications</a>，它会持续地提醒你有多少人正在等着你：</p>
<a id="more"></a>
<p><img src="https://nolanwlawson.files.wordpress.com/2017/03/out.png?w=570" alt="screenshot showing 403 unread GitHub notifications"></p>
<p>当你设法找到一些空闲时间后，你打开门并接待了第一个人。他们非常善意。他们尝试使用你的项目，但是在 API 上遇到了一些困惑。他们将自己的代码粘贴到了 GitHub 评论区中，但是他们忘记或不知道怎样格式化它，所以他们的代码非常混乱，难以阅读。</p>
<p>你热心地将他们的代码放到一个代码块中，因此它们有一个很友好的格式。但是你仍然需要阅读很多代码。</p>
<p>并且他们对于问题的描述也很难理解。或许这个人不以英文为母语，或者他们有残疾使得他们很难通过写作进行沟通。你不确定。总之，你很难理解他们发布的这一段话。</p>
<p>你很疲劳。你看了看排在他后面的数百个其他人。你<strong>可以</strong>花费半个小时来理解这个人的代码，或者你可以选择跳过他，只是给他一些教程和文档的链接，这些有助于帮助解决他们的问题。你也可以善意的建议他们尝试 Stack Overflow 或 Slack channel instead。</p>
<p>队伍里的下一个人脸上皱起了眉头。他们抱怨你的项目浪费了他们两个小时，因为某个明确的 API 并没有像宣传的那样如期工作。他们刻薄的言辞让你感觉很不舒服。</p>
<p>你不想在这个人上浪费太多的时间。你简单地回复了：“这是一个开源项目，并由志愿者志愿维护”。如果代码中有一些 bug，请提交一个可复现的测试代码或者一个 PR。</p>
<p>接下来的一个人遇到了一个非常普遍的错误，但是有一个很容易的解决方案。你知道你之前见过这个错误，但是就是想不起来解决方法写在了哪里了。Stack Overflow? wiki? 邮件？Google 了几分钟以后，你粘贴了一个链接并关闭了这个问题。</p>
<p>下一个人是一个长期贡献者。你从各种社区论坛和兄弟项目中认出他们的名字。他们遇到了一个非常深奥的问题，并且提出了一个 pull request 来解决它。不幸地是，这个问题太复杂了，以至于他们的 PR 包含了好几段文字来解释它。</p>
<p>你的眼睛再一次瞥了外面仍然在排队的几百人。你知道这个人在他们的解决方案上做了大量的工作。并且这可能是一个合理的方案。Travis 的测试已经通过了。所以你想回复一个 “LGTM” (译者注：Looks Good To Me.) 然后合并它。</p>
<p>然而，在之前你曾吃过这样的亏。你曾经合并过一个 PR 但是并没有完整的评估它。最后它让你很头痛因为你没有预料到它带来的问题。或许通过了测试，但是性能下降了十分之一。或者造成了内存泄漏。又或者因为导致了这个项目的 API 过于复杂以至于对新用户来说容易困惑。</p>
<p>如果你现在合并了这个 PR，明天你可能会遇到更多的问题，因为你通过解决了这个人的（非常边缘的）问题打破了别人的工作流。因此你决定先将它滞后，稍后当你有更多时间时你会再处理它。</p>
<p>下一个人发现了一个新 bug，但是你知道它实际上是一个兄弟项目中的 bug。他们说这个问题阻止他们运行应用。你知道这是一个大问题，但是只是许多问题中的一个。你现在没有时间来马上修复它。</p>
<p>你回复到看起来这真的是一个问题，但是在另一个 repo 里报告这个问题更合适。因此你关闭了这个问题，并把它复制到另一个 repo 里面。然后添加一个评论建议应该从代码中的哪个地方开始修复它。虽然你怀疑他们是否会这样做。（很少啦）。</p>
<p>接下来的一个人只是说了一句“这是什么状态？”。你不确定他们到底在讨论什么，因此你查看上下文。他们关于一个项目中的长期 bug 的评论导致 GitHub 评论板很冗长。许多人不同意这个问题原本的解决方案，所以它产生了很多讨论。</p>
<p>在这个问题上有 20 多条评论，你需要花费很长的时间才能阅读并理解所有的内容。所以你只是回复了一句：“对不起，这个问题已经打开了有一段时间了，但是到现在还没有人解决它。我们仍在试着理解问题的范围。一个 pull request 或许是一个好的开始。”</p>
<p>下一个人仅仅是一个 GreenKeeper bot。这个处理起来很轻松。除了这个特定的仓库有着相当脆弱的测试，并且因为一个看起来并不真实的原因而测试失败了，因此你为了能够通过测试必须重新启动它。你重启了测试并尝试提醒自己在稍后 Travis 能运行它时检查一下。</p>
<p>接下来的那个人打开了一个 pull request，但是是在一个相当活跃的仓库上，因此另一个维护者已经提出了反馈。你瞥了一眼大致过程，你相信这个维护者能够处理这个问题。因此你将它标记为已读并继续下一步。</p>
<p>下一个人在运行时出现了一个你之前从未见过的大问题。但不幸的是他们没有提供一丁点关于问题实际发生时的细节。用了什么浏览器？Node 的哪一个版本？项目的哪一个版本？使用哪些代码能重现它？你要求他们重新提供一些细节并关闭了这个页面。</p>
<h3 id="The-constant-stream"><a href="#The-constant-stream" class="headerlink" title="The constant stream"></a>The constant stream</h3><p>过了一段时间后，你已经处理了一二十个这样的情况。但是仍然还有几百个人在等待着。但是现在你已经感到精疲力尽了。每一个人都有他自己的抱怨、问题、或者是新需求。</p>
<p>从某种意义上来说，这些 GitHub 通知就是一个关于你的项目的的不间断消极流。没有人会因为对你的所作所为感到满意时打开一个 issue 或者是 pull request。他们只会在发现缺少一些东西时才这样做。尽管你只花费很少的时间来阅读他们的这些通知，但是仍然能让你在精神上和情绪上感到疲惫不堪。</p>
<p>你的伴侣观察到你在做完这些事情之后总是脾气很坏。或许你发现自己在毫无原因的嘲笑她，仅仅是因为你的心情很糟糕。“如果从事开源工作会让你如此生气，为什么你还要做呢？”她问道。你也没有一个很好的答案。</p>
<p>你可以休息一下。事实上你可以已经尝试过了。之前有一次，你远离 GitHub 给自己放了一两周的假期，仅仅是为了自己的心理健康。但是你知道你结束这种情况的原因是因为有数以百计的人们在耐心地等着你。</p>
<p>如果你保持关注并处理你的 GitHub 通知。或许每天只有 20-30 消息，更容易处理一点。然而你让它们在那里堆积，所以现在堆积了上百个。你感到内疚。</p>
<p>之前，由于某种原因，你真的让这些问题堆积在那了。你或许已经看到有一个问题已经几个月没有回复了。通常，当你回过头处理这样的问题时，打开这个问题的人一直没有给你回复。或者他们回复到：“我放弃了你的项目用了另外一个，所以问题已经解决啦。”这让你感觉很糟糕。但是你理解他们的失望。</p>
<p>从以往的经验中你学到了：对于这种陈旧的问题，更实际的回复是仅仅说一句：“我关闭这个旧问题啦，如果这个问题还存在或者你能提供更多细节的话请再重新打开。”通常情况下都没人回复。有时有人回复了一下，然而只是很生气的抱怨你让他们等待了这么长时间。</p>
<p>现在你尝试更频繁的关注你的通知。数百人的等待队伍实在是太长了。你渴望这个队伍的人数能够降到一百，或十几，甚至有一个 <a href="https://twitter.com/eranhammer/status/616137191131996160" target="_blank" rel="external">空收件箱</a> 的神话。所以你继续。</p>
<h3 id="招募一个新的贡献者"><a href="#招募一个新的贡献者" class="headerlink" title="招募一个新的贡献者"></a>招募一个新的贡献者</h3><p>像上面这样处理了很多问题之后，即使你最终清空了收件箱，仍然会以积压了大量的 bug 和 pull request 而收尾。标签可以对你有所帮助 —— 例如，你可以将一个问题标记为“需要再现”、“存在测试用例”或者 “good first patch”。“good first patch” 尤其有帮助，因为他们常常吸引新的贡献者。</p>
<p>然而，你已经注意到了，通常吸引新贡献者的那些问题都是非常容易的问题 —— 对那些问题而言努力记录并且解释如何修复它比你只是自己修复它还重要。你创建了一些这样的问题，因为你知道让新人参与到开源项目中是值得的，当 pull request 的作者告诉你“这是我第一次向开源项目做出贡献”时，你会感到很开心。</p>
<p>但你知道他们不太可能会回来。通常这些人不会成为长期贡献者或维护者。你想知道你是否做错了，是否有更多你力所能及的可以引领新贡献者并且帮助减轻你的负担的事情。</p>
<p>在你的项目中就有一个几乎是自我维持的。你已经好几年没有碰过它了，但是有一个维护小组在答复每一个问题和 PR，因此你不用关注它。你极其感激这些维护者。但是你并不知道是因为做了什么事情才有如此多的维护者参与这个项目中，而其他的项目则以你独自负责而收尾。</p>
<h3 id="展望未来"><a href="#展望未来" class="headerlink" title="展望未来"></a>展望未来</h3><p>你不愿意创建新项目了，因为你知道它只会增加你的维护负担。事实上，有一个对立的现象是：你越成功，你从 GitHub 通知那里得到的“惩罚”就越多。</p>
<p>你仍然可以回忆起创作的激情，从头开始写一个新项目解决之前未解决的问题时的那种喜悦。但是现在你不喜欢这种喜悦，因为任何新项目都会从旧项目中窃取时间。你想知道是否到了正式放弃你的一些旧项目或者 <a href="http://unmaintained.tech/" target="_blank" rel="external">标记它们为不再维护</a> 的时候了。</p>
<p>你想知道在你崩溃之前你还能坚持多久。你之前考虑将开源作为你的日常工作。但是和一些真正将开源作为生活的人聊过之后，你知道这通常意味着可以将一个具体的开源项目作为你的日常工作。但是对你来说并没有什么帮助，因为你有横跨多个领域的 <a href="https://www.npmjs.com/~nolanlawson" target="_blank" rel="external">几十个项目</a>，这些都在争夺你的时间。</p>
<p>你最想要的是有更多的项目可以自我维护。你尝试按照所有的 <a href="https://medium.freecodecamp.com/how-to-attract-new-contributors-to-your-open-source-project-46f8b791d787" target="_blank" rel="external">最佳实践</a>：你有一个 <code>CONTRIBUTING.md</code> 和一个行为准则，你热情地向所有提交高质量的 PR 的人发出所有者权限。为每一个项目都做这些事情是非常辛苦的，所以，你并没有对自己想象中的那样勤奋。</p>
<p>自从你知道开源经常被视为一个为享有特权的白人（就像你一样）开设的高档俱乐部后，你也因为这个而感到内疚。所以你因为没有付出足够的努力来修复这些问题而焦虑。</p>
<p>无论如何，你感到内疚：你知道你可以帮助某人解决他们的问题但是反而让他们的问题腐烂了几个月然后关闭它而内疚，或者因为知道某个人在你的仓库发起了他们的第一个 pull request 但是你并没有时间去回复它而内疚，并且你可能还因此致使他们对开源长期感到气馁。你因自己的所作所为而感到内疚，因没能做到的事情感到内疚，并且不想招募更多的人来分担你不幸的内疚经历。</p>
<h3 id="Putting-it-all-together"><a href="#Putting-it-all-together" class="headerlink" title="Putting it all together"></a>Putting it all together</h3><p>我上面所说的都是基于我自己的经验。我不能声称代表了所有从事开源软件事业的人，但是这确实是我的感受。</p>
<p>我已经从事开源很长一段时间了（大概 7 年吧），我一直很讨厌抱怨这些事情，因为我担心这会被理解为应当更明白事理的人的夸张的牢骚。毕竟，这种情况不是我自己导致的么？只要我愿意我可以随时离开 GitHub，我对任何人都没有义务。</p>
<p>还有，我不应该感激么？我在开源方面的工帮助我在社区获得了名声。我被邀请在一些会议上演讲。我在推特有成千上万的粉丝在听我说的话并且高度尊重我的意见。可以说我之所以得到了微软的工作就是因为我在开源方面的经历。我该抱怨谁？</p>
<p>并且，我知道已经有很多跟我类似的人放弃了。那些人在无影无踪地消失之前曾积极地合并 pull request、修复问题，在博客上写一些关于他们项目的文章。对于其中一些人，我甚至都不会在他们的 repo 上打开 issue，因为我知道他们不会回复。我不会抱怨这些事情，但是我担心我也会走他们的老路。</p>
<p>我已经采取了很多自我保护措施。我不再使用 GitHub 的通知界面了，我使用邮件进行过滤。因此我可以基于项目（不维护的会被忽略掉）或通知类型（提到我的和我评论过的通常优先级更高）分类我的通知。由于通知是邮件，这也有助于我离线工作并且在一个地方处理所有的事情。</p>
<p>我经常会收到蓝色级别的邮件让我支持一个我已经停止维护的项目（例如，我每月至少收到一封关于<a href="https://github.com/nolanlawson/catlog" target="_blank" rel="external">这一个项目</a>，通常情况下我不会回复他们。我也倾向于忽略我博客文章里面的评论、Stack Overflow 答案的回复和邮件里的问题。我基本上也不再关注那些我觉得别的维护者已经做得很好的 repo。</p>
<p>这种情况如此令人沮丧的原因之一是，我越来越觉得处理问题远比实际维护一个项目要花费时间。换句话说，我经常只有时间阅读一个问题然后说：“对不起，我现在没时间看这个。”仅仅是这样的回复就已经占用了我原本为开源预留的大部分时间。</p>
<p><a href="https://github.com/blog/2111-issue-and-pull-request-templates" target="_blank" rel="external">Issue templates</a>, <a href="https://greenkeeper.io/" target="_blank" rel="external">GreenKeeper</a>, <a href="https://travis-ci.org/" target="_blank" rel="external">Travis</a>, <a href="https://docs.travis-ci.com/user/common-build-problems/#travis_retry" target="_blank" rel="external">travis_retry</a>, <a href="http://coveralls.io/" target="_blank" rel="external">Coveralls</a>, <a href="http://saucelabs.com/" target="_blank" rel="external">Sauce Labs</a>… 针对开源维护的问题，有这么多的技术解决方案。我非常感激它们。如果没有这么多自动化工具，我将不能保持专注。但在某些时候，相比技术问题，你遇到的更多的是社交问题。一个人成不了规模。我甚至不在 <a href="https://gist.github.com/bcoe/dcc961b869bbf6685002" target="_blank" rel="external">前 100 个 npm 贡献者</a> 之列，就已经感觉到了压力。简直不敢想象那一百个人的感觉是什么样的。</p>
<p>我已经告诉我的伴侣，当我们决定开始拥有一个孩子时，可能我还是退出开源比较好。我不知道我怎样才能在撑起一个家庭和从事开源之间平衡时间。我预计最终这个将解决我的问题：核选择。我只是希望它能以一个积极的形式到来，像是开启了我的生活新篇章一样，而不是一个消极的形式。</p>
<h3 id="结尾词"><a href="#结尾词" class="headerlink" title="结尾词"></a>结尾词</h3><p>如果你已经阅读到这里，并且对开源社区的问题和潜在的解决方案感兴趣，或许你会想看看 <a href="https://twitter.com/nayafia" target="_blank" rel="external">Nadia Eghbal</a> 写的 <a href="http://www.fordfoundation.org/library/reports-and-studies/roads-and-bridges-the-unseen-labor-behind-our-digital-infrastructure" target="_blank" rel="external">“Roads and Bridges”</a>，这可能是对问题最清晰和最彻底的分析。</p>
<p>我也乐于接受建议，但是请记住，我非常不愿意在我的开源项目中将钱和劳动成果混在一起（由于傻傻的理想主义的原因）。但是我曾在 <a href="https://vuejs.org/support-vuejs/" target="_blank" rel="external">其他项目</a> 中看到它处理的很好。</p>
<p>注意，尽管上边这些都是消极的，但是我仍然感觉开源已经成为了对我的生活很有价值的补充。但我希望这是一个有用的窗口，它可以感受到如何成为你自己的成功的受害者，并且没有完成就放下工作而感到压力。</p>
<p>如果说我在开源中学到了一件事，那就是：你做的工作越多，你就越需要工作。我知道这个问题无解。</p>
<blockquote>
<p>本文根据 <a href="https://twitter.com/nolanlawson" target="_blank" rel="external">Nolan Lawson</a> 的《<a href="https://nolanlawson.com/2017/03/05/what-it-feels-like-to-be-an-open-source-maintainer/" target="_blank" rel="external">What it feels like to be an open-source maintainer</a>》所译，整个译文带有自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明英文出处：<a href="https://nolanlawson.com/2017/03/05/what-it-feels-like-to-be-an-open-source-maintainer/" target="_blank" rel="external">nolanlawson.com/2017/03/05/what-it-feels-like-to-be-an-open-source-maintainer</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;原文地址：&lt;a href=&quot;https://nolanlawson.com/2017/03/05/what-it-feels-like-to-be-an-open-source-maintainer/&quot;&gt;What it feels like to be an open-source maintainer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;原文作者：&lt;a href=&quot;https://twitter.com/nolanlawson&quot;&gt;Nolan Lawson&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译文出自：&lt;a href=&quot;https://github.com/sqrthree/sqrthree.github.io/issues/13&quot;&gt;[译] 作为一个开源软件的作者是一种什么样的感受？&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译者：&lt;a href=&quot;http://github.com/sqrthree&quot;&gt;根号三&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;你的门外有几百人在排队。他们耐心地等待着你回答他们的问题、抱怨、pull requests 和 功能请求。&lt;/p&gt;
&lt;p&gt;你想帮助他们，但是现在你要关闭它们。或许你已经辛苦工作了一整天，或者你累了，或者你只是想和你的家人、朋友享受一个周末。&lt;/p&gt;
&lt;p&gt;但是如果你访问 &lt;a href=&quot;https://github.com/notifications&quot;&gt;github.com/notifications&lt;/a&gt;，它会持续地提醒你有多少人正在等着你：&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="译文" scheme="http://blog.sqrtthree.com/tags/%E8%AF%91%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>是时候来用 Slush 构建你自己的脚手架了</title>
    <link href="http://blog.sqrtthree.com/2017/03/01/it-is-time-to-build-your-own-scaffolding-with-slush/"/>
    <id>http://blog.sqrtthree.com/2017/03/01/it-is-time-to-build-your-own-scaffolding-with-slush/</id>
    <published>2017-03-01T11:16:57.000Z</published>
    <updated>2017-03-01T11:16:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Slush-是什么？"><a href="#Slush-是什么？" class="headerlink" title="Slush 是什么？"></a>Slush 是什么？</h2><p>简单的来说，Slush 就是一个脚手架生成工具。什么？脚手架？这是什么鬼？嗯，脚手架嘛，自然是这个样子咯~</p>
<a id="more"></a>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79gy1fd3vev11wnj30go0b3431.jpg" alt=""></p>
<p>什么？你问的是编程中的脚手架呀？啊，这么说吧。身为一个前端开发者，每次新建一个项目的时候是不是要创建好多个文件夹、配置文件？写个文档是不是要创建好多个目录？然而每个项目的结构和配置文件都大同小异，是不是早已繁琐感觉人生无望，失去了活着的意义？</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79gy1fd3vw3uqtfj30bo08rwem.jpg" alt=""></p>
<p>就在这个时候，Slush 横空出世，能够让你轻松搞定这些繁琐的事情，重新找回人生的意义，你就说吼不吼啊。从此麻麻再也不用担心我整天都在忙着创建文件夹啦。</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fd3wiy66q4g306o0360vr.gif" alt=""></p>
<h2 id="道理我都懂，可我大-Yeoman-用的好好的，为什么要换新？"><a href="#道理我都懂，可我大-Yeoman-用的好好的，为什么要换新？" class="headerlink" title="道理我都懂，可我大 Yeoman 用的好好的，为什么要换新？"></a>道理我都懂，可我大 Yeoman 用的好好的，为什么要换新？</h2><p>嗯。Yeoman 确实也是一个很好用的脚手架工具，历史悠久。然而它以 Grunt 为基础工具，上手难度大大提高。在轮子层出不穷的前端领域早已是风前残烛。而 Slush 则是基于 Gulp 的 『流式』思想作为基础工具，当你在做定制化脚手架时，Gulp 简单易用的特点则能让你轻轻松松搞定。</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79gy1fd3wvq1wemj3060046q36.jpg" alt=""></p>
<p>噢，这么屌？那该怎么用呢？</p>
<h1 id="说了这么多，我到底该怎么用？"><a href="#说了这么多，我到底该怎么用？" class="headerlink" title="说了这么多，我到底该怎么用？"></a>说了这么多，我到底该怎么用？</h1><p>好啦，废话不多说啦，我们赶紧来趁着这个热乎劲看看怎么使用吧。</p>
<h3 id="1-安装-slush"><a href="#1-安装-slush" class="headerlink" title="1. 安装 slush"></a>1. 安装 slush</h3><p>首先，你得有 NodeJS 环境，什么？连 NodeJS 都没装？赶紧回家洗洗睡吧。如果你已经有了呢，你就可以通过 npm 直接将 slush 安装到全局环境下啦：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> -g slush</div></pre></td></tr></table></figure>
<p> 安装完了之后，你可以执行下面这行命令来确保安装成功：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">slush -v</span></div></pre></td></tr></table></figure>
<p>如果你能看到输出了一个版本号，就说明已经安装成功啦。下面我们就来看一下如何使用吧。</p>
<h3 id="2-安装第三方脚手架"><a href="#2-安装第三方脚手架" class="headerlink" title="2. 安装第三方脚手架"></a>2. 安装第三方脚手架</h3><p>在使用 slush 创建项目之前，你得先安装一些别人开发好的脚手架。安装好脚手架之后才能根据脚手架生成约定好的项目结构哟。</p>
<p>咦？不知道有什么脚手架？快来 <a href="http://slushjs.github.io/generators" target="_blank" rel="external">大厅</a> 里找找吧。</p>
<p>很好，你已经找到了自己喜欢的脚手架了，我们快来安装它吧。打住，提醒你一下，脚手架要安装到全局环境下才有效哟。</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> -g slush-react-starter-kit</div></pre></td></tr></table></figure>
<h3 id="3-开始生成项目吧"><a href="#3-开始生成项目吧" class="headerlink" title="3. 开始生成项目吧"></a>3. 开始生成项目吧</h3><p>现在我们已经安装好需要的一切了，终于可以开始创建项目啦。</p>
<p>首先，创建一个项目文件夹并进入文件夹中：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir <span class="keyword">my</span>-<span class="keyword">first</span>-slush-project</div><div class="line">cd <span class="keyword">my</span>-<span class="keyword">first</span>-slush-project</div></pre></td></tr></table></figure>
<p>其次，执行 slush 生成命令：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">slush react-starter-kit</span></div></pre></td></tr></table></figure>
<p><code>react-starter-kit</code>是什么鬼？我们安装的明明是 <code>slush-react-starter-kit</code> 呀。没错，在生成项目的时候，slush 后面跟的脚手架名字中是不带 <code>slush</code> 关键词的。就是这么任性。</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fd3xirh0ebg30jg0axhdt.gif" alt=""></p>
<h2 id="没找到好使的，宝宝想要自定义怎么办？"><a href="#没找到好使的，宝宝想要自定义怎么办？" class="headerlink" title="没找到好使的，宝宝想要自定义怎么办？"></a>没找到好使的，宝宝想要自定义怎么办？</h2><p>当然了，可能你翻遍了整个大厅都没找到自己想要的，迫切想要自己定制一个脚手架怎么办呢？且听我慢慢道来。</p>
<p>其实很简单啦，Slush 脚手架就是一个普通的 npm package，唯一需要注意的有这么几点：</p>
<ol>
<li>名字要以 <code>slush-*</code> 的方式</li>
<li>package 中包含一个 <code>slushfile.js</code> 文件</li>
<li>package.json 文件中加上 slushgenerator 关键词方便别人检索</li>
<li>模板文件放在 <code>templates</code> 文件夹中</li>
<li>别忘了安装 gulp 作为本地依赖啦</li>
</ol>
<p>假设你已经按照上面这些约定做好了准备工作，那么接下来我们就可以搞一件大新闻啦。</p>
<h4 id="第一步：创建模板文件"><a href="#第一步：创建模板文件" class="headerlink" title="第一步：创建模板文件"></a>第一步：创建模板文件</h4><p>首先，你要将模板文件（就是运行脚手架之后生成的项目文件）全部放到 <code>templates</code> 文件夹中</p>
<h4 id="第二步：在-slushfile-js-文件中编写任务流。"><a href="#第二步：在-slushfile-js-文件中编写任务流。" class="headerlink" title="第二步：在 slushfile.js 文件中编写任务流。"></a>第二步：在 slushfile.js 文件中编写任务流。</h4><p>前面已经说到 Slush 是基于 Gulp 作为基础工具的，所以你只需要按照 Gulp 的使用方法在 <code>slushfile.js</code> 编写任务流就可以啦。</p>
<p>咦，好像有点不太对，既然是用 Gulp，那么 <code>gulpfile.js</code>  文件呢？</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79gy1fd3y3nwzfgj304o03smxd.jpg" alt=""></p>
<p>这里确实是不需要 <code>gulpfile.js</code>  文件啦，因为 Gulp 任务都在 <code>slushfile.js</code> 文件中写啦，Slush 会帮你自动驱动 Gulp 的啦。</p>
<p>好了，那么 <code>slushfile.js</code> 文件中的到底该怎么写呢？放着我来，小哥亲自给你示范一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    install = <span class="built_in">require</span>(<span class="string">'gulp-install'</span>),</div><div class="line">    conflict = <span class="built_in">require</span>(<span class="string">'gulp-conflict'</span>),</div><div class="line">    template = <span class="built_in">require</span>(<span class="string">'gulp-template'</span>),</div><div class="line">    inquirer = <span class="built_in">require</span>(<span class="string">'inquirer'</span>);</div><div class="line"></div><div class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</div><div class="line">  inquirer.prompt([</div><div class="line">    &#123;</div><div class="line">    	<span class="attr">type</span>: <span class="string">'input'</span>,</div><div class="line">    	<span class="attr">name</span>: <span class="string">'name'</span>, </div><div class="line">    	<span class="attr">message</span>: <span class="string">'Give your app a name'</span>, </div><div class="line">    	<span class="attr">default</span>: gulp.args.join(<span class="string">' '</span>) <span class="comment">// 从运行参数中获取值作为 name 的默认值。</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">    	<span class="attr">type</span>: <span class="string">'confirm'</span>,</div><div class="line">    	<span class="attr">name</span>: <span class="string">'moveon'</span>,</div><div class="line">        <span class="attr">message</span>: <span class="string">'Continue?'</span></div><div class="line">    &#125;</div><div class="line">  ]).then(<span class="function"><span class="keyword">function</span> (<span class="params">answers</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!answers.moveon) &#123;</div><div class="line">      <span class="keyword">return</span> done();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    gulp.src(__dirname + <span class="string">'/templates/**'</span>)      <span class="comment">// 使用脚本所在的目录作为相对路径。</span></div><div class="line">      .pipe(template(answers))                 <span class="comment">// Lodash 模板支持，可以方便的在模板中进行插值。</span></div><div class="line">      .pipe(conflict(<span class="string">'./'</span>))                    <span class="comment">// 当文件冲突时，询问是否覆盖。</span></div><div class="line">      .pipe(gulp.dest(<span class="string">'./'</span>))                   <span class="comment">// 输出到执行命令的当前文件夹中。</span></div><div class="line">      .pipe(install())                         <span class="comment">// 使用 `bower install` 或 `npm install` 执行安装操作。</span></div><div class="line">      .on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        done();                                <span class="comment">// 告知完成。</span></div><div class="line">      &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>PS: 去哪里发现诸如 <code>[inquirer](https://github.com/SBoudrias/Inquirer.js)</code> 这么好用的 package 呢？你可以关注下 <a href="https://github.com/sqrthree/awesome-npm-packages" target="_blank" rel="external">github.com/sqrthree/awesome-npm-packages</a> 哟。</p>
<p>现在就已经搞定啦，接下来怎么使用呢？因为 Slush 调用的是全局环境下的脚手架，但是目前我们的脚手架并不在全局环境中，然而你还没发布这个脚手架，不能直接工作 <code>npm install -g</code> 进行全局安装，所以显然是不！能！用！啦！哈！哈！哈！</p>
<p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1fd3ynyznx6g3050050wgk.gif" alt=""></p>
<p>别着急砸电脑嘛，我们还有一个办法捏。那就是通过 <code>npm link</code> 命令将当前脚手架挂载到全局环境中啦。你只需要在当前文件夹中执行 <code>npm link</code>，搞定，收工（前提是 <code>package.json</code> 已经写好）。然后就可以随便找个文件夹安装我们上面说的方法使用脚手架啦。</p>
<h2 id="生成-Slush-脚手架的脚手架"><a href="#生成-Slush-脚手架的脚手架" class="headerlink" title="生成 Slush 脚手架的脚手架"></a>生成 Slush 脚手架的脚手架</h2><p>尽管自定义一个脚手架已经非常方便了，但是细心的你会发现几乎每个脚手架之间 <code>slushfile.js</code> 也都大同小异，只是 <code>templates</code> 文件夹中的模板文件不一样，所以呢，你懂得😉。</p>
<p><a href="https://github.com/chrisenytc/slush-generator" target="_blank" rel="external">slush-generator</a> 就是这么一个让我们来生成 Slush 脚手架的脚手架。有了它，创建自定义脚手架的时候异常方便。</p>
<h4 id="第一步：安装-slush-generator"><a href="#第一步：安装-slush-generator" class="headerlink" title="第一步：安装 slush-generator"></a>第一步：安装 slush-generator</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g slush-generator</div></pre></td></tr></table></figure>
<h4 id="第二步：创建并进入自定义脚手架的文件夹"><a href="#第二步：创建并进入自定义脚手架的文件夹" class="headerlink" title="第二步：创建并进入自定义脚手架的文件夹"></a>第二步：创建并进入自定义脚手架的文件夹</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">mkdir</span> <span class="keyword">my</span>-slush-generator</div><div class="line">cd <span class="keyword">my</span>-slush-generator</div></pre></td></tr></table></figure>
<h4 id="第三步：运行任务："><a href="#第三步：运行任务：" class="headerlink" title="第三步：运行任务："></a>第三步：运行任务：</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">slush generator</span></div></pre></td></tr></table></figure>
<p>之后会让你回答一些问题，在回答过之后，你的自定义脚手架目录就已经生成好啦。接下来只需要在 <code>templates</code> 文件夹中放置你需要的文件就好了。</p>
<h2 id="查看已经安装好的脚手架"><a href="#查看已经安装好的脚手架" class="headerlink" title="查看已经安装好的脚手架"></a>查看已经安装好的脚手架</h2><p>直接输入 <code>slush</code> 即可看到已经安装过的脚手架：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">➜  <span class="selector-tag">slush</span></div><div class="line"><span class="selector-attr">[slush]</span> <span class="selector-tag">Installed</span> <span class="selector-tag">generators</span></div><div class="line"><span class="selector-attr">[slush]</span> ├── <span class="selector-tag">generator</span> (0<span class="selector-class">.2</span><span class="selector-class">.11</span>)</div><div class="line"><span class="selector-attr">[slush]</span> └── <span class="selector-tag">koa2</span> (0<span class="selector-class">.1</span><span class="selector-class">.0</span>)</div></pre></td></tr></table></figure>
<p>怎么样？是不是已经迫不及待的想要尝试了？</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79gy1fd3z94buhfj30g40g4t9g.jpg" alt=""></p>
<p>喔，对了，少侠留步，差点忘了告诉你一件事情：</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fd3za793nqj30rs0rsabk.jpg" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Slush-是什么？&quot;&gt;&lt;a href=&quot;#Slush-是什么？&quot; class=&quot;headerlink&quot; title=&quot;Slush 是什么？&quot;&gt;&lt;/a&gt;Slush 是什么？&lt;/h2&gt;&lt;p&gt;简单的来说，Slush 就是一个脚手架生成工具。什么？脚手架？这是什么鬼？嗯，脚手架嘛，自然是这个样子咯~&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="工具" scheme="http://blog.sqrtthree.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="gulp" scheme="http://blog.sqrtthree.com/tags/gulp/"/>
    
  </entry>
  
  <entry>
    <title>一个关于 Styled Components 的五分钟介绍</title>
    <link href="http://blog.sqrtthree.com/2017/02/10/a-5-minute-intro-to-styled-components/"/>
    <id>http://blog.sqrtthree.com/2017/02/10/a-5-minute-intro-to-styled-components/</id>
    <published>2017-02-10T00:23:06.000Z</published>
    <updated>2017-02-10T00:23:06.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<ul>
<li>原文地址：<a href="https://medium.freecodecamp.com/a-5-minute-intro-to-styled-components-41f40eb7cd55#.z1nrxe1zr" target="_blank" rel="external">A 5-minute Intro to Styled Components</a></li>
<li>原文作者：<a href="https://medium.freecodecamp.com/@sachagreif" target="_blank" rel="external">Sacha Greif</a></li>
<li>译文出自：<a href="https://github.com/xitu/gold-miner" target="_blank" rel="external">掘金翻译计划</a></li>
<li>译者：<a href="https://github.com/sqrthree" target="_blank" rel="external">根号三</a></li>
<li>校对者：<a href="https://github.com/Tina92" target="_blank" rel="external">Tina92</a>、<a href="https://github.com/lovelyCiTY" target="_blank" rel="external">lovelyCiTY</a></li>
</ul>
</blockquote>
<p>CSS 是一个很神奇的语言，你可以在 15 分钟之内就学会一些基础部分，但是如果你要找到一个好的方式来组织你的样式，将会花费数年时间。</p>
<p>这主要是由于语言本身很奇葩。不合常规的是， CSS 是相当有限的，没有变量、循环或者函数。与此同时，它又是相当自由的，你可以随意使用元素、Class、ID 或它们的任意组合。</p>
<a id="more"></a>
<h3 id="混乱的样式表"><a href="#混乱的样式表" class="headerlink" title="混乱的样式表"></a>混乱的样式表</h3><p>正如你自己所经历过的那样，CSS 通常是很混乱的。虽然有诸如 SASS 和 LESS 这样的预处理器添加了大量有用的特性，但是它们仍然不能阻止 CSS 的这种混乱状态。</p>
<p>组织工作留给了像 <a href="http://getbem.com/" target="_blank" rel="external">BEM</a> 这样的方法，这些方法虽然很有用但是完全是自选方案，不能在语言或工具级别强制实施。</p>
<h3 id="CSS-的新浪潮"><a href="#CSS-的新浪潮" class="headerlink" title="CSS 的新浪潮"></a>CSS 的新浪潮</h3><p>最近一两年，新一波基于 JavaScript 的工具正试图通过改变编写 CSS 的方式来从根本上解决这些问题。</p>
<p><a href="https://github.com/styled-components/styled-components" target="_blank" rel="external">Styled Components</a> 就是那些工具库之一，因为兼顾创新和传统的优势，它很快就吸引了大量的关注。因此，如果你是 React 使用者（如果你不是的话，可以看看 <a href="https://medium.freecodecamp.com/a-study-plan-to-cure-javascript-fatigue-8ad3a54f2eb1" target="_blank" rel="external">我的 JavaScript 学习计划</a> 和我写的 <a href="https://medium.freecodecamp.com/the-5-things-you-need-to-know-to-understand-react-a1dbd5d114a3" target="_blank" rel="external">React 简介</a>），就绝对值得看看这个新的 CSS 替代者。</p>
<p>最近我用它 <a href="http://sachagreif.com/" target="_blank" rel="external">重新设计了我的个人网站</a>，今天我想分享下我在这个过程中所学到的一些东西。</p>
<h3 id="组件-样式化"><a href="#组件-样式化" class="headerlink" title="组件, 样式化"></a>组件, 样式化</h3><p>关于 Styled Components 你需要理解的最主要的事情就是其名称应该采取字面意思。你不再根据他们的 Class 或者 HTML 元素来对 HTML 元素或组件进行样式化了。</p>
<pre><code>&lt;h1 className=&quot;title&quot;&gt;Hello World&lt;/h1&gt;

h1.title {
  font-size: 1.5em;
  color: purple;
}
</code></pre><p>相反，你可以定义一个拥有它们自己的封装风格的 styled Components。然后你就可以在你的代码中自由的使用它们了。</p>
<pre><code>import styled from &apos;styled-components&apos;;

const Title = styled.h1`
  font-size: 1.5em;
  color: purple;
`;

&lt;Title&gt;Hello World&lt;/Title&gt;
</code></pre><p>这两段代码看起来有一些细微的差别，事实上两者语法是非常相似的。但是它们的关键区别在于样式现在是这些组件的一部分啦。</p>
<p>换句话说，我们正在摆脱 CSS class 作为组件和其样式的中间步骤这种情况。</p>
<p>styled-components 的联合创造者 Max Stoiber 说：</p>
<blockquote>
<p>styled-components 的基本思想就是通过移除样式和组件之间的映射关系来达到最佳实践。</p>
</blockquote>
<h3 id="减少复杂性"><a href="#减少复杂性" class="headerlink" title="减少复杂性"></a>减少复杂性</h3><p>这首先是反直觉的，因为使用 CSS 而不是直接定义 HTML 元素的关键点（还记得 <code>&lt;font&gt;</code> 标签吗？）是引入 class 这个中间层来解耦样式和标签。</p>
<p>但是这层解耦也创造了很多复杂性。有这样一个的观点：相比于 CSS，诸如 Javascript 这类『真正』的编程语言具备了更好的处理这种复杂性的能力。</p>
<h3 id="类（Class）上的-Props"><a href="#类（Class）上的-Props" class="headerlink" title="类（Class）上的 Props"></a>类（Class）上的 Props</h3><p>为了遵循 『无类(no-class)』的理念，当涉及到自定义一个组件的行为时，styled-components 使用了类上的 props（props over classes）。所以呢，代码不是这样的：</p>
<pre><code>&lt;h1 className=&quot;title primary&quot;&gt;Hello World&lt;/h1&gt; // will be blue

h1.title{
  font-size: 1.5em;
  color: purple;

  &amp;.primary{
    color: blue;
  }
}
</code></pre><p>你需要这样写：</p>
<pre><code>const Title = styled.h1`
  font-size: 1.5em;
  color: ${props =&gt; props.primary ? &apos;blue&apos; : &apos;purple&apos;};
`;

&lt;Title primary&gt;Hello World&lt;/Title&gt; // will be blue
</code></pre><p>正如你所看到的那样，styled-components 通过将所有的 CSS 和 HTML 之间的相关实现细节（从组件中）分离出来使你的 React 组件更干净。</p>
<p>也就是说，styled-components 的 CSS 仍然还是 CSS。所以像下面这样的代码也是完全有效的（尽管略微不常用）。</p>
<pre><code>const Title = styled.h1`
  font-size: 1.5em;
  color: purple;

  &amp;.primary{
    color: blue;
  }
`;

&lt;Title className=&quot;primary&quot;&gt;Hello World&lt;/Title&gt; // will be blue
</code></pre><p>这是让 styled-components 很容易就被接受的一个特性：当存在疑惑时，你总是可以倒退回你所熟悉的领域。</p>
<h3 id="警告"><a href="#警告" class="headerlink" title="警告"></a>警告</h3><p>需要提到的很重要的一点是 styled-components 仍然是一个很年轻的项目。有一些特性到目前为止还没有完全支持。例如，如果你想 <a href="https://github.com/styled-components/styled-components/issues/142" target="_blank" rel="external">从父组件中样式化一个子组件</a> 时，目前你仍不得不依靠 CSS class 来实现（至少要持续到 styled-components 版本 2 发布）。</p>
<p>目前也有一个非官方的方法来实现 <a href="https://github.com/styled-components/styled-components/issues/124" target="_blank" rel="external">服务端预渲染你的 CSS</a>，虽然它是通过手动注入样式来实现的。</p>
<p>事实上，styled-components 生成它自己的随机 class 名会使你很难通过浏览器的开发工具来确定你的样式最初是在哪里定义的。</p>
<p>但是鼓舞人心的是，styled-components 核心团队已经意识到了这些问题，并且努力地一个又一个的攻克它们。<a href="(https://github.com/styled-components/styled-components/tree/v2">版本 2 很快就要来啦</a>)，我真的很期待它呢。</p>
<h3 id="了解更多一点吧"><a href="#了解更多一点吧" class="headerlink" title="了解更多一点吧"></a>了解更多一点吧</h3><p>我这篇文章的目的不是向你详细解释 styled-components 是如何生效的，更多的是给你一个小瞥。所以你可以自己决定是否值得一试。</p>
<p>如果我的文章让你感到好奇的话，这里有一些链接你可以了解更多关于 styled-components 的知识。</p>
<ul>
<li>Max Stoiber 最近给 <a href="https://www.smashingmagazine.com/2017/01/styled-components-enforcing-best-practices-component-based-systems/" target="_blank" rel="external">Smashing Magazine</a> 写了一篇文章有关创建 styled-components 的原因的文章。</li>
<li><a href="https://github.com/styled-components/styled-components" target="_blank" rel="external">styled-components repo</a> 它自己就有一个很丰富的文档.</li>
<li><a href="https://medium.com/@jamiedixon/styled-components-production-patterns-c22e24b1d896#.tfxr5bws2" target="_blank" rel="external">Jamie Dixon 写的这篇文章</a> 讲述了切换到 styled-components 的几个好处.</li>
<li>如果你想了解更多关于这个库实际上是如何实现的，可以阅读 Max 的 <a href="http://mxstbr.blog/2016/11/styled-components-magic-explained/" target="_blank" rel="external">这篇文章</a>。</li>
</ul>
<p>如果你想更进一步，也可以了解下 <a href="https://github.com/threepointone/glamor" target="_blank" rel="external">Glamor</a> —— 一个完全不同的 CSS 新浪潮。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;原文地址：&lt;a href=&quot;https://medium.freecodecamp.com/a-5-minute-intro-to-styled-components-41f40eb7cd55#.z1nrxe1zr&quot;&gt;A 5-minute Intro to Styled Components&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;原文作者：&lt;a href=&quot;https://medium.freecodecamp.com/@sachagreif&quot;&gt;Sacha Greif&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译文出自：&lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;掘金翻译计划&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译者：&lt;a href=&quot;https://github.com/sqrthree&quot;&gt;根号三&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;校对者：&lt;a href=&quot;https://github.com/Tina92&quot;&gt;Tina92&lt;/a&gt;、&lt;a href=&quot;https://github.com/lovelyCiTY&quot;&gt;lovelyCiTY&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;CSS 是一个很神奇的语言，你可以在 15 分钟之内就学会一些基础部分，但是如果你要找到一个好的方式来组织你的样式，将会花费数年时间。&lt;/p&gt;
&lt;p&gt;这主要是由于语言本身很奇葩。不合常规的是， CSS 是相当有限的，没有变量、循环或者函数。与此同时，它又是相当自由的，你可以随意使用元素、Class、ID 或它们的任意组合。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="CSS" scheme="http://blog.sqrtthree.com/tags/CSS/"/>
    
      <category term="React" scheme="http://blog.sqrtthree.com/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>通过 CSS 实现六边形效果</title>
    <link href="http://blog.sqrtthree.com/2016/06/27/The-hexagon-by-CSS/"/>
    <id>http://blog.sqrtthree.com/2016/06/27/The-hexagon-by-CSS/</id>
    <published>2016-06-27T23:54:51.000Z</published>
    <updated>2016-06-27T23:54:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>故事说起那是在一个冰冷幽暗的晚上，外面下着淅淅沥沥的小雨，我正在思考一个十分重要的人生问题：这个周末哪里去？是宅在家里写程序好呢，还是宅在家里写博客好呢？还是好呢？这时，桌面右下角很少抖动的 QQ 头像竟然动了起来，我多年的直觉告诉我，一定是有人要约我，尽管这件事情从来没有发生过。我去，了不得，竟然是万年隐身的女神主动联系我，女神一定是因为看了朋友圈的照片对我的身材陷入了深深的迷恋，说不定还要包养我呢，啊，想想都觉得好激动啊~</p>
<blockquote>
<p>“哎，在干嘛呢？” (你看，果然要约我)</p>
<p>“没事啊，在思考人生呢”</p>
<p>“那个，我在写一个网站，需要用 CSS 实现一个六边形效果，你能帮我写个 Demo 么？”</p>
</blockquote>
<p>额。。。那个，好吧，跟想象中的有点不太一样，咦，万一这是女神对我的考验呢，说不定通过了之后就，哇卡卡~</p>
<p>用 CSS 实现一个六边形还不简单？</p>
<p>如下图，这就是我们要实现的六边形。</p>
<p><img src="http://7xl8me.com1.z0.glb.clouddn.com/hexagon_1.png?imageView2/1/w/256/h/256/q/100%7Cwatermark/2/text/QHNxcnR0aHJlZQ==/font/5b6u6L2v6ZuF6buR/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10" alt="六边形"></p>
<p>咋一看，这货怎么能用 CSS 来实现嘛？看官别着急，我给你画两条线你就能猜到了，请看下图：</p>
<p><img src="http://7xl8me.com1.z0.glb.clouddn.com/hexagon_2.png?imageView2/1/w/256/h/256/q/100%7Cwatermark/2/text/QHNxcnR0aHJlZQ==/font/5b6u6L2v6ZuF6buR/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10" alt="六边形"></p>
<p>咦，还没看出来？那您老再看下面这张图：</p>
<p><img src="http://7xl8me.com1.z0.glb.clouddn.com/hexagon_3.png?imageView2/1/w/256/h/256/q/100%7Cwatermark/2/text/QHNxcnR0aHJlZQ==/font/5b6u6L2v6ZuF6buR/fontsize/500/fill/I0VGRUZFRg==/dissolve/100/gravity/SouthEast/dx/10/dy/10" alt="六边形"></p>
<p>这下能够看出来了吧，没错，思路很简单，就是利用两个三角形和一个长方形然后拼接到一块，就能做出这么一个正六边形啦~</p>
<p>嗯？三角形怎么做？介个，等我什么时候有空了再给你娓娓道来吧（不过我想我是没空了，因为等我做完女神就要约我了~）</p>
<p>好了，废话不多说，直接上代码~ <a href="http://codepen.io/sqrtthree/pen/jrBEbj" target="_blank" rel="external">点击查看</a></p>
<p>然后痛痛快快的给女神发了过去，</p>
<blockquote>
<p>“咦，效果虽然是这个效果，但是为什么鼠标移入的触发区域不太对呢？能不能把鼠标移入的触发区域也仅限制为六边形？”</p>
</blockquote>
<p>嗯，这确实是这种方法的一个弊端，因为 CSS 中是没法直接做一个三角形的，所以我们利用了 <code>border</code> 的特点模拟了一个出来，但是元素本质上还是一个矩形。</p>
<p>那么问题来了，怎样实现一个完美的六边形效果呢？</p>
<p>哈哈，这个问题怎么能难得住我嘛，不多一会，我就做出了一个完美的六边形出来给女神发过去了，这次主要是利用了 <code>overflow: hidden</code> 和 CSS3 中的 <code>transform</code> 相关属性实现的。详细代码请 <a href="http://codepen.io/sqrtthree/pen/BzKbBb" target="_blank" rel="external">点击查看</a>。</p>
<p>嗯，这次看来女神挺满意的~</p>
<p>毕竟鼠标移入的触发区域也完美的限制在六边形里面了嘛~</p>
<p>女神表达了感激之情，我们在 QQ 上轻(gan)松(ga)的聊了起来，看起来是到了该约周末一起吃饭的时候了。</p>
<blockquote>
<p>“啊，抱歉噢，我周末要跟男朋友一起去逛街呢”</p>
</blockquote>
<p>哦。</p>
<p>呵呵哒。</p>
<p>真是一个感(lei)人(jue)肺(bu)腑(ai)的爱情故事。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;故事说起那是在一个冰冷幽暗的晚上，外面下着淅淅沥沥的小雨，我正在思考一个十分重要的人生问题：这个周末哪里去？是宅在家里写程序好呢，还是宅在家里写博客好呢？还是好呢？这时，桌面右下角很少抖动的 QQ 头像竟然动了起来，我多年的直觉告诉我，一定是有人要约我，尽管这件事情从来没有
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="CSS" scheme="http://blog.sqrtthree.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>jQuery 3.0 终于发布啦！</title>
    <link href="http://blog.sqrtthree.com/2016/06/13/jQuery-3-0-Final-Released/"/>
    <id>http://blog.sqrtthree.com/2016/06/13/jQuery-3-0-Final-Released/</id>
    <published>2016-06-13T23:39:09.000Z</published>
    <updated>2016-07-03T00:57:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>jQuery 3.0 现在发布啦！这个版本从 2014 年 10 月就已经在开始开发了。我们的目标是创建一个更轻量、更快的 jQuery（带有向后兼容的思想）。我们删除了所有的兼容旧版本 IE 浏览器的解决办法，并在一些有意义的地方利用了一些较为现代的 web APIs。它是 2.x 分支的延续，但是包含了少量我们认为早该出现的改变。在一段时间内， 1.12 和 2.2 分支仍将继续获得关键性的支持补丁，但是它们不会得到任何新功能或是重大修订。jQuery 3.0 就是 jQuery 的未来。如果你需要支持 IE6-8，你可以继续使用最新的 1.12 版。</p>
<a id="more"></a>
<p>尽管版本号是 3.0，但是我们预感在升级现有的代码时并不会造成太多的麻烦。是，是有一些 “breaking changes”，这对于主版本号跳跃来说是合理的，但是我们希望这些改变并没有真正影响到很多人。</p>
<p>为了帮助升级，我们有一个新的 <a href="https://jquery.com/upgrade-guide/3.0/" target="_blank" rel="external">3.0 升级指南</a>，并且 <a href="https://github.com/jquery/jquery-migrate#migrate-older-jquery-code-to-jquery-30" target="_blank" rel="external">jQuery Migrate 3.0</a> 将会帮助你识别代码中的兼容性问题。您在这次变化中的反馈将对我们有非常大的帮助，所以请尝试在您现有的代码和插件中使用它吧！</p>
<p>你可以在 jQuery CDN 中获取到这些文件，或者直接链接他们：</p>
<p><a href="https://code.jquery.com/jquery-3.0.0.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0.js</a></p>
<p><a href="https://code.jquery.com/jquery-3.0.0.min.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0.min.js</a></p>
<p>你也可以从 <code>npm</code> 中得到这个版本：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">npm</span> <span class="selector-tag">install</span> <span class="selector-tag">jquery</span>@<span class="keyword">3</span>.<span class="keyword">0</span>.<span class="keyword">0</span></div></pre></td></tr></table></figure>
<p>附带着，我们也发布了 <code>jQuery Migrate 3.0</code>。我们强烈建议你使用它来定位 jQuery 3.0 的重大改变而带来的任何问题。你可以在这里获取这些文件：</p>
<p><a href="https://code.jquery.com/jquery-migrate-3.0.0.js" target="_blank" rel="external">https://code.jquery.com/jquery-migrate-3.0.0.js</a></p>
<p><a href="https://code.jquery.com/jquery-migrate-3.0.0.min.js" target="_blank" rel="external">https://code.jquery.com/jquery-migrate-3.0.0.min.js</a></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">npm</span> <span class="selector-tag">install</span> <span class="selector-tag">jquery-migrate</span>@<span class="keyword">3</span>.<span class="keyword">0</span>.<span class="keyword">0</span></div></pre></td></tr></table></figure>
<p>有关借助 jQuery Migrate 将你的 jQuery 1.x 和 2.x 页面升级到 jQuery 3.0 的更多信息，请看 <a href="http://blog.jquery.com/2016/05/19/jquery-migrate-1-4-1-released-and-the-path-to-jquery-3-0/" target="_blank" rel="external"> the jQuery Migrate 1.4.1 blog post.</a></p>
<h4 id="轻量级构建"><a href="#轻量级构建" class="headerlink" title="轻量级构建"></a>轻量级构建</h4><p>最后，我们在这个版本里添加了一些新东西。有时你不需要 ajax, 或者你更喜欢使用一个专注于 ajax 请求的独立库。你往往使用CSS类作为一个简单的组合来操作的所有的网页动画。随着包含 ajax 和动画效果模块的普通版本的 jQuery，我们发布了一个排除了这些模块的 “slim” 版本。总而言之，它排除了 ajax，动画和当前过时的代码。在这关注加载性能的时代，jQuery 的大小是非常罕见的，但是 slim 版本比普通版小了近 6k （gzip压缩字节）- 23.6k 对 30k。这些文件在 CDN 和 npm 上都是可用的：</p>
<p><a href="https://code.jquery.com/jquery-3.0.0.slim.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0.slim.js</a></p>
<p><a href="https://code.jquery.com/jquery-3.0.0.slim.min.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0.slim.min.js</a></p>
<p>这个构建版本是基于我们自定义的构建 API 创建的。它允许你排除或者包含任何你喜欢的模块。查看 jQuery README 文件获取更多信息。</p>
<h4 id="和-jQuery-UI-以及-jQuery-Mobile-之间的兼容性"><a href="#和-jQuery-UI-以及-jQuery-Mobile-之间的兼容性" class="headerlink" title="和 jQuery UI 以及 jQuery Mobile 之间的兼容性"></a>和 jQuery UI 以及 jQuery Mobile 之间的兼容性</h4><p>虽然大多数的功能都能够正常工作，但是在升级的过程中 jQuery UI 和 jQuery Mobile 仍然会有一些小问题。如果你发现了一个问题，记住在下一个版本或许已经解决了，使用 jQuery Migrate 3.0 插件或许也可以修复它。期待很快发布吧。</p>
<h4 id="主要变化"><a href="#主要变化" class="headerlink" title="主要变化"></a>主要变化</h4><p>下面是这次的新版本中重要的新功能中的亮点，改进以及 bug 修复，你可以在 <a href="http://jquery.com/upgrade-guide/3.0/" target="_blank" rel="external">3.0 升级指南</a> 中找到更多的细节。你可以在我们的 <a href="https://github.com/jquery/jquery/issues?q=is%3Aissue+milestone%3A3.0.0" target="_blank" rel="external">GitHub bug tracker</a> 中获取完整的 bug 修复列表。如果你阅读过 3.0.0-rc1 的博文，你会发现下面的特性和那篇文章中是一样的。</p>
<h5 id="jQuery-Deferred-现在和-Promises-A-规范兼容"><a href="#jQuery-Deferred-现在和-Promises-A-规范兼容" class="headerlink" title="jQuery.Deferred 现在和 Promises/A+ 规范兼容"></a>jQuery.Deferred 现在和 Promises/A+ 规范兼容</h5><p>为了兼容 Promises/A+ 和 ES2015 Promises，jQuery.Deferred 对象已经更新了。<a href="https://github.com/promises-aplus/promises-tests" target="_blank" rel="external">Promises/A+ Compliance Test Suite</a> 已经检验通过了。这意味着我们需要对 .then() 方法做出一些重大改变。你可以通过使用现在不赞成使用的 .pipe() 方法来替换所有的 .then() 方法来恢复成传统的行为。</p>
<p>1、 在 .then() 方法中抛出一个错误现在变成了一个 rejection values。在以前，错误会向上冒泡传递，并终止执行回调函数。deferreds 依赖于所有的 defered 的解决状态，如果其中抛出一个错误，resolve 将不会发生。</p>
<p>例如：未捕获的异常 对比 rejection values</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> deferred = jQuery.Deferred();</div><div class="line">deferred.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"first callback"</span>);</div><div class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"error in callback"</span>);</div><div class="line">&#125;)</div><div class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"second callback"</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"rejection callback"</span>, err <span class="keyword">instanceof</span> <span class="built_in">Error</span>);</div><div class="line">&#125;);</div><div class="line">deferred.resolve();</div></pre></td></tr></table></figure>
<p>在以前，“first callback” 会被打印，并抛出一个错误。然后结束执行。紧挨着的  “second callback” 和 “rejection callback”  不会被打印出来。现在，符合标准的行为是  “rejection callback” 能够正确的被打印，正如你所看到的那样。err 是第一个回调函数中的 rejection values。</p>
<p>2、 现在可以通过 .then() 方法的回调来控制一个 Deferred 的解决状态，除了 rejection values 和 non-thenable 之外的返回值都会变为 fulfillment values。以前，从 rejection 处理程序中的返回值作为了 rejection values。</p>
<p>Example: returns from rejection callbacks</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> deferred = jQuery.Deferred();</div><div class="line">deferred.then(<span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"rejection callback 1"</span>, value);</div><div class="line">  <span class="keyword">return</span> <span class="string">"value2"</span>;</div><div class="line">&#125;)</div><div class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"success callback 2"</span>, value);</div><div class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"exception value"</span>);</div><div class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"rejection callback 2"</span>, value);</div><div class="line">&#125;)</div><div class="line">.then(<span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"rejection callback 3"</span>, value);</div><div class="line">&#125;);</div><div class="line">deferred.reject(<span class="string">"value1"</span>);</div><div class="line"><span class="string">`</span></div></pre></td></tr></table></figure>
<p>以前，这将打印 “rejection callback 1 value1”, “rejection callback 2 value2”, 和 “rejection callback 3 undefined”.</p>
<p>现在，符合标准的行为是，这将打印 “rejection callback 1 value1”, “success callback 2 value2″, 和 “rejection callback 3 [object Error]”.</p>
<p>3、 如果一个 Deferred 已经 resolved 之后，回调函数总是异步调用的。在以前，这些回调函数将会在绑定的时候同步执行。</p>
<p>Example: async vs sync</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var <span class="keyword">deferred</span> = jQuery.<span class="keyword">Deferred</span>();</div><div class="line"><span class="keyword">deferred</span>.resolve();</div><div class="line"><span class="keyword">deferred</span>.<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span> &#123;</div><div class="line">  console.<span class="built_in">log</span>(<span class="string">"success callback"</span>);</div><div class="line">&#125;);</div><div class="line">console.<span class="built_in">log</span>(<span class="string">"after binding"</span>);</div></pre></td></tr></table></figure>
<p>在以前，这段代码会先打印 “success callback” 然后打印 “after binding”。现在，它的结果是先打印 “after binding” 然后打印 “success callback”。</p>
<p>重要：当捕获异常时有利于在浏览器中进行调试，通过拒绝回调函数来处理异常非常具有陈述性。当与promises打交道时，记住至少要增加一个拒绝回调函数。否则，任何错误都不会提示。</p>
<p>我们写了一个插件用来调试 Deferreds 的 Promises/A+ 兼容性。如果在控制台无法看到错误的详细信息和来源，可查阅这里 <a href="https://github.com/dmethvin/jquery-deferred-reporter" target="_blank" rel="external">jQuery Deferred Reporter Plugin</a>.</p>
<p><code>jQuery.when</code> 升级后可以接受所有thenable 对象，包括原生的 Promise 对象。</p>
<p><a href="https://github.com/jquery/jquery/issues/1722" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1722</a><br><a href="https://github.com/jquery/jquery/issues/2102" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2102</a></p>
<h5 id="为-Deferreds-添加-catch"><a href="#为-Deferreds-添加-catch" class="headerlink" title="为 Deferreds 添加 .catch()"></a>为 Deferreds 添加 .catch()</h5><p><code>catch()</code> 方法在promise 对象中的别名是 <code>.then(null, fn)</code>。</p>
<p><a href="https://github.com/jquery/jquery/issues/2102" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2102</a></p>
<h5 id="错误情况不静默失败"><a href="#错误情况不静默失败" class="headerlink" title="错误情况不静默失败"></a>错误情况不静默失败</h5><p>也许在夜深人静的时候，你突然会想 “window 的 offset 是多少？”，然后你意识到这是一个疯狂的问题 ——  window 哪来的 offset？</p>
<p>在过去，jQuery 也尝试过去返回某些东西而不是抛出异常。在这个 window 的 offset 问题的例子里，直到现在，答案一直是 <code>{ top: 0, left: 0 }</code>，在 jQuery 3.0 中，这种情况下，如此疯狂的问题会抛出错误而不是被默默的忽略了。请在这个版本里试试看，那些依赖于 jQuery 的代码是否因为非法输入而抛出错误。</p>
<p><a href="https://github.com/jquery/jquery/issues/1784" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1784</a></p>
<h5 id="删除弃用的事件别名"><a href="#删除弃用的事件别名" class="headerlink" title="删除弃用的事件别名"></a>删除弃用的事件别名</h5><p><code>.load</code>, <code>.unload</code>, 和 <code>.error</code>, 在 jQuery 1.8 后被废弃，使用 <code>.on()</code> 来注册监听器。</p>
<p><a href="https://github.com/jquery/jquery/issues/2286" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2286</a></p>
<h5 id="动画现在使用-requestAnimationFrame"><a href="#动画现在使用-requestAnimationFrame" class="headerlink" title="动画现在使用 requestAnimationFrame"></a>动画现在使用 <code>requestAnimationFrame</code></h5><p>在支持 <code>requestAnimationFrame</code> API 的平台上，除 IE9 和 Android 4.4 外，几乎被广泛支持。jQuery 现在也将使用这个 API 来处理动画。这将让动画更加顺滑、更少的 cpu 消耗，在移动端也将更省电。</p>
<p>jQuery在几年前曾尝试使用 <code>requestAnimationFrame</code>。但现存代码有有几个 <a href="http://blog.jquery.com/2011/09/01/jquery-1-6-3-released/" target="_blank" rel="external">严重的兼容性问题</a> 不得不推迟。我们认为通过在浏览器选显卡显示的时候暂定动画处理好了大部分问题，但是，所有依赖动画的代码想要实时执行是不切合实际的。</p>
<h5 id="jQuery自定义选择器的大提速"><a href="#jQuery自定义选择器的大提速" class="headerlink" title="jQuery自定义选择器的大提速"></a>jQuery自定义选择器的大提速</h5><p>感谢来自谷歌的 Paul Irish 的检测工作，我们发现当 <code>:visible</code> 这种的自定义选择器在同一份文件中被多次执行时，大量额外的运算可以省略跳过。现在这一类的运算速度提升了 17 倍！</p>
<p>要记住的是，尽管有了这些改进，但像 <code>:visible</code> 和 <code>:hidden</code> 这类选择器耗时代价还是很高的，因为依赖浏览器上的元素是否已经展示出来。在最坏的情况下，这可能需要在完全重算 CSS 样式和页面布局后才能执行。大部分情况我们不能阻止你去使用它，但我们建议你可以测试一下你的页面，看看这些选择器是否造成了性能问题。</p>
<p>这些改动其实在1.12/2.2就已经完成了，但是我们还是想在jQuery 3.0里重申一次。</p>
<p><a href="https://github.com/jquery/jquery/issues/2042" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2042</a></p>
<p>如上面提到的，<a href="http://jquery.com/upgrade-guide/3.0/" target="_blank" rel="external">升级指南</a> 已为各位备好，除了有助于升级，还列出了更多显著的变化。</p>
<blockquote>
<p>本文根据 <a href="http://blog.jquery.com/author/timmywil/" target="_blank" rel="external">Timmy Willison</a> 的《jQuery 3.0 Final Released!》所译，整个译文带有自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明英文出处：<a href="http://blog.jquery.com/2016/06/09/jquery-3-0-final-released/" target="_blank" rel="external">http://blog.jquery.com/2016/06/09/jquery-3-0-final-released/</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;jQuery 3.0 现在发布啦！这个版本从 2014 年 10 月就已经在开始开发了。我们的目标是创建一个更轻量、更快的 jQuery（带有向后兼容的思想）。我们删除了所有的兼容旧版本 IE 浏览器的解决办法，并在一些有意义的地方利用了一些较为现代的 web APIs。它是 2.x 分支的延续，但是包含了少量我们认为早该出现的改变。在一段时间内， 1.12 和 2.2 分支仍将继续获得关键性的支持补丁，但是它们不会得到任何新功能或是重大修订。jQuery 3.0 就是 jQuery 的未来。如果你需要支持 IE6-8，你可以继续使用最新的 1.12 版。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="译文" scheme="http://blog.sqrtthree.com/tags/%E8%AF%91%E6%96%87/"/>
    
      <category term="jQuery3.0" scheme="http://blog.sqrtthree.com/tags/jQuery3-0/"/>
    
  </entry>
  
  <entry>
    <title>前端开发书籍推荐目录</title>
    <link href="http://blog.sqrtthree.com/2016/04/26/book-recommendations/"/>
    <id>http://blog.sqrtthree.com/2016/04/26/book-recommendations/</id>
    <published>2016-04-26T14:47:07.000Z</published>
    <updated>2016-04-26T14:47:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>前几天有朋友说他们公司要做一个培训计划，让我给推荐几本关于前端方面的书籍，拖延了四五天之后，终于还是耐着性子把它写完了，这里也一并发出来，希望能够给那些在自学道路上艰难前行的人带来一点光亮和温暖。</p>
<a id="more"></a>
<p>以下是正文部分。</p>
<p>关于前端开发方面的书籍，我也看过那么几本，就简单的聊一下我看过的这些吧.</p>
<h3 id="1、Head-First-HTML与CSS"><a href="#1、Head-First-HTML与CSS" class="headerlink" title="1、Head First HTML与CSS"></a><a href="https://book.douban.com/subject/25752357/" target="_blank" rel="external">1、Head First HTML与CSS</a></h3><p>这本书最大的优点就是除了基础还是基础，非常适合完全不知道前端开发是什么的门外汉作为第一本入门书籍来学习， 整本书采用插画和故事场景的形式叙述，和那些枯燥、深奥的HTML书籍完全不同，秉持了 <code>Head First</code> 系列一贯通俗易懂的风格。你看这本书的时候会发现就像是在看漫画书一样轻松。是我看过对初学者最友好的书，没有之一。</p>
<h3 id="2、CSS-权威指南"><a href="#2、CSS-权威指南" class="headerlink" title="2、CSS 权威指南"></a><a href="https://book.douban.com/subject/2308234/" target="_blank" rel="external">2、CSS 权威指南</a></h3><p>在看了第一本书后，想必你已经对 HTML 和 CSS 的基础知识有了一定的了解，甚至你已经能够做出一些简单的网站了。但是你可能只是知道一些常见的 CSS 属性，毕竟上一本书只是讲解一些基础知识。所以如果你想要全面的、深入的了解 CSS ，那么权威指南系列是你的不二选择。</p>
<p>这是一本非常经典的 CSS 参考书，它的经典之处在于，它用普通人类可以理解的语言系统、全面地讲解了 CSS 规范。这本书会告诉你，CSS 是什么、CSS 有什么、CSS 可以做什么。</p>
<p>这本书就像是 CSS 里面的圣经一样，以神一般的地位存在。当然了，你不要被它的厚度给吓到，其实你在看这本书的时候完全不需要非要每一页都非常详细的看一遍，你只需要粗略的翻一下，了解一下内容，然后大部分情况下把它当做字典来使用。用一个知识点学一个知识点就好了。</p>
<h3 id="3、精通-CSS"><a href="#3、精通-CSS" class="headerlink" title="3、精通 CSS"></a><a href="https://book.douban.com/subject/4736167/" target="_blank" rel="external">3、精通 CSS</a></h3><p>这同样是一本非常经典的 CSS 图书，它侧重于实践，告诉你如何正确地使用 CSS。</p>
<p>这本书将最有用的 CSS 技术汇总在一起，还总结了 CSS 设计中的极具实践，讨论了解决各种实际问题的技术，填补了一直以来 CSS 图书的空白。</p>
<p>作者多年来一直在编写、设计和宣传基于标准的网页设计，我们现在有幸在本书中看到他以简洁清晰的方式讲授最重要的 CSS 技术。本书提供了一套网页设计人员不可或缺的解决方案、技巧和经验。</p>
<h3 id="4、CSS-Secrets"><a href="#4、CSS-Secrets" class="headerlink" title="4、CSS Secrets"></a><a href="https://book.douban.com/subject/26745943/" target="_blank" rel="external">4、CSS Secrets</a></h3><p>大家可能注意到了，这两本都出版于 2006 年。而今年已经是 2016 年了。如果你的书架只能放得下三本 CSS 书，除了上面的那两本之外，我向你强力推荐的一定是这一本。</p>
<p>这本书的准确出版时间为2016年04月底，也就是说截止目前为止，这本书都还没有出版，那么我为什么要向大家推荐一部还没有出版的书籍呢？github 上有试读篇，感兴趣可以先看看，不管你是什么感受，反正我看完就跪着去下单了。</p>
<p>对于中级的 CSS 开发者来说，这本书可以发挥最大的功效——它可以帮助你进阶。相信很多开发者在学习 CSS 到了一定阶段的时候，感觉自己好像什么都会了，但遇到复杂问题时往往又感觉捉襟见肘、力不从心。这就是遇到瓶颈了。如何突破瓶颈、进入下一个阶段？要做的无非是两件事——实践和思考。书并不能代替你思考，但一本好书可以向你示范，什么样的思考方式是正确的。</p>
<h3 id="5、图解-CSS3-（核心技术与案例实战）"><a href="#5、图解-CSS3-（核心技术与案例实战）" class="headerlink" title="5、图解 CSS3 （核心技术与案例实战）"></a><a href="https://book.douban.com/subject/25920727/" target="_blank" rel="external">5、图解 CSS3 （核心技术与案例实战）</a></h3><p>这本书是手淘的大漠写的，大漠作为 W3cplus 创始人，一直专注对 CSS 方面尤其是 CSS3 的研究，是国内最早研究和使用CSS3技术的一批人。这本书算是他的呕心力作，在书中有趣且易懂的来描述了 CSS3 的每一个特性。不仅内容极为全面、详实，而且富含大量的案例，实用性非常强，如果你对 CSS3 非常感兴趣，那你就有福了。</p>
<h3 id="6、Effective-Javascript-编写高质量-Javascript-代码的-68-个有效方法"><a href="#6、Effective-Javascript-编写高质量-Javascript-代码的-68-个有效方法" class="headerlink" title="6、Effective Javascript 编写高质量 Javascript 代码的 68 个有效方法"></a><a href="https://book.douban.com/subject/25786138/" target="_blank" rel="external">6、Effective Javascript 编写高质量 Javascript 代码的 68 个有效方法</a></h3><p>Effective 系列丛书经典著作，亚马逊五星级畅销书。就冲着这样的地位也值得入手。作者凭借多年标准化委员会工作和实践经验，深刻辨析JavaScript 的内部运作机制、特性、陷阱和编程最佳实践，将它们高度浓缩为极具实践指导意义的 68 条精华建议。内容很接地气，实用性很强，我表示看过之后受益颇深。无论你是刚学习 JS 的入门者，还是有着几年经验的开发者，这本书都值得你一看。</p>
<h3 id="7、编写可维护的JavaScript"><a href="#7、编写可维护的JavaScript" class="headerlink" title="7、编写可维护的JavaScript"></a><a href="https://book.douban.com/subject/21792530/" target="_blank" rel="external">7、编写可维护的JavaScript</a></h3><p>这是一本构建编码风格手册，帮助你和你的团队从“游击队”走向“正规军”的书籍。书中向开发人员阐述了如何在团队开发中编写具备高可维护性的JavaScript代码。覆盖了编码风格、编程技巧、自动化、测试等几方面。无论你是前端开发者还是团队 leader，无论你是刚入门的初学者还是有经验的开发者，都建议你阅读一下这一本书。</p>
<h3 id="8、Javascript-高级程序设计"><a href="#8、Javascript-高级程序设计" class="headerlink" title="8、Javascript 高级程序设计"></a><a href="https://book.douban.com/subject/10546125/" target="_blank" rel="external">8、Javascript 高级程序设计</a></h3><p>JavaScript 超级畅销书，技术经典名著。本书在详细讲解了JavaScript语言的核心之后，条分缕析地为读者展示了现有规范及实现为开发Web应用提供的各种支持和特性，全面深入、贴近实战的特点非常适合有一定编程经验但是想要进阶的开发者来学习。</p>
<h3 id="9、Javascript-语言精粹"><a href="#9、Javascript-语言精粹" class="headerlink" title="9、Javascript 语言精粹"></a><a href="https://book.douban.com/subject/11874748/" target="_blank" rel="external">9、Javascript 语言精粹</a></h3><p>众所周知，Javascript 之父只用 10 天时间就把 Javascript 设计出来了。由于设计时间太短，语言的一些细节考虑得不够严谨。这个曾是“世界上最被误解的语言”，担负了太多的特性，包括糟糕的交互和失败的设计，但是现在，JavaScript 俨然从 “最受误解的编程语言” 演变为了 “最流行的语言”，这说明 Javascript 有其自身独特的魅力。本书剥开了 JavaScript 沾污的外衣，抽离出一个具有更好可靠性、可读性和可维护性的JavaScript 子集，让你看到一门优雅的、轻量级的和非常富有表现力的语言。说其是每一个 Javascript 开发者都必备的一本书一点也不为过。</p>
<h3 id="10、Javascript-权威指南"><a href="#10、Javascript-权威指南" class="headerlink" title="10、Javascript 权威指南"></a><a href="https://book.douban.com/subject/1232061/" target="_blank" rel="external">10、Javascript 权威指南</a></h3><p>权威指南系列想必已经不用多说了，各个都很经典，值得入手。这本书详细的讲解了 Javascript 中的各种语法和语言核心设计，覆盖了 JS 的核心 API、遗留的客户端API和W3C标准DOM API，记述了这些API中的每一个JavaScript对象、方法、性质、构造函数、常量和事件处理程序。不过由于其内容量过于庞大，建议平时作为字典使用即可。</p>
<p>如果你的书架只能放得下三本 JS 书， 那么这三本已经凑齐了，我强烈推荐『Javascript 语言精粹』、『Javascript 高级程序设计』和这一本『Javascript 权威指南』。</p>
<h3 id="11、Javascript-设计模式"><a href="#11、Javascript-设计模式" class="headerlink" title="11、Javascript 设计模式"></a><a href="https://book.douban.com/subject/24744217/" target="_blank" rel="external">11、Javascript 设计模式</a></h3><p>这本也算是 O’REILLY 系列中的一个非常好的书籍，实际上 O’REILLY 系列基本上都没有差的。书中集中介绍了很多流行的设计模式在JavaScript中的应用以及实现方式。作为高级前端开发工程师学习设计模式的一本进阶书籍非常合适。</p>
<h3 id="12、Javascript-设计模式与开发实践"><a href="#12、Javascript-设计模式与开发实践" class="headerlink" title="12、Javascript 设计模式与开发实践"></a><a href="https://book.douban.com/subject/26382780/" target="_blank" rel="external">12、Javascript 设计模式与开发实践</a></h3><p>这本书是由国内知名前端团队腾讯 AlloyTeam 成员编写的，设计模式自古乃程序员高谈论阔之话题，许多程序员从设计模式中学到了设计软件的灵感，或者是问题的解决方案。但是有些人却认为设计模式只适合静态语言，Javascript 这种动态语言根本就没有设计模式一说。显然，本书给了你最好的答案。</p>
<p>该书全面涵盖了 JavaScript 的 16 个常用的设计模式、设计原则、编程技巧和代码重构，由浅入深的详细介绍了面向对象的设计原则以及在设计模式中的体现。让你能够将经典的设计模式应用到 JS 中，实乃高级程序设计必读之佳作。</p>
<h3 id="13、jQuery-技术内幕"><a href="#13、jQuery-技术内幕" class="headerlink" title="13、jQuery 技术内幕"></a><a href="https://book.douban.com/subject/25823709/" target="_blank" rel="external">13、jQuery 技术内幕</a></h3><p>阿里巴巴资深前端开发工程师墨智的大作，没出版之前我就一直在关注，渴望能偶早早看到。</p>
<p>jQuery 作为全球使用量最大的 JS 库，它的优秀想必我也不需要说了，如果你使用了多年的 jQuery，但一直不敢去了解它的源码实现方式，或者你觉得你的 JS 技能进入了瓶颈期，那这本书对你来说就如同雪中送炭一样。</p>
<p>本书首先通过“总体架构”梳理了各个模块的分类、功能和依赖关系，让大家对 jQuery 的工作原理有大致的印象；然后按照源码几乎逐行分析了其中各个模块的源码实现，分析的详细程度简直“令人发指”。不过这本书是基于 1.x 的版本进行分析的，阅读的时候略微注意即可，实际上即使是 1.x 版本的 jQuery，也非常值得我们学习。</p>
<h3 id="14、数据结构与算法-Javascript-描述"><a href="#14、数据结构与算法-Javascript-描述" class="headerlink" title="14、数据结构与算法 Javascript 描述"></a><a href="https://book.douban.com/subject/25945449/" target="_blank" rel="external">14、数据结构与算法 Javascript 描述</a></h3><p>这本书覆盖了常用的基本数据结构，如果你对数据结构很感兴趣，算是一本不错的入门书籍吧，推荐指数三颗星。但是本书中也有一些错误出现，建议看中文版的同时对照英文勘误表进行阅读和学习。</p>
<h3 id="15、React-引领未来的用户界面开发框架"><a href="#15、React-引领未来的用户界面开发框架" class="headerlink" title="15、React 引领未来的用户界面开发框架"></a><a href="https://book.douban.com/subject/26378583/" target="_blank" rel="external">15、React 引领未来的用户界面开发框架</a></h3><p>2014 年横空出世的由 Facebook 推出的开源框架 React.js，基于 Virtual DOM 重新定义了用户界面的开发方式，彻底革新了大家对前端框架的认识。在这个火热朝天的年代，如果你连 React 都还没听说过，那还是赶紧洗洗睡吧。如果你听说过但是没有使用过，或者是想要学习 React 但是该不知如何下手，再或者是看不懂那些晦涩难懂的英文文档，那么这本书就很适合你了。这本书介绍了 React 的一些基础知识，比较适合入门，但是前端开发的世界变化的这么快，估计这本书的生命周期也没几年吧。</p>
<h3 id="16、HTML5-游戏开发进阶指南"><a href="#16、HTML5-游戏开发进阶指南" class="headerlink" title="16、HTML5 游戏开发进阶指南"></a><a href="https://book.douban.com/subject/25710762/" target="_blank" rel="external">16、HTML5 游戏开发进阶指南</a></h3><p>这本书介绍了 HTML5 游戏开发的一般过程和技巧，如果你对 HTML5 游戏开发很感兴趣，可以看一下。并且书中也有很多的案例，作为一个学习游戏开发的入门书籍还是可以的。</p>
<h3 id="17、深入浅出-Nodejs"><a href="#17、深入浅出-Nodejs" class="headerlink" title="17、深入浅出 Nodejs"></a><a href="https://book.douban.com/subject/25768396/" target="_blank" rel="external">17、深入浅出 Nodejs</a></h3><p>开发者的大事，大快所有人心的大好事。</p>
<p>出自国内阿里大神朴灵的大作，国内最好的 Nodejs 书籍，没有之一。同时也是第一本深度讲解 Node 的图书。本书从不同的视角介绍了 Node 内在的特点和结构。非常适合想要深入了解学习 Nodejs 的高级开发者来学习。实际上，不管是否学习过 Node，只要你热爱技术，都推荐你阅读它。</p>
<h3 id="18、HTTP-权威指南"><a href="#18、HTTP-权威指南" class="headerlink" title="18、HTTP 权威指南"></a><a href="https://book.douban.com/subject/10746113/" target="_blank" rel="external">18、HTTP 权威指南</a></h3><p>谁说做前端开发不需要了解 http 相关知识？高级前端开发者永远不会仅仅满足于了解 ajax 是怎么回事之后就止步不前，如果你想要学习 http 和通信协议相关的知识，那就不要再犹豫了，一定是这本书了。</p>
<p>书中尝试着将HTTP中一些互相关联且常被误解的规则梳理清楚，并编写了一系列基于各种主题的章节，对HTTP各方面的特性进行了介绍。书中对HTTP“为什么”这样做进行了详细的解释，而不仅仅停留在它是“怎么做”的。非常适合作为高级开发者进阶学习之资料。</p>
<h3 id="19、黑客与画家"><a href="#19、黑客与画家" class="headerlink" title="19、黑客与画家"></a><a href="https://book.douban.com/subject/6021440/" target="_blank" rel="external">19、黑客与画家</a></h3><p>这本书就比较特殊了，这本是硅谷创业之父Paul Graham 的文集，注意，是文集，而不是像上面那些那样是技术书籍。</p>
<p>这本书主要介绍黑客的爱好和动机，讨论黑客成长、黑客对世界的贡献以及编程语言和黑客工作方法等所有对计算机时代感兴趣的人的一些话题。书中的内容不但有助于了解计算机编程的本质、互联网行业的规则，还会帮助读者了解我们这个时代，迫使读者独立思考。</p>
<p>简单的来说，这是一本谈论编程哲学的书籍，而不是针对某种语言进行解释的技术书籍。</p>
<p>本书适合所有的程序员和互联网工作者，以及一切对计算机感兴趣的人阅读。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前几天有朋友说他们公司要做一个培训计划，让我给推荐几本关于前端方面的书籍，拖延了四五天之后，终于还是耐着性子把它写完了，这里也一并发出来，希望能够给那些在自学道路上艰难前行的人带来一点光亮和温暖。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="资源" scheme="http://blog.sqrtthree.com/tags/%E8%B5%84%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>在 Chrome 开发者工具中调试 node.js</title>
    <link href="http://blog.sqrtthree.com/2016/02/29/debugging-nodejs-in-chrome-devtools/"/>
    <id>http://blog.sqrtthree.com/2016/02/29/debugging-nodejs-in-chrome-devtools/</id>
    <published>2016-02-29T11:52:37.000Z</published>
    <updated>2016-02-29T11:52:37.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<ul>
<li>原文链接 : <a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools" target="_blank" rel="external">Debugging Node.js in Chrome DevTools</a></li>
<li>原文作者 : <a href="http://mattdesl.svbtle.com/" target="_blank" rel="external">MATT DESLAURIERS</a></li>
<li>译文出自 : <a href="https://github.com/xitu/gold-miner" target="_blank" rel="external">掘金翻译计划</a></li>
<li>译者 : <a href="https://github.com/sqrthree" target="_blank" rel="external">sqrthree (根号三)</a></li>
<li>校对者: <a href="https://github.com/shenxn" target="_blank" rel="external">shenxn</a>、<a href="https://github.com/CoderBOBO" target="_blank" rel="external">CoderBOBO</a></li>
</ul>
</blockquote>
<p>这篇文章介绍了一种在 Chrome 开发者工具里面开发、调试和分析 Node.js 应用程序的新方法。</p>
<a id="more"></a>
<h2 id="devtool"><a href="#devtool" class="headerlink" title=" devtool"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#devtool" target="_blank" rel="external"> </a>devtool</h2><p>最近我一直在开发一个命令行工具 <a href="https://github.com/Jam3/devtool" target="_blank" rel="external">devtool</a>，它可以在 Chrome 的开发者工具中运行 Node.js 程序。</p>
<p>下面的记录显示了在一个 HTTP 服务器中设置断点的情况。</p>
<p><img src="http://i.imgur.com/V4RQSZ2.gif" alt="movie"></p>
<p>该工具基于 <a href="https://github.com/atom/electron/" target="_blank" rel="external">Electron</a> 将 Node.js 和 Chromium 的功能融合在了一起。它的目的在于为调试、分析和开发 Node.js 应用程序提供一个简单的界面。</p>
<p>你可以使用 <a href="http://npmjs.com/" target="_blank" rel="external">npm</a> 来安装它:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> -g devtool</div></pre></td></tr></table></figure>
<h2 id="REPL"><a href="#REPL" class="headerlink" title=" REPL"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#repl" target="_blank" rel="external"> </a>REPL</h2><p>在某种程度上，我们可以用它来作为 <code>node</code> shell 命令的替代品。例如，我们可以这样打开一个 REPL (译者注: REPL 全称为”Read-Eval-Print Loop”，是一个简单的、交互式的编程环境)。</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">devtool</span></div></pre></td></tr></table></figure>
<p>这将启动一个带有 Node.js 特性支持的 Chrome 开发者工具实例。</p>
<p><img src="http://i.imgur.com/bnInBHA.png" alt="console"></p>
<p>我们可以引用 Node 模块、本地 npm 模块和像 <code>process.cwd()</code> 这样的内置模块。也可以获取像 <code>copy()</code> 和 <code>table()</code> 这样的 Chrome 开发者工具中的函数。</p>
<p>其他的例子就一目了然了:</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># run a Node script</span></div><div class="line">devtool app.<span class="keyword">js</span></div><div class="line"></div><div class="line"><span class="comment"># pipe in content to process.stdin</span></div><div class="line">devtool &lt; audio.mp3</div><div class="line"></div><div class="line"><span class="comment"># pipe in JavaScript to eval it</span></div><div class="line"><span class="keyword">browserify </span>index.<span class="keyword">js </span><span class="title">| devtool</span></div></pre></td></tr></table></figure>
<h1 id="run-a-Node-script"><a href="#run-a-Node-script" class="headerlink" title="run a Node script"></a>run a Node script</h1><h2 id="开发"><a href="#开发" class="headerlink" title="  开发"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#development" target="_blank" rel="external"> </a> 开发</h2><p>我们可以在通用模块和应用程序的开发中使用 <code>devtool</code>，来代替像 <a href="https://www.npmjs.com/package/nodemon" target="_blank" rel="external">nodemon</a> 这样目前已经存在的工具。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devtool app<span class="selector-class">.js</span> --watch</div></pre></td></tr></table></figure>
<p>这行命令将会在 Chrome 开发者工具中的控制台中启动我们的 <code>app.js</code>， 通过 <code>--watch</code> 参数，我们保存的文件将(自动)重新载入到控制台。</p>
<p><img src="http://i.imgur.com/NuoYkJK.png" alt="console"></p>
<p>点击 <a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools" target="_blank" rel="external"><code>app.js:1</code></a> 链接，程序将会在 <code>Sources</code> 标签中把我们带到与之相关的那一行。</p>
<p><img src="http://i.imgur.com/mH5jWT9.png" alt="line"></p>
<p>在 <code>Sources</code> 标签中，你也可以敲击 <code>Cmd/Ctrl + P</code> 按键在所有依赖的模块中进行快速搜索。你甚至可以审查和调试内置模块，比如 Node.js 中的那些。你也可以使用左手边的面板来浏览模块。</p>
<p><img src="http://i.imgur.com/jn3RmnV.png" alt="Sources"></p>
<h2 id="调试"><a href="#调试" class="headerlink" title="  调试"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#debugging" target="_blank" rel="external"> </a> 调试</h2><p>因为我们能够访问 <code>Sources</code> 标签，所以我们可以用它来调试我们的应用程序。你可以设置一个断点，然后重新加载调试器(<code>Cmd/Ctrl + R</code>)，或者你也可以通过 <code>--break</code> 标记来设置一个初始断点。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devtool app.js --<span class="keyword">break</span></div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/hJ2pLW1.png" alt="break"></p>
<p>下面是一些对于那些学习 Chrome 开发者工具的人来说可能不是特别常用的功能:</p>
<ul>
<li><a href="http://blittle.github.io/chrome-dev-tools/sources/conditional-breakpoints.html" target="_blank" rel="external">条件断点</a></li>
<li><a href="http://blittle.github.io/chrome-dev-tools/sources/uncaught-exceptions.html" target="_blank" rel="external">有未捕获的异常时暂停</a></li>
<li><a href="http://blittle.github.io/chrome-dev-tools/sources/restart-frame.html" target="_blank" rel="external">重启帧</a></li>
<li><a href="http://albertlee.azurewebsites.net/using-watch-tools-in-chrome-dev-tools-to-improve-your-debugging/" target="_blank" rel="external">监听表达式</a></li>
</ul>
<blockquote>
<p>提示 - 当调试器暂停时，你可以敲击 <code>Escape</code> 按键打开一个执行在当前作用域内的控制台。你可以修改一些变量然后继续执行。</p>
</blockquote>
<p><img src="http://i.imgur.com/nG9ellE.gif" alt="Imgur"></p>
<h2 id="分析"><a href="#分析" class="headerlink" title="  分析"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#profiling" target="_blank" rel="external"> </a> 分析</h2><p><code>devtool</code> 的另一个功能是分析像 <a href="https://github.com/substack/node-browserify" target="_blank" rel="external">browserify</a>, <a href="https://github.com/gulpjs/gulp" target="_blank" rel="external">gulp</a> 和 <a href="https://github.com/babel/babel" target="_blank" rel="external">babel</a> 这样的程序。</p>
<p>这里我们使用 <a href="https://developer.chrome.com/devtools/docs/console-api" target="_blank" rel="external"><code>console.profile()</code></a> (Chrome 的一个功能)来分析一个打包工具的 CPU 使用情况。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> browserify = <span class="built_in">require</span>(<span class="string">'browserify'</span>);</div><div class="line"></div><div class="line"><span class="comment">// Start DevTools profiling...</span></div><div class="line"><span class="built_in">console</span>.profile(<span class="string">'build'</span>);</div><div class="line"></div><div class="line"><span class="comment">// Bundle some browser application</span></div><div class="line">browserify(<span class="string">'client.js'</span>).bundle(<span class="function"><span class="keyword">function</span> (<span class="params">err, src</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line"></div><div class="line">    <span class="comment">// Finish DevTools profiling...</span></div><div class="line">    <span class="built_in">console</span>.profileEnd(<span class="string">'build'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>现在我们在这个文件上运行 <code>devtool</code> :</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">devtool</span> <span class="selector-tag">app</span><span class="selector-class">.js</span></div></pre></td></tr></table></figure>
<p>执行之后，我们可以在 <code>Profiles</code> 标签中看到结果。</p>
<p><img src="http://i.imgur.com/vSu7Lcz.png" alt="profile"></p>
<p>我们可以使用右边的链接来查看和调试执行频率较高的代码路径。</p>
<p><img src="http://i.imgur.com/O4DZHyv.png" alt="debug"></p>
<h2 id="高级选项"><a href="#高级选项" class="headerlink" title="  高级选项"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#advanced-options" target="_blank" rel="external"> </a> 高级选项</h2><h4 id="实验"><a href="#实验" class="headerlink" title="  实验"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#experiments" target="_blank" rel="external"> </a> 实验</h4><p>Chrome 会不断的向他们的开发者工具中推送新功能和实验，例如 <strong>Promise Inspector</strong>。你可以通过点击右上角的三个点，然后选择 <code>Settings -&gt; Experiments</code> 来开启他们。</p>
<p><img src="http://i.imgur.com/dNuIMw0.png" alt="experiments"></p>
<p>一旦启用，你就可以通过敲击 <code>Escape</code> 按键来调出一个带有 <em>Promises</em> 监视器的面板。</p>
<p><img src="https://i.imgur.com/xKkTEeg.png" alt=""></p>
<blockquote>
<p>提示: 在 <em>Experiments</em> 界面，如果你敲击 <code>Shift</code> 键 6 次，你会接触到一些甚至更多的实验性（不稳定）的功能。</p>
</blockquote>
<h4 id="console"><a href="#console" class="headerlink" title=" --console"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#codeconsolecode" target="_blank" rel="external"> </a><code>--console</code></h4><p>你可以重定向控制台输出到终端中(<code>process.stdout</code> 和 <code>process.stderr</code>)。也允许你通过使用管道将它导入到其他进程中，例如 TAP prettifiers。</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devtool test.js --console <span class="string">| tap-spec</span></div></pre></td></tr></table></figure>
<h4 id="和-process-argv"><a href="#和-process-argv" class="headerlink" title=" -- 和 process.argv"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#codecode-and-codeprocessargvcode" target="_blank" rel="external"> </a><code>--</code> 和 <code>process.argv</code></h4><p>你的脚本可以像一个普通的 Node.js 应用那样解析 <code>process.argv</code>。如果你在 <code>devtool</code> 命令中传递一个句号(<code>--</code>)，它后面的所有内容都会被当做一个新的 <code>process.argv</code> 。例如:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devtool script<span class="selector-class">.js</span> --console -- <span class="selector-tag">input</span>.txt</div></pre></td></tr></table></figure>
<p>现在，你的脚本看起来像这样:</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="keyword">file</span> = process.argv[2];</div><div class="line">console.<span class="built_in">log</span>('<span class="keyword">File</span>: %s', <span class="keyword">file</span>);</div></pre></td></tr></table></figure>
<p>输出:</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">File</span>: <span class="keyword">input</span>.txt</div></pre></td></tr></table></figure>
<h4 id="quit-和-headless"><a href="#quit-和-headless" class="headerlink" title=" --quit 和 --headless"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#codequitcode-and-codeheadlesscode" target="_blank" rel="external"> </a><code>--quit</code> 和 <code>--headless</code></h4><p>使用 <code>--quit</code>，当遇到了一个错误(如语法错误或者未捕获的异常)时，进程将会安静的退出，并返回结束码<code>1</code> 。</p>
<p>使用 <code>--headless</code>，开发工具将不会被打开。</p>
<p>这可以用于命令行脚本：</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">devtool</span> <span class="comment">render</span><span class="string">.</span><span class="comment">js</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">quit</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">headless</span> &gt; <span class="comment">result</span><span class="string">.</span><span class="comment">png</span></div></pre></td></tr></table></figure>
<h4 id="browser-field"><a href="#browser-field" class="headerlink" title=" --browser-field"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#codebrowserfieldcode" target="_blank" rel="external"> </a><code>--browser-field</code></h4><p>一些模块为了更好的在浏览器中运行或许会提供一个入口点。当你需要这些模块时，你可以使用 <code>--browser-field</code> 来支持 <a href="https://github.com/defunctzombie/package-browser-field-spec" target="_blank" rel="external">package.json flag</a></p>
<p>例如，我们可以使用 <a href="https://github.com/Jam3/xhr-request" target="_blank" rel="external">xhr-request</a> ，当带有 <code>&quot;browser&quot;</code> 字段被引用时，这个模块会使用 XHR。</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">const request = require('xhr-request')<span class="comment">;</span></div><div class="line"></div><div class="line">request('https<span class="symbol">://api</span>.github.com/users/mattdesl/repos', &#123;</div><div class="line">    json: true</div><div class="line">&#125;, (<span class="name">err</span>, data) =&gt; &#123;</div><div class="line">    if (<span class="name">err</span>) throw err<span class="comment">;</span></div><div class="line"></div><div class="line">    console.log(<span class="name">data</span>)<span class="comment">;</span></div><div class="line">&#125;)<span class="comment">;</span></div></pre></td></tr></table></figure>
<p>在 shell 中执行:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">install</span> xhr-request <span class="comment">--save</span></div><div class="line">devtool app.js <span class="comment">--browser-field</span></div></pre></td></tr></table></figure>
<p>现在，我们可以在 <code>Network</code> 选项卡中审查请求:</p>
<p><img src="http://i.imgur.com/BWciXuh.png" alt="requests"></p>
<h4 id="no-node-timers"><a href="#no-node-timers" class="headerlink" title=" --no-node-timers"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#codenonodetimerscode" target="_blank" rel="external"> </a><code>--no-node-timers</code></h4><p>默认情况下，我们提供全局的 <code>setTimeout</code> and <code>setInterval</code>，因此他们表现的像 Node.js 一样(返回一个带有 <code>unref()</code> and <code>ref()</code> 函数的对象)。</p>
<p>但是，你可以禁用这个方法来改善对异步堆栈跟踪的支持。</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devtool app.js --no-<span class="keyword">node</span><span class="title">-timers</span></div></pre></td></tr></table></figure>
<p><img src="http://i.imgur.com/dmfOfMx.png" alt="async"></p>
<h4 id="V8-Flags"><a href="#V8-Flags" class="headerlink" title=" V8 Flags"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#v8-flags" target="_blank" rel="external"> </a>V8 Flags</h4><p>在当前目录，你可以创建一个 <code>.devtoolrc</code> 文件来进行诸如 V8 flags 这样的高级设置。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"v8"</span>: &#123;</div><div class="line">    <span class="attr">"flags"</span>: [</div><div class="line">      <span class="string">"--harmony-destructuring"</span></div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>访问<a href="https://github.com/Jam3/devtool/blob/master/docs/rc-config.md" target="_blank" rel="external">这里</a>获取更多细节</p>
<h2 id="陷阱"><a href="#陷阱" class="headerlink" title=" 陷阱"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#gotchas" target="_blank" rel="external"> </a>陷阱</h2><p>由于程序是在一个 Browser/Electron 环境中运行，而不是在一个真正的 Node.js 环境中。因此这里有<a href="https://github.com/Jam3/devtool#gotchas" target="_blank" rel="external">一些陷阱</a>你需要注意。</p>
<h2 id="对比"><a href="#对比" class="headerlink" title=" 对比"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#comparisons" target="_blank" rel="external"> </a>对比</h2><p>目前已经存在了一些 Node.js 调试器，所以你或许想知道他们之间的区别在哪。</p>
<h3 id="WebStorm-调试器"><a href="#WebStorm-调试器" class="headerlink" title=" WebStorm 调试器"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#webstorm-debugger" target="_blank" rel="external"> </a>WebStorm 调试器</h3><p><a href="https://www.jetbrains.com/webstorm/" target="_blank" rel="external">WebStorm</a> 编辑器里面包含了一个非常强大的 Node.js 调试器。如果你已经使用 WebStorm 作为你的代码编辑器，那对你来说很棒。</p>
<blockquote>
<p><img src="https://i.imgur.com/cfwG6qY.png" alt=""></p>
</blockquote>
<p>但是，它缺少一些 Chrome 开发者工具中的功能，例如:</p>
<ul>
<li>一个丰富的互动的控制台</li>
<li>异常时暂停</li>
<li>异步堆栈跟踪</li>
<li>Promise 检查</li>
<li>分析</li>
</ul>
<p>但因为你和你的 WebStorm 工作空间集成，所以你可以在调试时修改和编辑你的文件。它也是运行在一个真正的 Node/V8 环境中，而不像 <code>devtool</code> 一样。因此对于大部分的 Node.js 应用程序来说它更稳健。</p>
<h3 id="iron-node"><a href="#iron-node" class="headerlink" title=" iron-node"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#ironnode" target="_blank" rel="external"> </a>iron-node</h3><p><img src="https://i.imgur.com/fkbLvoS.png" alt=""></p>
<p>一个同样基于 Electron 的调试器是<a href="https://github.com/s-a/iron-node" target="_blank" rel="external">iron-node</a>。<code>iron-node</code> 包含了一个内置的命令来重新编译原生插件，还有一个复杂的图形界面显示您的<code>package.json</code> 和 <code>README.md</code>。</p>
<p>而 <code>devtool</code> 更侧重于把命令行、Unix 风格的管道和重定向和 Electron/Browser 的 API 当作有趣的用例。</p>
<p><code>devtool</code> 提供各种各样的功能来表现的更像 Node.js (例如 <code>require.main</code>, <code>setTimeout</code> 和 <code>process.exit</code>)，并且覆盖了内部的 <code>require</code> 机制作为 source maps，还有改进过的错误处理、断点注入、以及 <code>&quot;browser&quot;</code> 字段的解决方案。</p>
<h3 id="node-inspector"><a href="#node-inspector" class="headerlink" title=" node-inspector"></a><a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools#nodeinspector" target="_blank" rel="external"> </a>node-inspector</h3><p><img src="https://i.imgur.com/T4fpxjU.png" alt=""></p>
<p>你或许也喜欢 <a href="https://github.com/node-inspector/node-inspector" target="_blank" rel="external">node-inspector</a>，一个使用远程调试而不是构建在 Electron 之上的工具。</p>
<p>这意味着你的代码将运行在一个真正的 Node 环境中，没有任何 <code>window</code> 或其他的 Browser/Electron API 来污染作用域并导致某些模块出现问题。对于大型 Node.js 应用(即本地插件)来说它有一个强有力的支持，并且在开发者工具实例中拥有更多的控制权(即可以注入断点和支持网络请求)。</p>
<p>然而，由于它重新实现了大量的调试技巧，因此对于开发来说感觉可能比最新版的 Chrome 开发者工具要慢、笨拙和脆弱。它经常会崩溃，往往导致 Node.js 开发人员很无奈。</p>
<p>而 <code>devtool</code> 的目的是让那些从 Chrome 开发者工具中转过来的人觉得比较亲切，而且也增加了像 Browser/Electron APIs 这样的功能。</p>
<blockquote>
<p>本文根据 <a href="http://mattdesl.svbtle.com/" target="_blank" rel="external">MATT DESLAURIERS</a> 的《<a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools" target="_blank" rel="external">Debugging Node.js in Chrome DevTools</a>》所译，整个译文带有自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明英文出处：<a href="http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools" target="_blank" rel="external">Debugging Node.js in Chrome DevTools</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;原文链接 : &lt;a href=&quot;http://mattdesl.svbtle.com/debugging-nodejs-in-chrome-devtools&quot;&gt;Debugging Node.js in Chrome DevTools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;原文作者 : &lt;a href=&quot;http://mattdesl.svbtle.com/&quot;&gt;MATT DESLAURIERS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译文出自 : &lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;掘金翻译计划&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译者 : &lt;a href=&quot;https://github.com/sqrthree&quot;&gt;sqrthree (根号三)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;校对者: &lt;a href=&quot;https://github.com/shenxn&quot;&gt;shenxn&lt;/a&gt;、&lt;a href=&quot;https://github.com/CoderBOBO&quot;&gt;CoderBOBO&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;这篇文章介绍了一种在 Chrome 开发者工具里面开发、调试和分析 Node.js 应用程序的新方法。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="译文" scheme="http://blog.sqrtthree.com/tags/%E8%AF%91%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>GitBook 简明教程</title>
    <link href="http://blog.sqrtthree.com/2016/02/23/gitbook/"/>
    <id>http://blog.sqrtthree.com/2016/02/23/gitbook/</id>
    <published>2016-02-23T22:40:01.000Z</published>
    <updated>2016-02-23T22:40:01.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>Modern book format and toolchain using Git and Markdown</p>
</blockquote>
<p>这是 GitBook 项目主页上对 GitBook 的定义。</p>
<p>GitBook 是一个命令行工具。通过它，你能够使用 Git 和 Markdown 来编排书本。并且通过工具可以自动生成相应的 HTML、PDF 和 epub 格式的文件。</p>
<p>总之，就是好用，好使，加好看。</p>
<a id="more"></a>
<p>刚好近日准备通过 GitBook 来写一些教程，这里就先简明介绍一下它的使用。嗯？我写的什么教程？ 哈哈，就不告诉你，等写好了再说 &lt;(￣▽￣)&gt; 哇哈哈…</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>因为 GitBook 是一个基于 <a href="http://nodejs.org/" target="_blank" rel="external">Node</a> 开发的命令行工具。因此需要您自行配置 <a href="http://nodejs.org/" target="_blank" rel="external">Node</a> 和 <a href="https://www.npmjs.com/package/npm" target="_blank" rel="external">npm</a> 环境。如果你已经安装好这些环境之后，GitBook 的安装只需要一步就能完成！</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g gitbook-<span class="keyword">cli</span></div></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>GitBook 的用法非常简单，老规矩，先看一下我们都有哪些命令可以使用:</p>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">$ gitbook help</div><div class="line"></div><div class="line">  build [book] [output] 	 build a book</div><div class="line">    --format 	 Format <span class="keyword">to</span> build <span class="keyword">to</span> (<span class="keyword">Default</span> <span class="keyword">is</span> website; Values are website, json, ebook)</div><div class="line">    --<span class="built_in">log</span> 	 Minimum <span class="built_in">log</span> level <span class="keyword">to</span> display (<span class="keyword">Default</span> <span class="keyword">is</span> info; Values are debug, info, warn, <span class="keyword">error</span>, disabled)</div><div class="line"></div><div class="line">  pdf [book] [output] 	 build a book <span class="keyword">to</span> pdf</div><div class="line">    --<span class="built_in">log</span> 	 Minimum <span class="built_in">log</span> level <span class="keyword">to</span> display (<span class="keyword">Default</span> <span class="keyword">is</span> info; Values are debug, info, warn, <span class="keyword">error</span>, disabled)</div><div class="line"></div><div class="line">  epub [book] [output] 	 build a book <span class="keyword">to</span> epub</div><div class="line">    --<span class="built_in">log</span> 	 Minimum <span class="built_in">log</span> level <span class="keyword">to</span> display (<span class="keyword">Default</span> <span class="keyword">is</span> info; Values are debug, info, warn, <span class="keyword">error</span>, disabled)</div><div class="line"></div><div class="line">  mobi [book] [output] 	 build a book <span class="keyword">to</span> mobi</div><div class="line">    --<span class="built_in">log</span> 	 Minimum <span class="built_in">log</span> level <span class="keyword">to</span> display (<span class="keyword">Default</span> <span class="keyword">is</span> info; Values are debug, info, warn, <span class="keyword">error</span>, disabled)</div><div class="line"></div><div class="line">  serve [book] 	 Build <span class="keyword">then</span> serve a gitbook from a directory</div><div class="line">    --port 	 Port <span class="keyword">for</span> <span class="built_in">server</span> <span class="keyword">to</span> listen <span class="keyword">on</span> (<span class="keyword">Default</span> <span class="keyword">is</span> <span class="number">4000</span>)</div><div class="line">    --lrport 	 Port <span class="keyword">for</span> livereload <span class="built_in">server</span> <span class="keyword">to</span> listen <span class="keyword">on</span> (<span class="keyword">Default</span> <span class="keyword">is</span> <span class="number">35729</span>)</div><div class="line">    --watch 	 Enable/disable file watcher (<span class="keyword">Default</span> <span class="keyword">is</span> <span class="literal">true</span>)</div><div class="line">    --format 	 Format <span class="keyword">to</span> build <span class="keyword">to</span> (<span class="keyword">Default</span> <span class="keyword">is</span> website; Values are website, json, ebook)</div><div class="line">    --<span class="built_in">log</span> 	 Minimum <span class="built_in">log</span> level <span class="keyword">to</span> display (<span class="keyword">Default</span> <span class="keyword">is</span> info; Values are debug, info, warn, <span class="keyword">error</span>, disabled)</div><div class="line"></div><div class="line">  install [book] 	 install plugins dependencies</div><div class="line"></div><div class="line">  init [directory] 	 create files <span class="keyword">and</span> folders based <span class="keyword">on</span> contents of SUMMARY.md</div></pre></td></tr></table></figure>
<p>实际上我们最常用的命令只有两个:</p>
<ul>
<li><code>gitbook init</code>: 初始化书籍目录</li>
<li><code>gitbook serve</code>: 在编写书籍时启动一个服务器，自动编译&amp;更新内容，并在浏览器中预览</li>
</ul>
<h2 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h2><h4 id="gitbook-init"><a href="#gitbook-init" class="headerlink" title="gitbook init"></a>gitbook init</h4><p>首先，通过终端(PC 下可使用命令提示符)进入到你想要书写内容的目录，然后执行 <code>gitbook init</code> 命令，之后目录中会自动生成 <code>README.md</code> 和 <code>SUMMARY.md</code> 两个文件。</p>
<p>这两个文件在 GitBook 项目中是必须存在的，其中 <code>README.md</code> 是对书籍的简单介绍，<code>SUMMARY.md</code> 是对书籍目录的描述，并且 GitBook 会通过该文件中的目录描述自动生成对应的目录和文件。</p>
<p>其中，<code>SUMMARY.md</code> 文件中内容的格式是这样的:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">* </span>[<span class="string">Chapter1</span>](<span class="link">chapter1/README.md</span>)</div><div class="line">  * [<span class="string">Section1.1</span>](<span class="link">chapter1/section1.1.md</span>)</div><div class="line">  * [<span class="string">Section1.2</span>](<span class="link">chapter1/section1.2.md</span>)</div><div class="line"><span class="bullet">* </span>[<span class="string">Chapter2</span>](<span class="link">chapter2/README.md</span>)</div></pre></td></tr></table></figure>
<p>当你修改了 <code>SUMMARY.md</code> 文件中的内容后，你可以再次使用 <code>gitbook init</code> 来自动生成对应的目录和文件。</p>
<h4 id="Multi-Languages"><a href="#Multi-Languages" class="headerlink" title="Multi-Languages"></a>Multi-Languages</h4><p>如果你要写的书籍是多语言版，你只需要创建一个 <code>LANGS.md</code> 文件，然后编写配置内容即可:</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="bullet">* </span>[<span class="string">English</span>](<span class="link">en/</span>)</div><div class="line"><span class="bullet">* </span>[<span class="string">French</span>](<span class="link">fr/</span>)</div><div class="line"><span class="bullet">* </span>[<span class="string">Español</span>](<span class="link">es/</span>)</div></pre></td></tr></table></figure>
<h4 id="gitbook-serve"><a href="#gitbook-serve" class="headerlink" title="gitbook serve"></a>gitbook serve</h4><p>书籍目录结构创建完成以后，我们就可以使用 <code>gitbook serve</code> 来编译和预览书籍了：</p>
<p><code>gitbook serve</code> 命令实际上会首先调用 <code>gitbook build</code> 编译书籍，完成以后会打开一个 web 服务器，监听在本地的 <code>4000</code> 端口。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ gitbook serve</div><div class="line"></div><div class="line">Live reload server started on port: 35729</div><div class="line">Press CTRL+C to quit ...</div><div class="line"></div><div class="line">info: loading book configuration....OK</div><div class="line">info: <span class="keyword">load</span> <span class="keyword">plugin</span> gitbook-<span class="keyword">plugin</span>-highlight ....OK</div><div class="line">info: <span class="keyword">load</span> <span class="keyword">plugin</span> gitbook-<span class="keyword">plugin</span>-<span class="keyword">search</span> ....OK</div><div class="line">info: <span class="keyword">load</span> <span class="keyword">plugin</span> gitbook-<span class="keyword">plugin</span>-sharing ....OK</div><div class="line">info: <span class="keyword">load</span> <span class="keyword">plugin</span> gitbook-<span class="keyword">plugin</span>-fontsettings ....OK</div><div class="line">info: <span class="keyword">load</span> <span class="keyword">plugin</span> gitbook-<span class="keyword">plugin</span>-livereload ....OK</div><div class="line">info: &gt;&gt; <span class="number">5</span> plugins loaded</div><div class="line">info: <span class="keyword">start</span> generation <span class="keyword">with</span> website generator</div><div class="line">info: clean website generator</div><div class="line">info: OK</div><div class="line">info: generation <span class="keyword">is</span> finished</div><div class="line"></div><div class="line"><span class="keyword">Starting</span> <span class="keyword">server</span> ...</div><div class="line">Serving book <span class="keyword">on</span> <span class="keyword">http</span>://localhost:<span class="number">4000</span></div></pre></td></tr></table></figure>
<p>之后，你就可以使用浏览器打开 <code>http://127.0.0.1:4000</code> 查看效果了。就是这么简单。</p>
<p>页面效果如下:</p>
<p><img src="https://camo.githubusercontent.com/c1b6c55fca8e171120ce1fd73afcee699cc2a98f/68747470733a2f2f7261772e6769746875622e636f6d2f476974626f6f6b494f2f676974626f6f6b2f6d61737465722f707265766965772e706e67" alt="https://camo.githubusercontent.com/c1b6c55fca8e171120ce1fd73afcee699cc2a98f/68747470733a2f2f7261772e6769746875622e636f6d2f476974626f6f6b494f2f676974626f6f6b2f6d61737465722f707265766965772e706e67"></p>
<p>你可以尽情的使用 <code>Markdown</code> 来编写文章了，完全不需要关心样式和排版呢。</p>
<h2 id="GitBook-编辑器"><a href="#GitBook-编辑器" class="headerlink" title="GitBook 编辑器"></a>GitBook 编辑器</h2><p>如果你不喜欢使用命令行，这里也有 GitBook 可视化编辑器，<a href="https://www.gitbook.com/editor/" target="_blank" rel="external">https://www.gitbook.com/editor/</a></p>
<h2 id="GitBook-com"><a href="#GitBook-com" class="headerlink" title="GitBook.com"></a>GitBook.com</h2><p><a href="https://www.gitbook.com/" target="_blank" rel="external">GitBook.com</a> 是一个围绕 GitBook 发行书籍的社区，于 2014 年初创，GitBook.com 提供免费和付费的服务，而且免费账户就可以享受诸多服务，包括：</p>
<ul>
<li>1 本私有书籍</li>
<li>托管不限数量的公开书籍</li>
<li>售卖不限数量的书籍，并分享 80% 的书籍收入</li>
<li>不限数量的协作者</li>
<li>免费的在线书籍编辑器</li>
</ul>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><ul>
<li><code>gitbook build</code>: 会生成相应的 HTML 文件供分发。</li>
<li><code>gitbook pdf</code>: 生成 PDF 文件</li>
<li><code>gitbook epub</code>: 生成 epub 文件</li>
<li><code>gitbook mobi</code>: 生成 mobi 文件</li>
</ul>
<h2 id="高级技巧"><a href="#高级技巧" class="headerlink" title="高级技巧"></a>高级技巧</h2><h3 id="个性化配置"><a href="#个性化配置" class="headerlink" title="个性化配置"></a>个性化配置</h3><p>我们通过配置 <code>book.json</code> 文件来修改 <code>GitBook</code> 在编译书籍时的行为，例如：修改书籍的名称，显示效果等等。</p>
<p><code>GitBook</code> 在编译书籍的时候会读取书籍源码顶层目录中的 <code>book.json</code>，<code>book.json</code> 支持的具体配置请参考<a href="http://help.gitbook.com/format/configuration.html" target="_blank" rel="external">官方文档</a></p>
<h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><p>你可以通过 <code>gitbook install</code> 命令来安装一些诸如 <a href="https://github.com/GitbookIO/plugin-disqus" target="_blank" rel="external">disqus</a>、<a href="https://github.com/citizenmatt/gitbook-plugin-multipart" target="_blank" rel="external">multipart</a> 这些实用的第三方插件。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Modern book format and toolchain using Git and Markdown&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这是 GitBook 项目主页上对 GitBook 的定义。&lt;/p&gt;
&lt;p&gt;GitBook 是一个命令行工具。通过它，你能够使用 Git 和 Markdown 来编排书本。并且通过工具可以自动生成相应的 HTML、PDF 和 epub 格式的文件。&lt;/p&gt;
&lt;p&gt;总之，就是好用，好使，加好看。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="工具" scheme="http://blog.sqrtthree.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>聊一聊 JS 中的『隐式类型转换』</title>
    <link href="http://blog.sqrtthree.com/2016/01/23/implicit-type-conversion/"/>
    <id>http://blog.sqrtthree.com/2016/01/23/implicit-type-conversion/</id>
    <published>2016-01-23T01:53:21.000Z</published>
    <updated>2016-01-23T01:53:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>类型转换还不行？还非得隐式？这是什么高级玩意？</p>
<p>废话不多说，我们先上一盘🌰，额，不对，先看一个例子吧。</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">3 </span>+ true</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>实际上在大多数编程语言中，都会认为上面这个表达式是错误的。因为布尔表达式与算术运算是不兼容的。尤其是在静态语言中，甚至不会被运行运行。即使是动态语言中，通常虽然可以让程序运行，但是会抛出一个异常。</p>
<p>然而，然而， Javascript 不仅运行程序能够正常运行，而且还会顺利地产生结果 4。Javascript 真的是对类型错误出奇的宽容啊。看起来很像是一件好事对不对？</p>
<p>基本上，在 Javascript 中，只有在一些极少数情况下才会因为类型错误而抛出一个异常。诸如: 调用非函数对象或者获取 null / undefined 的属性时。</p>
<p>但是在大多数情况下，Javascript 都是不会抛出异常的。这个『小婊砸』反而按照多种多样的转换协议偷偷的强制转换为她期望的值。诺，你看，还花样转换呢，真会玩嘛。这就是所谓的『隐式类型转换』。</p>
<p>那么，上面那个例子中，究竟是发生了什么样的转换方式呢？</p>
<p>首先，Javascript 这个『小婊砸』在遇到算数运算符(<code>-</code> 、<code>*</code> 、<code>/</code> 和 <code>%</code>)的时候会在运算之前将参与运算的双方转换成数字。</p>
<p>那么问题又来了，<code>true</code> 怎么就转换成数字了呢？实际上我们通过 <code>Number(true)</code> 就可以看到， <code>true</code> 转换为数字之后就是为 1，相反，<code>false</code> 转换为数字之后就对应为 0。</p>
<p>细心的你可能发现我在上面并没有提到 <code>+</code> 运算符，那是因为它更复杂。因为它既承担着数字相加，又肩负着字符串连接操作的重任。具体的行为取决于参数的类型。</p>
<p>但是，如果一个数字和一个字符串相加，会碰撞出什么样的火花呢？</p>
<p>显然 Javascript 这个『小婊砸』更偏爱字符串多一点，她会将数字(<code>toString()</code>)转换为字符串，然后执行字符串连接操作。</p>
<p>例如:</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"1"</span> + <span class="number">2</span>;    // <span class="string">"12"</span></div><div class="line"><span class="symbol">1 </span>+ <span class="string">"2"</span>;    // <span class="string">"12"</span></div></pre></td></tr></table></figure>
<p>但是，注意，Javascript 对操作顺序非常敏感，以至于会发生这样的事情:</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">1 </span>+ <span class="number">2</span> + <span class="string">"3"</span>;    // <span class="string">"33"</span></div></pre></td></tr></table></figure>
<p>因为加法运算是自左向右的，因此它等同于下面的表达式:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span> + <span class="number">2</span>) + <span class="string">"3"</span>;    <span class="comment">// "33"</span></div></pre></td></tr></table></figure>
<p>再来看这一个例子:</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="number">1</span> == <span class="literal">true</span>) &#123;</div><div class="line">    alert(<span class="string">"true"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    alert(<span class="string">"false"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>相信你一定轻松的猜到了结果对不对？</p>
<p>但是，哼，你以为我的问题会这么简单么？那岂不是太小看你了。</p>
<p>我们都知道，Javascript 中，数字 <code>0</code> 为假，<code>非0</code> 均为真, 那么我想问的是，在上面的条件语句中，到底是 <code>1</code> 被隐式类型转换了呢还是 <code>true</code> 被隐式类型转换了呢？</p>
<p>实际上在条件判断运算 <code>==</code> 中的转换规则是这样的:</p>
<ol>
<li>如果比较的两者中有布尔值(Boolean)，会把 <code>Boolean</code> 先转换为对应的 Number，即 0 和 1，然后进行比较。</li>
<li>如果比较的双方中有一方为 <code>Number</code>，一方为 <code>String</code>时，会把 <code>String</code> 通过 <code>Number()</code> 方法转换为数字，然后进行比较。</li>
<li>如果比较的双方中有一方为 <code>Boolean</code>，一方为 <code>String</code>时，则会先将双方转换为数字，然后进行比较。</li>
<li>如果比较的双方中有一方为 <code>Number</code>，一方为<code>Object</code>时，则会调用 <code>valueOf</code> 方法将<code>Object</code>转换为数字，然后进行比较。</li>
</ol>
<p>例如:</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">1 </span>== &#123; valueOf: function() &#123;<span class="keyword">return</span> <span class="number">1</span>;&#125; &#125;    // true</div><div class="line"><span class="symbol">1 </span>+ &#123; valueOf: function() &#123;<span class="keyword">return</span> <span class="number">1</span>;&#125; &#125;    // <span class="number">2</span></div></pre></td></tr></table></figure>
<p>需要强调的是，在 Javascript 中，只有 <code>空字符串</code>、<code>数字0</code>、<code>false</code>、<code>null</code>、<code>undefined</code> 和 <code>NaN</code> 这 6 个值为假之外，其他所有的值均为真值。</p>
<p>说到 <code>NaN</code>，就不得不提一下 <code>isNaN()</code> 方法，<code>isNaN()</code> 方法自带隐式类型转换，该方法在测试其参数之前，会先调用 <code>Number()</code> 方法将其转换为数字。所以 <code>isNaN(&#39;1&#39;)</code> 这个语句中明明用一个字符串去测试，返回值仍然为 <code>false</code> 也就不足为怪了。</p>
<p>在 <code>+</code> 号运算中还有一种更复杂的情况，那就是数字/字符串和对象进行运算的时候，上面已经举例说明了数字和对象运算的情况，我们再来说一下字符串和对象运算的情况。</p>
<p>当字符串和对象进行 <code>+</code> 运算的时候，Javascript 会通过对象的 <code>toString()</code> 方法将其自身转换为字符串，然后进行连接操作。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"1"</span> + &#123; toString: <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="number">1</span>;&#125; &#125;    <span class="comment">// "11"</span></div></pre></td></tr></table></figure>
<p>之所以说它特殊，是因为当一个对象同时包含 <code>toString()</code> 和 <code>valueOf()</code> 方法的时候，运算符 <code>+</code> 应该调用哪个方法并不明显(做字符串连接还是加法应该根据其参数类型，但是由于隐式类型转换的存在，类型并不显而易见。)，Javascript 会盲目的选择 <code>valueOf()</code> 方法而不是 <code>toString()</code> 来解决这个问题。这就意味着如果你打算对一个对象做字符串连接的操作，但结果却是……</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    <span class="attr">toString</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">"Object CustomObj"</span>; &#125;,</div><div class="line">    <span class="attr">valueOf</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"Object: "</span> + obj);    <span class="comment">// "Object: 1"</span></div></pre></td></tr></table></figure>
<p>隐式类型转换会给我们造成很多麻烦，那么该怎么避免呢？</p>
<p>建议在所有使用条件判断的时候都使用全等运算符 <code>===</code> 来进行条件判断。全等运算符会先进行数据类型判断，并且不会发生隐式类型转换。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;类型转换还不行？还非得隐式？这是什么高级玩意？&lt;/p&gt;
&lt;p&gt;废话不多说，我们先上一盘🌰，额，不对，先看一个例子吧。&lt;/p&gt;
&lt;figure class=&quot;highlight basic&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;symbol&quot;&gt;3 &lt;/span&gt;+ true&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>JavaScript 开发者年度调查报告</title>
    <link href="http://blog.sqrtthree.com/2015/12/26/javascript-developer-survey-results/"/>
    <id>http://blog.sqrtthree.com/2015/12/26/javascript-developer-survey-results/</id>
    <published>2015-12-26T18:41:10.000Z</published>
    <updated>2015-12-26T18:41:10.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<ul>
<li>原文链接 : <a href="https://ponyfoo.com/articles/javascript-developer-survey-results" target="_blank" rel="external">JavaScript Developer Survey Results</a></li>
<li>原文作者 : <a href="https://ponyfoo.com/" target="_blank" rel="external">ponyfoo</a></li>
<li>译文出自 : <a href="https://github.com/xitu/gold-miner" target="_blank" rel="external">掘金翻译计划</a></li>
<li>译者 : <a href="https://github.com/sqrthree" target="_blank" rel="external">sqrthree(根号三)</a></li>
<li>校对者: <a href="https://github.com/Zhangdroid" target="_blank" rel="external">Zhangdroid</a></li>
</ul>
</blockquote>
<p>截止目前有超过了 5000 人参与了(该次调查)，准确的说是 5350 人。我迫不及待的想要和大家分享一下这次调查的细节。在分享之前我想要感谢参与调查的每一个人。这是 Javascript 社区一个伟大的时刻，我对未来的事情感到无比激动。</p>
<a id="more"></a>
<p>我没有想到大家如此积极，下一次我一定会对版式做一些改进。换句话说，就是我会先将问卷调查放到 <a href="https://github.com/" target="_blank" rel="external">Github</a> 上，以便于在开始调查之前，社区有一到两周的时间来收集改进问题和选项。这样，我就可以得到更精确的结果，也可以避免出现诸如 “我很震惊你竟然没有包含 Emacs” 这样的抱怨。</p>
<p>现在，基于调查结果。我将保持中立的态度发表一下调查结果，这样你就可以得出自己的公正的结论。</p>
<h2 id="你写什么类型的-Javascript？"><a href="#你写什么类型的-Javascript？" class="headerlink" title="你写什么类型的 Javascript？"></a>你写什么类型的 Javascript？</h2><p>有高达 97.4% 的受访者用 Javascript 写 web 浏览器程序，其中有 37% 的受访者写移动端 web 程序。超过 3000 人(56.6%) 也写服务端的 Javascript。在这些参与调查者的人中间，有 5.5% 的人还在一些嵌入式环境中使用 Javascript，例如 Tessel 或 a Raspberry Pi (树莓派).</p>
<p>少数参与者表示他们也在其他一些地方使用 Javascript，尤其是在开发 CLI 和桌面应用方面。还有少数提到了 Pebble 和 Apple TV. 这些都归类在 <strong>Other</strong> 一类中，占总票数的 2.2%.</p>
<p><img src="https://i.imgur.com/c0q4LvI.png" alt="An screenshot of the percentages for the first question"></p>
<h2 id="你在哪里使用-Javascript？"><a href="#你在哪里使用-Javascript？" class="headerlink" title="你在哪里使用 Javascript？"></a>你在哪里使用 Javascript？</h2><p>不出所料地，有 94.9% 的参与者在工作中使用 Javascript，但是，统计中也有很大一部分(占总票数的 82.3%) 参与者也在其他项目中使用。其他的回复则包括了教学，好玩，和非盈利目的的使用。</p>
<p><img src="https://i.imgur.com/K5nSsyr.png" alt="An screenshot of the percentages for the second question"></p>
<h2 id="你写-Javascript-多长时间了？"><a href="#你写-Javascript-多长时间了？" class="headerlink" title="你写 Javascript 多长时间了？"></a>你写 Javascript 多长时间了？</h2><p>超过 33% 的受访者表示他们写 Javascript 代码已经超过了 6 年时间。除了这些人之外，有 5.2% 的人一年前开始写 Javascript 代码，12.4% 的人是两年前，还有 15.1% 的人是三年前。这说明在 5350 个投票者中，有 32.7% 的人是在近几年才开始写 Javascript 的。</p>
<p><img src="https://i.imgur.com/P5ev9fL.png" alt="An screenshot of the percentages for the third question"></p>
<h2 id="如果可以的话，你使用哪种-compile-to-JavaScript-编译为-JavaScript-的-语言？"><a href="#如果可以的话，你使用哪种-compile-to-JavaScript-编译为-JavaScript-的-语言？" class="headerlink" title="如果可以的话，你使用哪种 compile-to-JavaScript(编译为 JavaScript 的) 语言？"></a>如果可以的话，你使用哪种 compile-to-JavaScript(编译为 JavaScript 的) 语言？</h2><p>有高达 <strong>85%</strong> 的受访者表示他们使用 ES6 编译成 ES5。与此同时，有 15% 的人仍然使用 <code>CoffeeScript</code>，15.2% 的人使用 <code>TypeScript</code>，只有区区 1.1% 的人使用 <code>Dart</code>.</p>
<p>这是我想进一步探讨的问题之一，因为有 13.8% 的人选择了 <em>“Other”</em>，选择 <em>“Other”</em> 的绝大部分的回答是 <code>ClojureScript</code>, <code>elm</code>, <code>Flow</code>, 和 <code>JSX</code>.</p>
<p><img src="https://i.imgur.com/12mL6u6.png" alt="An screenshot of the percentages for the fourth question"></p>
<h2 id="你更喜欢哪一种-Javascript-编程风格？"><a href="#你更喜欢哪一种-Javascript-编程风格？" class="headerlink" title="你更喜欢哪一种 Javascript 编程风格？"></a>你更喜欢哪一种 Javascript 编程风格？</h2><p>回答这个问题的绝大多数开发者(79.9%)都选择了分号。相反，有 11% 的开发者指出更喜欢不使用分号。</p>
<p>逗号方面，44.9% 的开发者喜欢将逗号放在表达式的末尾，然而有 4.9% 的开发者喜欢先写逗号。</p>
<p>缩进方面，65.5% 的开发者更喜欢使用空格，然而有 29.1% 的开发者则更喜欢使用制表符(Tab)。</p>
<p><img src="https://i.imgur.com/xwFVmS1.png" alt="An screenshot of the percentages for the fifth question"></p>
<h2 id="你使用过-ES5-的哪些特性？"><a href="#你使用过-ES5-的哪些特性？" class="headerlink" title="你使用过 ES5 的哪些特性？"></a>你使用过 ES5 的哪些特性？</h2><p>79.2% 的受访者都使用过 <code>Array(数组)</code> 的一些实用的方法，76.3% 的开发者使用严格模式。30% 的开发者使用 <code>Object.create</code>，而使用过 getters 和 setters 的开发者仅占了 28%.</p>
<p><img src="https://i.imgur.com/W9pUOua.png" alt="An screenshot of the percentages for the sixth question"></p>
<h2 id="你使用过-ES6-的哪些特性？"><a href="#你使用过-ES6-的哪些特性？" class="headerlink" title="你使用过 ES6 的哪些特性？"></a>你使用过 ES6 的哪些特性？</h2><p>显然，在这些投票中，箭头函数是使用最多的 ES6 特性，占了 79.6%。在所有调查者中，Let 和 const 加在一起一共占了 77.8% 。promises 也有 74.4% 的开发者采用。不出所料，只有 4% 的参与者使用 proxies，只有 13.1% 的用户表示他们使用 symbols，同时有超过 30% 的人说他们使用 iterators.</p>
<p><img src="https://i.imgur.com/okcvuos.png" alt="An screenshot of the percentages for the seventh question"></p>
<h2 id="你写测试么？"><a href="#你写测试么？" class="headerlink" title="你写测试么？"></a>你写测试么？</h2><p>有 21.7% 的开发者表示他们从不写任何测试。大部分人偶尔写一些测试。34.8% 的人总是写测试。</p>
<p><img src="https://i.imgur.com/0C944YL.png" alt="An screenshot of the percentages for the eighth question"></p>
<h2 id="你运行持续集成测试吗？"><a href="#你运行持续集成测试吗？" class="headerlink" title="你运行持续集成测试吗？"></a>你运行持续集成测试吗？</h2><p>和 CI 类似，尽管许多人(超过40%)不使用 CI 服务器，但是差不多有 60% 的人表示在少数时间会使用 CI，其中有 32% 的人总是在 CI 服务器上运行测试代码。</p>
<p><img src="https://i.imgur.com/P04bJHG.png" alt="An screenshot of the percentages for the ninth question"></p>
<h2 id="你怎么运行测试代码？"><a href="#你怎么运行测试代码？" class="headerlink" title="你怎么运行测试代码？"></a>你怎么运行测试代码？</h2><p>59% 的开发者喜欢使用 PhantomJS 或是类似的工具来运行自动化浏览器测试。也有 51.3% 的开发者喜欢在 web 浏览器上手动运行测试。有 53.5% 的投票者会在服务器端进行自动化测试。</p>
<p><img src="https://i.imgur.com/v09gVdQ.png" alt="An screenshot of the percentages for the tenth question"></p>
<h2 id="你使用过哪个单元测试库？"><a href="#你使用过哪个单元测试库？" class="headerlink" title="你使用过哪个单元测试库？"></a>你使用过哪个单元测试库？</h2><p>似乎大部分投票者都使用 Mocha 或是 Jasmine 来运行他们的 Javascript 测试用例。而 Tape 收到了 9.8% 的选票。</p>
<p><img src="https://i.imgur.com/20nUzJu.png" alt="An screenshot of the percentages for the eleventh question"></p>
<h2 id="你使用过哪个代码质量检测工具？"><a href="#你使用过哪个代码质量检测工具？" class="headerlink" title="你使用过哪个代码质量检测工具？"></a>你使用过哪个代码质量检测工具？</h2><p>看起来受访者在 ESLint 和 JSHint之间分成了两派，但是 JSLint 还是有差不多 30% 的投票率，在这么多年之后势头还是惊人的强劲。</p>
<p><img src="https://i.imgur.com/RC8ePwr.png" alt="An screenshot of the percentages for the 12th question"></p>
<h2 id="你通过哪种方式来处理客户端依赖关系？"><a href="#你通过哪种方式来处理客户端依赖关系？" class="headerlink" title="你通过哪种方式来处理客户端依赖关系？"></a>你通过哪种方式来处理客户端依赖关系？</h2><p>npm 接管了客户端依赖管理系统的天下，有超过 60% 的投票就是证明它的方式。Bower 仍然有 20% 的观众，而通过下载和插入 <code>&lt;script&gt;</code> 标签来管理的普通旧式方法则获得了 13.7% 的选票。</p>
<p><img src="https://i.imgur.com/TOQiSZP.png" alt="An screenshot of the percentages for the 13th question"></p>
<h2 id="你首选的脚本构建方案是什么？"><a href="#你首选的脚本构建方案是什么？" class="headerlink" title="你首选的脚本构建方案是什么？"></a>你首选的脚本构建方案是什么？</h2><p>构建工具的选择很分散，部分原因是有太多的不同的选项可供选择。Gulp 最流行，有着超过 40% 的选票，紧接着的是使用 <code>npm run</code>，有 27.8%。Grunt 得到了 18.5% 的支持者。</p>
<p><img src="https://i.imgur.com/xXlEE3E.png" alt="An screenshot of the percentages for the 14th question"></p>
<h2 id="你首选的-JavaScript-模块加载工具是什么？"><a href="#你首选的-JavaScript-模块加载工具是什么？" class="headerlink" title="你首选的 JavaScript 模块加载工具是什么？"></a>你首选的 JavaScript 模块加载工具是什么？</h2><p>目前，看起来大部分开发者都在 Browserify 和 Webpack 之间徘徊，而后者高出了 7 个百分点。29% 的用户表示他们在使用前面提到的这两个工具打包他们的模块之前会先使用 Babel 进行转换。</p>
<p><img src="https://i.imgur.com/pQPMC7V.png" alt="An screenshot of the percentages for the 15th question"></p>
<h2 id="你使用过哪些库？"><a href="#你使用过哪些库？" class="headerlink" title="你使用过哪些库？"></a>你使用过哪些库？</h2><p>现在回顾起来，这是一个受益于协同编辑的问题之一。jQuery 获得了超过 50% 的选票证明了它的势头依然很强劲。在参与投票的 JavaScript 使用者中，Lodash 与 Underscore 也被很大一部分开发者使用。 <code>xhr</code> 微型库只获得了 8% 的票数。</p>
<p><img src="https://i.imgur.com/7jAwy05.png" alt="An screenshot of the percentages for the 16th question"></p>
<h2 id="你使用过哪些框架？"><a href="#你使用过哪些框架？" class="headerlink" title="你使用过哪些框架？"></a>你使用过哪些框架？</h2><p>毫无意外的，React 和 Angular 遥遥领先于其他框架，有着 22.8% 的 Backbone 仍然处在一个安全的位置。</p>
<p><img src="https://i.imgur.com/zpSAISK.png" alt="An screenshot of the percentages for the 17th question"></p>
<h2 id="你使用-ES6-吗？"><a href="#你使用-ES6-吗？" class="headerlink" title="你使用 ES6 吗？"></a>你使用 ES6 吗？</h2><p>受访者在这个问题上的反应相当分歧，有近 20% 的人几乎从不使用 ES6，超过 10% 的人只写 ES6，接近 30% 的人广泛使用 ES6，近 40% 的人偶尔使用。</p>
<p><img src="https://i.imgur.com/hAnbtfN.png" alt="An screenshot of the percentages for the 18th question"></p>
<h2 id="你知道在即将到来的-ES2016-中会有什么特性吗？"><a href="#你知道在即将到来的-ES2016-中会有什么特性吗？" class="headerlink" title="你知道在即将到来的 ES2016 中会有什么特性吗？"></a>你知道在即将到来的 ES2016 中会有什么特性吗？</h2><p>粗略地说，有超过一半的投票者表示不知道即将到来的 ES2016 中会有什么特性。另一半则对接下来的版本有所了解。</p>
<p><img src="https://i.imgur.com/DxxOnco.png" alt="An screenshot of the percentages for the 19th question"></p>
<h2 id="你了解-ES6-吗？"><a href="#你了解-ES6-吗？" class="headerlink" title="你了解 ES6 吗？"></a>你了解 ES6 吗？</h2><p>超过 60% 的受访者似乎了解基本的概念。10% 的人对 ES6 毫不了解，有 25% 的受访者认为他们非常了解 ES6。</p>
<p><img src="https://i.imgur.com/w6obK3X.png" alt="An screenshot of the percentages for the 20th question"></p>
<h2 id="你认为-ES6-是一个进步吗？"><a href="#你认为-ES6-是一个进步吗？" class="headerlink" title="你认为 ES6 是一个进步吗？"></a>你认为 ES6 是一个进步吗？</h2><p>超过 95% 的受访者认为 ES6 是对于 JavaScript 语言来说是一个进步，下一次碰到 TC39 的会员我得祝贺他们。</p>
<p><img src="https://i.imgur.com/c0RtfVK.png" alt="An screenshot of the percentages for the 21th question"></p>
<h2 id="你更喜欢什么文本编辑器？"><a href="#你更喜欢什么文本编辑器？" class="headerlink" title="你更喜欢什么文本编辑器？"></a>你更喜欢什么文本编辑器？</h2><p>再一次，由于存在各种各样的选择导致结果非常分散。超过一半的受访者喜欢 <a href="http://www.sublimetext.com/" target="_blank" rel="external">Sublime Text</a>，超过 30% 的受访者喜欢使用 <a href="https://atom.io/" target="_blank" rel="external">atom</a> 和 它的开源克隆版。超过 25% 的选票投给了 WebStorm，也有 25% 的选票投给了 vi/vim.</p>
<p><img src="https://i.imgur.com/Vt8ve7s.png" alt="An screenshot of the percentages for the 22th question"></p>
<h2 id="你更喜欢使用什么操作系统作为开发环境"><a href="#你更喜欢使用什么操作系统作为开发环境" class="headerlink" title="你更喜欢使用什么操作系统作为开发环境?"></a>你更喜欢使用什么操作系统作为开发环境?</h2><p>超过 60% 的投票者使用 Mac，使用 Linux 和 Windows 的用户都接近 20%。</p>
<p><img src="https://i.imgur.com/PmLbtAo.png" alt="An screenshot of the percentages for the 23th question"></p>
<h2 id="你是通过哪种方式搜索到可重用的代码、库和工具的？"><a href="#你是通过哪种方式搜索到可重用的代码、库和工具的？" class="headerlink" title="你是通过哪种方式搜索到可重用的代码、库和工具的？"></a>你是通过哪种方式搜索到可重用的代码、库和工具的？</h2><p>受访者似乎更青睐于 <a href="https://github.com" target="_blank" rel="external">GitHub</a> 和搜索引擎，但是也有一部分人使用博客，Twitter 和 npm 网站。</p>
<p><img src="https://i.imgur.com/HpmV9yz.png" alt="An screenshot of the percentages for the 24th question"></p>
<h2 id="你参加过-Javascript-的社交活动吗？"><a href="#你参加过-Javascript-的社交活动吗？" class="headerlink" title="你参加过 Javascript 的社交活动吗？"></a>你参加过 Javascript 的社交活动吗？</h2><p>有近 60% 的人参加过至少一次，74% 的人表示他们喜欢参加聚会。</p>
<p><img src="https://i.imgur.com/EnQWGzf.png" alt="An screenshot of the percentages for the 25th question"></p>
<h2 id="在你的-Javascript-应用中，你都支持哪些浏览器？"><a href="#在你的-Javascript-应用中，你都支持哪些浏览器？" class="headerlink" title="在你的 Javascript 应用中，你都支持哪些浏览器？"></a>在你的 Javascript 应用中，你都支持哪些浏览器？</h2><p>回答相当分散，但是好在大多数受访者表示他们不再处理使用 IE6 的客户(的问题)了。</p>
<p><img src="https://i.imgur.com/BV3eU0X.png" alt="An screenshot of the percentages for the 26th question"></p>
<h2 id="你会定期了解有关-Javascript-的最新特性吗？"><a href="#你会定期了解有关-Javascript-的最新特性吗？" class="headerlink" title="你会定期了解有关 Javascript 的最新特性吗？"></a>你会定期了解有关 Javascript 的最新特性吗？</h2><p>有 80% 的受访者会尝试实时了解并持续学习 Javascript 的最新特性。</p>
<p><img src="https://i.imgur.com/5TZUW2i.png" alt="An screenshot of the percentages for the 27th question"></p>
<h2 id="你在哪了解最新的-JavaScript-特性？"><a href="#你在哪了解最新的-JavaScript-特性？" class="headerlink" title="你在哪了解最新的 JavaScript 特性？"></a>你在哪了解最新的 JavaScript 特性？</h2><p>不出所料地，<a href="https://developer.mozilla.org/" target="_blank" rel="external">Mozilla 开发者网络</a> 在 Javascript 文档和新闻方面处于领先地位。<a href="http://javascriptweekly.com/" target="_blank" rel="external">JavaScript 周刊</a> 也是一个非常受欢迎的新闻和文章的直接来源，它有着超过 40% 的投票。</p>
<p><img src="https://i.imgur.com/7Jlg7zh.png" alt="An screenshot of the percentages for the 28th question"></p>
<h2 id="你听说过下面哪些新特性？"><a href="#你听说过下面哪些新特性？" class="headerlink" title="你听说过下面哪些新特性？"></a>你听说过下面哪些新特性？</h2><p>超过 85% 的人听说过 ServiceWorker，我很想知道这些人中有多少人使用过它。</p>
<p><img src="https://i.imgur.com/8o3Jq2R.png" alt="An screenshot of the percentages for the 29th question"></p>
<h2 id="除了-JavaScript，你还主要使用哪些语言？"><a href="#除了-JavaScript，你还主要使用哪些语言？" class="headerlink" title="除了 JavaScript，你还主要使用哪些语言？"></a>除了 JavaScript，你还主要使用哪些语言？</h2><p>这有太多的语言可供选择，我肯定会漏掉一些。但是结果不言自明。</p>
<p><img src="https://i.imgur.com/Tv9NciV.png" alt="An screenshot of the percentages for the 30th question"></p>
<h2 id="谢谢"><a href="#谢谢" class="headerlink" title="谢谢"></a>谢谢</h2><p>最后，我想感谢参与此次调查的每一个人。这次调查的受欢迎程度超出了我的预期，我很期待明年再进行一次类似的调查。我希望，那将会是一个更多样性的，也许会再少一点倾向性的调查。</p>
<p>你从这次调查中获得了什么呢？</p>
<blockquote>
<p>本文根据 <a href="https://ponyfoo.com/" target="_blank" rel="external">ponyfoo</a> 的《<a href="https://ponyfoo.com/articles/javascript-developer-survey-results" target="_blank" rel="external">JavaScript Developer Survey Results</a>》所译，整个译文带有自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明英文出处：<a href="https://ponyfoo.com/articles/javascript-developer-survey-results" target="_blank" rel="external">https://ponyfoo.com/articles/javascript-developer-survey-results</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;原文链接 : &lt;a href=&quot;https://ponyfoo.com/articles/javascript-developer-survey-results&quot;&gt;JavaScript Developer Survey Results&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;原文作者 : &lt;a href=&quot;https://ponyfoo.com/&quot;&gt;ponyfoo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译文出自 : &lt;a href=&quot;https://github.com/xitu/gold-miner&quot;&gt;掘金翻译计划&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;译者 : &lt;a href=&quot;https://github.com/sqrthree&quot;&gt;sqrthree(根号三)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;校对者: &lt;a href=&quot;https://github.com/Zhangdroid&quot;&gt;Zhangdroid&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;截止目前有超过了 5000 人参与了(该次调查)，准确的说是 5350 人。我迫不及待的想要和大家分享一下这次调查的细节。在分享之前我想要感谢参与调查的每一个人。这是 Javascript 社区一个伟大的时刻，我对未来的事情感到无比激动。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="译文" scheme="http://blog.sqrtthree.com/tags/%E8%AF%91%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>前端代码风格检查套件 FECS</title>
    <link href="http://blog.sqrtthree.com/2015/12/25/fecs/"/>
    <id>http://blog.sqrtthree.com/2015/12/25/fecs/</id>
    <published>2015-12-25T15:33:04.000Z</published>
    <updated>2015-12-25T15:33:04.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>All code in any code-base should look like a single person typed it, no matter how many people contributed. — idiomatic.js<br>在任一个代码库中，不管是多少人协同开发，所有的代码都应该看起来像是一个人写的。- idiomatic.js</p>
</blockquote>
<p>This means strictly enforcing these agreed upon guidelines at all times.</p>
<a id="more"></a>
<p>今天要讲的不是代码规范，关于代码规范网上已经有了非常好的实践和各大公司公开的实践指南，大家可自行查询。 例如: <a href="http://zoomzhao.github.io/code-guide/" target="_blank" rel="external">code-guide chinese</a>.</p>
<p>然而，有了规范是一回事，执行起来又是一回事。今天要介绍的就是一款按照指定风格检测代码是否符合规范的工具，通过工具的自动检测，以确保每一行代码都符合规范。</p>
<h2 id="FECS-是什么？"><a href="#FECS-是什么？" class="headerlink" title="FECS 是什么？"></a>FECS 是什么？</h2><p><a href="http://fecs.baidu.com/" target="_blank" rel="external">fecs</a> 是以百度前端代码规范为目标的基于 Node.js 的前端代码风格检测工具，套件内包括了 <code>htmlcs、csshint、lesslint</code> 和 <code>jformatter</code> 等工具。</p>
<p>因此，<code>fecs</code> 不仅能检查 <code>HTML/CSS/LESS/JavaScript</code> 代码的规范问题，而且还能修复代码的规范问题。</p>
<h2 id="FECS-能干什么？"><a href="#FECS-能干什么？" class="headerlink" title="FECS 能干什么？"></a>FECS 能干什么？</h2><h3 id="fecs-check"><a href="#fecs-check" class="headerlink" title="fecs check"></a>fecs check</h3><p>首先，主要功能就是代码格式的检查，当然了呢，因为是最初是供于百度内部使用的工具，自然就是以 <a href="https://github.com/ecomfe/spec/" target="_blank" rel="external">百度前端代码规范</a> 为首要目标，好在该规范第一开源，第二还不错，因此可以直接使用。</p>
<p>当然了，如果你不喜欢其中的某些规则，<code>FECS</code> 也是支持配置文件设置规则的方式的，具体的在下文说明。</p>
<p>需要说明的是，<code>FECS</code> 目前只支持 <code>HTML/CSS/LESS/JavaScript</code> 四种文件和语法的检测。</p>
<h4 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h4><p><code>Javascript</code> 方面 <code>FECS</code> 采用了 <code>eslint</code> 检测引擎，因此你在自定义规则的时候可以参考 <a href="http://esling.org/" target="_blank" rel="external">esling</a> 的文档进行相关配置。<code>FECS</code> 只是在 <code>eslint</code> 基础之上针对百度的代码规范作了新的规则实现或调整。详细内容见 <a href="https://github.com/ecomfe/fecs/wiki/FECSRules" target="_blank" rel="external">FECS 自有规则</a></p>
<h4 id="CSS-LESS-HTML"><a href="#CSS-LESS-HTML" class="headerlink" title="CSS/LESS/HTML"></a>CSS/LESS/HTML</h4><p>CSS 的 linter 是使用了内部优化过的 <code>csshint</code>。LESS 和 HTML 方面则分别使用了 <code>lesslint</code> 和 <code>htmlcs</code>。</p>
<h2 id="FECS-的安装及其使用"><a href="#FECS-的安装及其使用" class="headerlink" title="FECS 的安装及其使用"></a>FECS 的安装及其使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装 <code>FECS</code> 需要依赖 <code>node</code> <code>npm</code> 环境支持，执行以下命令即可安装:</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="string">[sudo]</span> npm install fecs -g</div></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>使用方式可使用以下命令查看:</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ fecs --help</div><div class="line">$ fecs<span class="built_in"> check </span>--help</div><div class="line">$ fecs format --help</div></pre></td></tr></table></figure>
<p>具体的命令参数？哎呀，官方已经写的够详细的了，还是看官方文档吧: <a href="https://github.com/ecomfe/fecs/wiki/CLI" target="_blank" rel="external">FECS 命令参数</a></p>
<h2 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h2><p><code>FECS</code> 支持通过配置文件的方式指定特定的规则。</p>
<p>配置文件的支持来自 <code>manis</code>，支持使用 <code>.fecsrc</code> 或 <code>package.json</code>，但以第一个找到的为准。配置文件 <code>.fecsrc</code> 大体是这个样子的:</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"files"</span>: [],</div><div class="line"></div><div class="line">    <span class="string">"eslint"</span>: <span class="meta">&#123;...&#125;</span>,</div><div class="line"></div><div class="line">    <span class="string">"csshint"</span>: <span class="meta">&#123;...&#125;</span>,</div><div class="line"></div><div class="line">    <span class="string">"htmlcs"</span>: <span class="meta">&#123;...&#125;</span>,</div><div class="line"></div><div class="line">    <span class="string">"csscomb"</span>: <span class="meta">&#123;...&#125;</span></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>比如说他们的<a href="https://github.com/ecomfe/spec/blob/master/javascript-style-guide.md" target="_blank" rel="external">JavaScript编码规范</a> 中关于换行中有这样一条 <a href="https://github.com/ecomfe/spec/blob/master/javascript-style-guide.md#建议-对于-ifelsetrycatchfinally-等语句推荐使用在--号后添加一个换行-的风格使代码层次结构更清晰阅读性更好" target="_blank" rel="external">对于if…else…try…catch…finally 等语句，推荐使用在 } 号后添加一个换行的风格，使代码层次结构更清晰，阅读性更好</a>，这一条我就很不喜欢嘛，那我可以这样配置:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"eslint"</span>: &#123;</div><div class="line">        <span class="attr">"rules"</span>: &#123;</div><div class="line">            <span class="attr">"brace-style"</span>: [<span class="number">2</span>, <span class="string">"1tbs"</span>, &#123;&#125;]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样配置之后再进行检测，就能愉快的按照下面这种写法愉快的 coding 了。</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">condition</span>) &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="多工具支持"><a href="#多工具支持" class="headerlink" title="多工具支持"></a>多工具支持</h2><p>详情支持列表请参考官方文档 <a href="https://github.com/ecomfe/fecs#工具支持" target="_blank" rel="external">工具支持</a>。</p>
<p>嗯。文档依旧写的很完善，基本上已经没什么好补充的了。</p>
<p>在这里我有一个小提示，就是工具对 <code>atom</code> 编辑器的支持相对于对 <code>sublime</code> 的支持来说要优秀很多， 包括检测速度呀，错误提示呀，<code>atom</code> 都略称一筹，这取决于 <code>atom</code> 优秀的插件机制。并且我在 <code>sublime</code>下面使用的时候发现了一个 bug，就是错误提示会显示为特殊编码导致无法以中文显示。解决方案呢，在这里<a href="https://github.com/leeight/Baidu-FE-Code-Style/issues/6" target="_blank" rel="external">https://github.com/leeight/Baidu-FE-Code-Style/issues/6</a>，不过感觉略麻烦的样子。</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h2><p><code>FECS</code> 的错误报告默认为英文格式，由各 linter 直接提供。<code>FECS</code> 根据百度前端代码规范，作了一次影射转换，通过指定 reporter 为 baidu 可以看到中文的报告输出效果，对于某些比较抽象的描述，会同时在括号内提供英文原文补充说明。</p>
<p>例如，你可以这样用:</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fecs<span class="built_in"> check </span>--reporter=baidu</div></pre></td></tr></table></figure>
<p>或者，更直接一点，直接添加一个 <code>alias</code>，使其在执行 <code>fecs check</code> 命令时默认为中文输出。</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">alias</span> fecs=<span class="symbol">'fecs</span> <span class="comment">--reporter=baidu'</span></div></pre></td></tr></table></figure>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接:"></a>相关链接:</h2><ul>
<li><a href="http://fecs.baidu.com/" target="_blank" rel="external">FECS 官网</a></li>
<li><a href="http://github.com/ecomfe/fecs/wiki" target="_blank" rel="external">FECS WIKI</a></li>
<li><a href="http://github.com/ecomfe/fecs" target="_blank" rel="external">FECS Github</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;All code in any code-base should look like a single person typed it, no matter how many people contributed. — idiomatic.js&lt;br&gt;在任一个代码库中，不管是多少人协同开发，所有的代码都应该看起来像是一个人写的。- idiomatic.js&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This means strictly enforcing these agreed upon guidelines at all times.&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>jQuery 3.0 以及兼容版的 Alpha 版本发布</title>
    <link href="http://blog.sqrtthree.com/2015/11/12/jQuery3-0-Alpha-Versions-Released/"/>
    <id>http://blog.sqrtthree.com/2015/11/12/jQuery3-0-Alpha-Versions-Released/</id>
    <published>2015-11-12T00:14:23.000Z</published>
    <updated>2015-11-12T00:14:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>从我们做出上一个重大的版本发布已经过去很长时间了，所以你理应再得到一个新版本。因此我们非常高兴的宣布 <code>jQuery 3.0</code> 的第一个 <code>alpha</code> 版本的发布。</p>
<a id="more"></a>
<p>尽管版本号已经到了 3.0，但是在升级目前已经存在的代码时，可以预期这些发布不会造成太多的麻烦。确实，只是一些用来调整重要版本冲突的零碎改变，但是我们希望这些改变不会实际影响到很多人。<code>jQuery Migrate</code> 插件可以很好的帮助你在你的代码中识别出兼容性问题。在这个 <code>alpha</code> 版本中，你针对于这些变化的反馈将会极大的帮助我们，所以请在你目前已有的代码和插件中尝试一下。</p>
<p>实际上，这里有两个版本。第一个版本是 <code>jQuery 3.0</code>, 这个版本支持现代浏览器和 <code>IE9</code> 以后的浏览器环境。第二个版本是 <code>jQuery Compat 3.0</code>，这个支持 <code>IE8</code>。作为一个额外的福利，就是 <code>jQuery</code> 和 <code>jQuery Compat</code> 这两个版本都支持 Yandex 浏览器(一个2012年发布的免费软件)。你可以从 jQuery CDN 或者直接通过下面这些链接获取这两个文件。</p>
<p><a href="https://code.jquery.com/jquery-3.0.0-alpha1.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0-alpha1.js</a></p>
<p><a href="https://code.jquery.com/jquery-compat-3.0.0-alpha1.js" target="_blank" rel="external">https://code.jquery.com/jquery-compat-3.0.0-alpha1.js</a></p>
<p>你也可以从 <code>npm</code> 中获取 alpha 版:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">npm</span> <span class="selector-tag">install</span> <span class="selector-tag">jquery</span>@<span class="keyword">3</span>.<span class="keyword">0</span>.<span class="keyword">0</span>-<span class="keyword">alpha1</span></div><div class="line"></div><div class="line">npm install jquery-compat@<span class="number">3.0</span>.<span class="number">0</span>-alpha1</div></pre></td></tr></table></figure>
<h4 id="Major-changes-主要的变化"><a href="#Major-changes-主要的变化" class="headerlink" title="Major changes (主要的变化)"></a>Major changes (主要的变化)</h4><p>下面的这些内容只是高亮了这个版本中一些重要的新特性，代码的改进，还有一些 bug 的修复。在这篇文章下面和我们的 GitHub issue tracker 板块你可以看到一个完整的改变清单。在 Github 上，你还可以看到我们期待在下个 beta 版本和暂时还没发布的最终版中添加的新特性。</p>
<h5 id="Simplified-show-and-hide-methods-简化的-show-和-hide-方法"><a href="#Simplified-show-and-hide-methods-简化的-show-和-hide-方法" class="headerlink" title="Simplified .show() and .hide() methods: 简化的 show 和 hide 方法"></a>Simplified <code>.show()</code> and <code>.hide()</code> methods: 简化的 show 和 hide 方法</h5><p>每个人的心中都认为 <code>jQuery</code> 中的 <code>.hide()</code> 方法就是把元素设置为 <code>display:none</code>，相反的，<code>.show()</code> 方法就是清除 <code>display</code> 因此元素会重新显示(假设父级元素没有被隐藏)。很简单，对么？</p>
<p>不，这么多年来，实际上有很多复杂特殊的例子，人们要求我们去修正一下，这些例子使得这些方法陷入一个复杂的原理集合之中。例如，如果一个元素在样式表中设置为 <code>display: none</code> 将会怎样？<code>jQuery</code> 会试着在元素上强制设置 <code>display: block</code> 去覆盖它。这是可以的。但是像 <code>&lt;li&gt;</code> 这样的一个正常的块元素通过不同的样式规则被设置为 <code>display: inline</code> 会怎么样呢？在一个元素被添加到 <code>document</code> 之前你调用了这个方法并且我们不知道这个元素拥有的 <code>display</code> 值的话又会怎样？确定这些事情需要花费额外的工作。有时仅仅是一个最后被证明是错误的猜想。</p>
<p>这些方法在元素上添加一个样式属性之后，在像是响应式设计中(元素的可见性需要通过媒体查询来设置)这样的技术上往往不能很好的表现。这个导致需要 <code>jQuery</code> 处理器去监听 <code>orientationchange</code> 或 <code>resize</code> 事件人工隐藏或显示部分页面；jQuery 打败了媒体查询正尝试实现的优雅的解决方案。</p>
<p>你可以看到 <code>jQuery</code> 已经完成了疯狂旅途中的一半路程了，但是完成整个旅程是行不通的。这个特殊的情况以及检查不仅复杂且难以完成，而且在大的页面中会造成具有重大意义的性能问题。</p>
<p>因此，代替的是，我们实验性的反抗这些方法的演变，重新回归到一个简洁的，原始的模型。这将会分解一些代码。如果一个元素在样式表中被设置为 <code>display: none</code>，<code>.show()</code> 方法将不会再覆盖它。因此，转移到 jQuery 3.0 中有一个最重要的规则就是: 不要使用样式去设置 <code>display: none</code> 作为默认值，然后使用 <code>.show()</code> 或者其他方法来显示元素，例如使用 <code>.slideDown()</code> 和 <code>.fadeIn()</code> 方法来使它可见。</p>
<p>如果你需要让一个元素默认是隐藏状态，最好的方法是给元素添加一个像 <code>hidden</code> 这样的类名，然后在样式中去定义这个类为 <code>display: none</code>，然后你可以使用 <code>jQuery</code> 的 <code>.addClass()</code> 和 <code>.removeClass()</code> 方法来添加或删除这个类来控制其可见性。另外一种方法是，你可以在元素显示到页面中之前，使用 <code>.ready()</code> 处理器并在其中调用 <code>.hide()</code> 方法。或者，如果你一定要在样式中保留默认值，你可以使用 <code>.css(&quot;display&quot;, &quot;block&quot;)</code> (或其他合适的值)去覆盖样式。</p>
<p>我们知道这可能是 <code>jQuery 3.0</code> 中最受争议和最困难的改变，所以我们想把它放到这个早期版本中观察一下所造成的影响。请让我们知道这些改变如何影响了你的代码，以及你为了使用这个新版本所作出的改变。</p>
<p><a href="https://github.com/jquery/jquery/issues/1767" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1767</a><br><a href="https://github.com/jquery/jquery/issues/2057" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2057</a><br><a href="https://github.com/jquery/jquery/issues/2308" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2308</a></p>
<h5 id="Special-case-with-data-names-含有-data-名字的特殊事例"><a href="#Special-case-with-data-names-含有-data-名字的特殊事例" class="headerlink" title="Special case with .data() names: 含有.data()名字的特殊事例"></a>Special case with .data() names: 含有.data()名字的特殊事例</h5><p><a href="https://github.com/jquery/jquery/issues/1751" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1751</a></p>
<p>我们也更新了我们的 <code>.data()</code> 方法来更有效的匹配 HTML5 dataset specification. 所有的键值现在都从 kebab-case 转换成驼峰命名法，不再理会访问方式，数字也不再参与转换。例如: 我们不再区分 <code>foo-bar</code> 和 <code>fooBar</code>，但是仍然区分 <code>foo-42</code> 和 <code>foo42</code>。当通过调用无参数的 <code>.data()</code> 来取得所有的数据方法，或者尝试通过转换的键名(.data(“foo42”))而不是原始的(.data(“foo-42”))来获取数据时，这些改变将会发挥主要作用。</p>
<h5 id="jQuery-Deferred-is-now-Promises-A-compatible-jQuery-Deferred现在兼容Promises-A"><a href="#jQuery-Deferred-is-now-Promises-A-compatible-jQuery-Deferred现在兼容Promises-A" class="headerlink" title="jQuery.Deferred is now Promises/A+ compatible: jQuery.Deferred现在兼容Promises/A+"></a>jQuery.Deferred is now Promises/A+ compatible: jQuery.Deferred现在兼容Promises/A+</h5><p><code>jQuery.Deferred</code> 对象为了兼容 <code>Promises/A+</code> 和 <code>ES2015 Promises</code> 已经做出了更新，Promises/A+ Compliance Test Suite 检验。这意味着 引入一个 <code>.catch()</code> 方法，<code>.then()</code>方法也有一些重要的改变。</p>
<ul>
<li><code>.then()</code> 方法的回调函数中抛出的异常现在变成了一个可注入的值。以前，异常会一直往上冒泡，直至终止回调函数的执行，然后不可撤销的锁定 parent and child Deferred 对象。</li>
<li>通过 <code>.then()</code> 方法创建的 Deferred 对象的 resolution 状态现在被它的回调函数控制——异常成为了注入值，并且 non-thenable 返回的结果成为了 fulfillment 值。以前，从注入处理器返回变成了注入值。</li>
<li>回调函数总是被异步调用。以前，它们根据绑定或是 resolution 被立即调用，无论哪个更晚一些。</li>
<li>Progress 回调函数不再解决受约束的 Deferred 对象。</li>
</ul>
<p>考虑一下下面的代码，哪个parent Deferred 被注入以及 child 回调函数产生异常:</p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> <span class="built_in">parent</span> = jQuery.Deferred();</div><div class="line"><span class="built_in">var</span> child = <span class="built_in">parent</span>.then( <span class="literal">null</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">"bar"</span>;</div><div class="line">&#125;);</div><div class="line"><span class="built_in">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"> state </span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"> value </span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log( state, value );</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>( <span class="string">"baz"</span> );</div><div class="line">  &#125;;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">var</span> grandchildren = [</div><div class="line">  child.then( callback( <span class="string">"fulfilled"</span> ), callback( <span class="string">"rejected"</span> ) ),</div><div class="line">  child.then( callback( <span class="string">"fulfilled"</span> ), callback( <span class="string">"rejected"</span> ) )</div><div class="line">];</div><div class="line"><span class="built_in">parent</span>.reject( <span class="string">"foo"</span> );</div><div class="line"><span class="built_in">console</span>.log( <span class="string">"parent resolved"</span> );</div></pre></td></tr></table></figure>
<p>在 jQuery 3.0 中，在调用任何回调之前会先记录 “parent resolved”，每一个子回调将会记录 “fulfilled bar”， 然后 grandchildren 将会和错误 “baz” 一起注入。在之前的版本中，会记录一次 “rejected bar” (child Deferred 已经注入而不是fulfilled)然后通过未捕获到的错误 “baz” 中断(“parent resolved” 不会被记录并且 grandchildren 会保持 unresolved 状态)。</p>
<p>当捕获异常时有利于在浏览器中进行 debug, 使用注入回调来处理异常非常具有描述性(即显式的)。记住这个地方，你有责任在使用 promises 时总是添加至少一个注入回调，否则，任何错误都不会提示。</p>
<p>Legacy 行为可以通过使用现在还不宜用的 <code>.pipe()</code> 方法替换 <code>.then()</code> 方法来重新获取，</p>
<p><code>jQuery.when</code> 方法也为了接受任何 thenable 对象而更新了，包括了原生的Promise对象。</p>
<p><a href="https://github.com/jquery/jquery/issues/1722" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1722</a><br><a href="https://github.com/jquery/jquery/issues/2102" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2102</a></p>
<h5 id="Removed-special-case-Deferred-methods-in-jQuery-ajax-移除了jQuery-ajax中Deferred方法的一些特殊情况"><a href="#Removed-special-case-Deferred-methods-in-jQuery-ajax-移除了jQuery-ajax中Deferred方法的一些特殊情况" class="headerlink" title="Removed special-case Deferred methods in jQuery.ajax: 移除了jQuery.ajax中Deferred方法的一些特殊情况"></a>Removed special-case Deferred methods in jQuery.ajax: 移除了jQuery.ajax中Deferred方法的一些特殊情况</h5><p>jqXHR 对象是一个Promise，但是也有像 <code>.abort()</code> 这样的额外的方法。因此你可以在创建之后停止一个请求。</p>
<p>随着用户越来越拥护类似像 AJAX 这样异步执行的 Promise 模式，通过 jQuery.ajax 进行 Promise 返回特殊事例的想法是越来越坏的主意。</p>
<p>success, error, complete<br>done, fail, always</p>
<p>注意，这些对于相同名字的回调函数没有任何影响，它们将会继续存在，而且不会被弃用。这个只会影响Promise 方法！</p>
<p><a href="https://github.com/jquery/jquery/issues/2084" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2084</a></p>
<h5 id="Error-cases-don’t-silently-fail-错误事例不会默默地失败"><a href="#Error-cases-don’t-silently-fail-错误事例不会默默地失败" class="headerlink" title="Error cases don’t silently fail: 错误事例不会默默地失败"></a>Error cases don’t silently fail: 错误事例不会默默地失败</h5><p>也许在一个重要的时刻你会想知道，“窗口的偏移量是多少？” 然后你可能会意识到这是一个疯狂的问题 - 窗口怎么会有偏移量？</p>
<p>在过去，jQuery 有时会尝试去创建类似返回一些东西的事例而不是抛出一个错误。在这个询问窗口的偏移量的特殊事例中，到目前为止答案已经变成了 <code>{ top: 0, left: 0 }</code>，在 <code>jQuery 3.0</code> 的 <code>alpha</code> 版本中，我们正在尝试抛出一个错误来让这些疯狂的请求不至于被默默地忽略掉这样的想法。请尝试使用 <code>alpha</code> 版本看一下是否存在一些依赖 <code>jQuery</code> 的代码出现无效输入的问题。</p>
<p><a href="https://github.com/jquery/jquery/issues/1784" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1784</a></p>
<p><code>.width()</code>, <code>.height()</code>, <code>.css(“width”)</code>, 和 <code>.css(“height”)</code> 方法将返回带有小数点的数值(不论何时浏览器都会这样做)。</p>
<p>以前，当你获取  width 和 height 的时候 <code>jQuery</code> 会对其进行取整。有一些浏览器会返回亚像素值 - 例如 IE 和 Firefox，并且有时当布局依赖这些值时用户需要这种精确度的值。我们不希望这些改变会对你的代码产生很大的影响，但是如果确实影响到了，请让我们知道。</p>
<p><a href="https://github.com/jquery/jquery/issues/1724" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1724</a></p>
<h5 id="Removed-deprecated-event-aliases-移除不赞成使用的事件别名"><a href="#Removed-deprecated-event-aliases-移除不赞成使用的事件别名" class="headerlink" title="Removed deprecated event aliases: 移除不赞成使用的事件别名"></a>Removed deprecated event aliases: 移除不赞成使用的事件别名</h5><p><code>.load</code>, <code>.unload</code>, 和 <code>.error</code>, 这些方法自从 <code>jQuery 1.8</code> 就已经弃用，而且永不使用。使用 <code>.on()</code> 注册监听器</p>
<p><a href="https://github.com/jquery/jquery/issues/2286" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2286</a></p>
<p><code>jQuery.swap</code>, <code>jQuery.buildFragment</code>, 和 <code>jQuery.domManip</code> 不再从 <code>jQuery</code> 对象上获取。</p>
<p>这些方法常常仅在内部使用，而且也从来没有文档说明。为了避免疑惑，我们最终决定将他们私有化。</p>
<p><a href="https://github.com/jquery/jquery/issues/2224" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2224</a><br><a href="https://github.com/jquery/jquery/issues/2225" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2225</a></p>
<h5 id="Animations-now-use-requestAnimationFrame-动画现在使用requestAnimationFrame"><a href="#Animations-now-use-requestAnimationFrame-动画现在使用requestAnimationFrame" class="headerlink" title="Animations now use requestAnimationFrame:动画现在使用requestAnimationFrame"></a>Animations now use requestAnimationFrame:动画现在使用requestAnimationFrame</h5><p>除了 <code>IE8</code> 和 <code>IE9</code> 之外，越来越多的平台都支持 <code>requestAnimationFrame</code> API，<code>jQuery</code> 现在在执行动画的时候也使用了此 API。这样的结果是会让动画越来平滑流畅，并且使用更少的 CPU 时间，在移动设备上也尽可能好的保存电量。</p>
<p><code>jQuery</code> 尝试使用 <code>requestAnimationFrame</code> 了一些年头，但是在目前的代码中有一些很严重的兼容性问题，因此我们又把它撤销回去了。我们认为我们通过当浏览器标签页移出视野时暂停动画这种方式已经解决了这些问题中的大多数。然而，在真实的运行时环境中，任何依赖于动画的代码一直运行是一个不切实际的假想。</p>
<h5 id="unwrap-selector"><a href="#unwrap-selector" class="headerlink" title=".unwrap( selector )"></a>.unwrap( selector )</h5><p>在 <code>jQuery 3.0</code> 之前，<code>.unwrap()</code> 方法不接收任何参数。selector 参数提供了一个确定哪个包装器该被移出的方式。</p>
<p><a href="https://github.com/jquery/jquery/issues/1744" target="_blank" rel="external">https://github.com/jquery/jquery/issues/1744</a></p>
<h5 id="Massive-speedups-for-some-jQuery-custom-selectors"><a href="#Massive-speedups-for-some-jQuery-custom-selectors" class="headerlink" title="Massive speedups for some jQuery custom selectors"></a>Massive speedups for some jQuery custom selectors</h5><p>感谢来自 Google 的 Paul Irish 所做出的一些排查工作，我们才可以识别出我们可以跳过的一些额外工作，像是 <code>:visible</code> 这样的常规的选择器在一个文档中使用好多次。特定的事例中现在在性能上能比以前快 17 倍。</p>
<p>记住，即使这些事情改善了，像是 <code>:visible</code> 和 <code>:hidden</code> 这样的选择器也是很昂贵的，因为它们依赖于浏览器来决定什么时候元素确实显示在页面上。可能需要的是，在最差的情况中，CSS 样式和页面布局需要完整的重绘。尽管在大多数情况下我们不阻止使用他们，但是我们推荐你在你的页面上测试一下来确定这些选择器是否会造成一些性能问题。</p>
<p><a href="https://github.com/jquery/jquery/issues/2042" target="_blank" rel="external">https://github.com/jquery/jquery/issues/2042</a></p>
<h5 id="译者注"><a href="#译者注" class="headerlink" title="译者注:"></a>译者注:</h5><p>具体的更新内容列表没有在此翻译，如果想具体了解请自行查看英文原文。</p>
<blockquote>
<p>本文根据 <a href="http://blog.jquery.com/author/timmywil/" target="_blank" rel="external">Timmy Willison</a> 的《jQuery 3.0 and jQuery Compat 3.0 Alpha Versions Released》所译，整个译文带有自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明英文出处：<a href="http://blog.jquery.com/2015/07/13/jquery-3-0-and-jquery-compat-3-0-alpha-versions-released/" target="_blank" rel="external">http://blog.jquery.com/2015/07/13/jquery-3-0-and-jquery-compat-3-0-alpha-versions-released/</a></p>
</blockquote>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><ul>
<li>jQuery 3.0.0-alpha1: <a href="https://code.jquery.com/jquery-3.0.0-alpha1.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0-alpha1.js</a></li>
<li>jQuery compat 3.0.0-alpha1: <a href="https://code.jquery.com/jquery-3.0.0-alpha1.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0-alpha1.js</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;从我们做出上一个重大的版本发布已经过去很长时间了，所以你理应再得到一个新版本。因此我们非常高兴的宣布 &lt;code&gt;jQuery 3.0&lt;/code&gt; 的第一个 &lt;code&gt;alpha&lt;/code&gt; 版本的发布。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="译文" scheme="http://blog.sqrtthree.com/tags/%E8%AF%91%E6%96%87/"/>
    
      <category term="jQuery3.0" scheme="http://blog.sqrtthree.com/tags/jQuery3-0/"/>
    
  </entry>
  
  <entry>
    <title>My Code Wars v0.1</title>
    <link href="http://blog.sqrtthree.com/2015/11/06/myCodeWars-01/"/>
    <id>http://blog.sqrtthree.com/2015/11/06/myCodeWars-01/</id>
    <published>2015-11-06T10:04:46.000Z</published>
    <updated>2015-11-06T10:04:46.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>这里讲述的是一个8级（kyu）菜鸟立志成为8段（dan）大神的故事。故事的起因是这样的。菜鸟有幸发现了<a href="http://www.codewars.com/" title="codewars" target="_blank" rel="external">codewars</a>这个网站，从此沉迷于内一发不可收拾，他在代码战争中一次次遭遇挫败，又一次次爬起来继续跌倒下去。欲知详情，且看『迈向7级的第一个脚印』。</p>
<p>遥想当年自高自大，而今终知天外有天。</p>
</blockquote>
<h3 id="Description"><a href="#Description" class="headerlink" title="Description:"></a>Description:</h3><p>The numberOfOccurrences function must return the number of occurrences of an element in an array.</p>
<a id="more"></a>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>];</div><div class="line">arr.numberOfOccurrences(<span class="number">0</span>) === <span class="number">1</span>;</div><div class="line">arr.numberOfOccurrences(<span class="number">4</span>) === <span class="number">0</span>;</div><div class="line">arr.numberOfOccurrences(<span class="number">2</span>) === <span class="number">2</span>;</div><div class="line">arr.numberOfOccurrences(<span class="string">"a"</span>) === <span class="number">0</span>;</div></pre></td></tr></table></figure>
<h3 id="菜鸟出招"><a href="#菜鸟出招" class="headerlink" title="菜鸟出招"></a>菜鸟出招</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.numberOfOccurrences = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> total = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>[i] == num) &#123;</div><div class="line">            total++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> total;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="菜鸟思维"><a href="#菜鸟思维" class="headerlink" title="菜鸟思维"></a>菜鸟思维</h3><ol>
<li>利用数组遍历</li>
<li>如果数值相等则加1</li>
<li>返回标记总数的变量</li>
</ol>
<h3 id="偷师学艺"><a href="#偷师学艺" class="headerlink" title="偷师学艺"></a>偷师学艺</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.numberOfOccurrences = <span class="function"><span class="keyword">function</span>(<span class="params">search</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.filter(<span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> search === num</div><div class="line">    &#125;).length;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="关键字积累"><a href="#关键字积累" class="headerlink" title="关键字积累"></a>关键字积累</h3><ul>
<li>prototype</li>
<li>filter</li>
</ul>
<h3 id="菜鸟总结"><a href="#菜鸟总结" class="headerlink" title="菜鸟总结"></a>菜鸟总结</h3><p><code>filter()</code>是 <code>ECMAScirpt 5</code> 中规定的数组方法，返回的数组元素是调用的数组的一个子集。传递的函数是用来逻辑判定的：该函数返回 <code>true</code> 或是 <code>false</code>。如果返回值为 <code>true</code> 或是能转化为 <code>true</code> 的值，那么传递给判定函数的元素就是这个子集的成员，它将被添加到一个作为返回值的的数组中。</p>
<p><code>filter()</code> 会跳过稀疏数组中缺少的元素，它的返回值总是稠密的。为了压缩稀疏数组的空缺，代码如下：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dense = sparse.filter(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>如果压缩空缺并删除 <code>undefined</code> 和<code>null</code>元素，代码如下：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = a.filter(<span class="function"><span class="keyword">function</span><span class="params">(x)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> x !== <span class="literal">undefined</span> &amp;&amp; x !== <span class="literal">null</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      这里记录了我在 codewars 网站上的一些收获。
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="myCodeWars" scheme="http://blog.sqrtthree.com/tags/myCodeWars/"/>
    
  </entry>
  
  <entry>
    <title>jQuery 3.0——下一代的jQuery</title>
    <link href="http://blog.sqrtthree.com/2015/11/05/jquery3-the-next-generations/"/>
    <id>http://blog.sqrtthree.com/2015/11/05/jquery3-the-next-generations/</id>
    <published>2015-11-05T11:42:00.000Z</published>
    <updated>2015-11-05T11:42:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>2014年10月29日，jQuery 官方博客上更新了一篇博文，描述了关于下一代 jQuery 的一些信息。实际上这篇博文至今都已经一年时间了，jQuery 官方团队也早在2015年7月13日发布了 <code>jQuery 3.0.0-alpha1</code> 版本。我之前也只是匆匆的看过一遍，今日闲着无事，就尝试翻译了一下并发布了这篇迟到了一年的译版，想要了解 <code>3.0</code> 中的新特性的话可以关注我后续的更新。</p>
<a id="more"></a>
<h3 id="正文开始"><a href="#正文开始" class="headerlink" title="正文开始"></a>正文开始</h3><p>很难相信从 <code>jQuery</code> 发布以来已经过去八年了，过去的这些年 Web 开发已经改变了很多， <code>jQuery</code> 也随之变化着。在这个过程中，团队一直在保持对旧代码的兼容性和支持目前最好的 Web 开发实践之间努力平衡着。</p>
<p>其中最好的做法就是语义化版本，或者简单的称之为 <a href="http://semver.org/lang/zh-CN/" target="_blank" rel="external">semver</a>，从实践的角度看，<a href="http://semver.org/lang/zh-CN/" target="_blank" rel="external">semver</a> 给了开发者(以及构建工具) 一个避免由于切换软件版本导致的风险的方法。版本号为 <code>MAJOR.MINOR.PATCH</code> 的格式，并且其三个组成部分均为整数。在<a href="http://semver.org/lang/zh-CN/" target="_blank" rel="external">semver</a> 中，如果 <code>MAJOR</code> 改变了，就意味着在 API 中出现了不兼容的改变，因此开发者们需要当心。</p>
<p>在 <code>jQuery</code> 中版本控制变得更加微妙，(对 jQuery 来说) 浏览器的兼容性和 API 的兼容性同等重要。为了创造一个 “苗条” 的 <code>jQuery</code> ，团队在2013年开始放出了两个版本。第一个版本保持着 1.x 的编号，当前(截止到原文发布时)最新版本为 1.11.1，其保持了最大数量的浏览器兼容性。第二个版本从 2.0.0 开始，目前是 2.1.1，为了精简代码，放弃了对 IE8及其以下版本浏览器的支持。1.x 和 2.x 版本的  <code>jQuery</code> 都有着相同的公开 API，尽管他们在内部实现上有一些不同。</p>
<p>我们的下一个版本将会使用一种全新的命名方式。像之前一样，仍然会有两个不同的发布文件。现在的 <code>1.11.1</code> 版本的继任者将被称之为 <code>jQuery Compat 3.0</code>。<code>jQuery 2.1.1</code> 则将由 <code>jQuery 3.0</code>来接替。在 <code>npm</code> 和 <code>Bower</code> 上(译者注: 这是目前非常流行的前端包管理工具)，它们会是两个不同的包，但它们会共享同一个版本号，来说明它们在API层面上的行为是一致的。</p>
<p>这次版本发布之后，我们也将调整对浏览器的支持策略。主 <code>jQuery</code> 包将继续保持短小精悍，并且只支持在发布之时广泛使用的常青浏览器(evergreen browsers 指的是特定浏览器的当前和此前的若干版本)。我们也会根据市场份额在这个包的基础上支持更多的浏览器。而 <code>jQuery Compat</code> 包则提供更广泛的浏览器支持，但是付出的代价就是文件变得很大，执行效率也会低一些。</p>
<p>尽管这一次版本号跳跃很大，但是对于大多数 <code>jQuery</code> 代码来说，我们不期望造成很多的代码迁移问题。我们在这次版本升级中可是符合 <code>semver</code> 中的好公民的标准的。诸如像移除已废弃的方法这样的改变会被新版本的 <code>jQuery Migrate</code> 插件检测出来，这样一来，发现并且修复他们就变得容易多了。我们也会在将来的博客文章中讨论这些变化中的更多细节。</p>
<p>下面就是一些 <code>jQuery API</code> 3.0 版本要说的内容：</p>
<ul>
<li>如果你需要支持更多更广泛的浏览器，包括诸如 <code>IE8, Opera 12, Safari 5</code> 等，请使用 <code>jQuery-Compat 3.0.0</code> 版本。我们建议大多数网站都使用这一版本，因为它为网站的来访者提供了最好的兼容性支持。</li>
<li>如果你的网站仅仅是为了那些最先进的浏览器而建，或者仅仅是一个基于 <code>HTML</code> 的应用以嵌入一个 <code>web</code> 视图(例如: PhoneGap，Cordova)，你预先知道其使用的是哪一个浏览器解析引擎， 那就使用 <code>jQuery 3.0.0</code> 吧。</li>
<li>除非我们宣布，否则对应的主、次版本号相同的两个包都会有相同的公开 API。这样开发者就能够很容易的在两个包之间切换，并且在第三方 <code>jQuery</code> 插件中拥有最好的兼容性。</li>
</ul>
<p>未来每一个版本发布的时候，我们都会同时放到 <code>npm</code> 和 <code>bower</code> 上。两个包也会以单个文件的形式在 <code>jQuery CDN</code> 上提供。在那里使用他们和根据你自己的需要去包含 <code>jquery-compat-3.0.0.js</code> 或<code>jquery-3.0.0.js</code> 一样简便。我们也和 Google’s CDN 的运营人员谈过，他们也会为这两个包提供支持。</p>
<p>随着我们在3.0版本方面工作的推进，我们会向所有人告知代码变更、浏览器支持等一切细节的更新。敬请期待吧！</p>
<blockquote>
<p>本文根据 <a href="http://blog.jquery.com/author/dmethvin/" target="_blank" rel="external">Dave Methvin</a> 的《jQuery 3.0: The Next Generations》所译，整个译文带有自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明英文出处：<a href="http://blog.jquery.com/2014/10/29/jquery-3-0-the-next-generations/" target="_blank" rel="external">http://blog.jquery.com/2014/10/29/jquery-3-0-the-next-generations/</a></p>
</blockquote>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><ul>
<li>jQuery 3.0.0-alpha1: <a href="https://code.jquery.com/jquery-3.0.0-alpha1.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0-alpha1.js</a></li>
<li>jQuery compat 3.0.0-alpha1: <a href="https://code.jquery.com/jquery-3.0.0-alpha1.js" target="_blank" rel="external">https://code.jquery.com/jquery-3.0.0-alpha1.js</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2014年10月29日，jQuery 官方博客上更新了一篇博文，描述了关于下一代 jQuery 的一些信息。实际上这篇博文至今都已经一年时间了，jQuery 官方团队也早在2015年7月13日发布了 &lt;code&gt;jQuery 3.0.0-alpha1&lt;/code&gt; 版本。我之前也只是匆匆的看过一遍，今日闲着无事，就尝试翻译了一下并发布了这篇迟到了一年的译版，想要了解 &lt;code&gt;3.0&lt;/code&gt; 中的新特性的话可以关注我后续的更新。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="译文" scheme="http://blog.sqrtthree.com/tags/%E8%AF%91%E6%96%87/"/>
    
      <category term="jQuery3.0" scheme="http://blog.sqrtthree.com/tags/jQuery3-0/"/>
    
  </entry>
  
  <entry>
    <title>3、Supervisor 部署和配置</title>
    <link href="http://blog.sqrtthree.com/2015/10/21/server-deployment-supervisor/"/>
    <id>http://blog.sqrtthree.com/2015/10/21/server-deployment-supervisor/</id>
    <published>2015-10-21T00:08:41.000Z</published>
    <updated>2015-10-21T00:08:41.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://supervisord.org/" target="_blank" rel="external">Supervisor</a> 是一个用来监控和控制多个服务进程的命令行程序，我们可以用来方便的进行后台进程管理，比如说异常退出时能自动重启。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><code>Ubuntu</code> 可以直接通过 <code>apt</code> 安装：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-<span class="keyword">get</span> install supervisor</div></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="配置文件详解"><a href="#配置文件详解" class="headerlink" title="配置文件详解"></a>配置文件详解</h3><p><code>supervisor</code> 通过对应的配置文件来进行进程的监控和管理，因此安装完成之后我们需要给将要监控的进程写一个配置文件。每个进程的配置文件都建议单独分拆，放在 <code>/etc/supervisor/conf.d/</code> 目录下，以 <code>.conf</code> 作为扩展名。如我们的 <code>shadowsocks.conf</code> 配置文件。</p>
<p>下面是配置文件的格式和支持的参数，只需要写我们需要配置的参数即可。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">[supervisorctl]</div><div class="line">serverurl=<span class="string">unix:</span><span class="comment">///tmp/supervisor.sock ; use a unix:// URL  for a unix socket</span></div><div class="line">;serverurl=<span class="string">http:</span><span class="comment">//127.0.0.1:9001 ; use an http:// url to specify an inet socket</span></div><div class="line">;username=chris              ; should be same <span class="keyword">as</span> http_username <span class="keyword">if</span> set</div><div class="line">;password=<span class="number">123</span>                ; should be same <span class="keyword">as</span> http_password <span class="keyword">if</span> set</div><div class="line">;prompt=mysupervisor         ; cmd line prompt (<span class="keyword">default</span> <span class="string">"supervisor"</span>)</div><div class="line">;history_file=~/.sc_history  ; use readline history <span class="keyword">if</span> available</div><div class="line">添加单个进程</div><div class="line"></div><div class="line">; 管理单个进程的配置，可创建多个，下面是所有可能的配置选项</div><div class="line">;[<span class="string">program:</span>theprogramname]</div><div class="line">;command=<span class="regexp">/bin/</span>cat              ; 启动进程的命令 使用相对路径，可以加参数</div><div class="line">;process_name=%(program_name)s ; 进程名称 表达式 (默认 %(program_name)s)</div><div class="line">;numprocs=<span class="number">1</span>                    ; 进程数目 (<span class="keyword">def</span> <span class="number">1</span>)</div><div class="line">;directory=/tmp                ; 执行命令所在的目录 (<span class="keyword">def</span> no cwd)</div><div class="line">;umask=<span class="number">022</span>                     ; 进程默认权限 (<span class="keyword">default</span> None)</div><div class="line">;priority=<span class="number">999</span>                  ; 进程启动相对优先权 (<span class="keyword">default</span> <span class="number">999</span>)</div><div class="line">;autostart=<span class="literal">true</span>                ; 跟随supervisor启动时启动 (<span class="string">default:</span> <span class="literal">true</span>)</div><div class="line">;autorestart=unexpected        ; 计划启动 (<span class="string">default:</span> unexpected)</div><div class="line">;startsecs=<span class="number">1</span>                   ; 延时启动 (<span class="keyword">def</span>. <span class="number">1</span>)</div><div class="line">;startretries=<span class="number">3</span>                ; 最多连续启动失败 (<span class="keyword">default</span> <span class="number">3</span>)</div><div class="line">;exitcodes=<span class="number">0</span>,<span class="number">2</span>                 ; 进程结束代码 (<span class="keyword">default</span> <span class="number">0</span>,<span class="number">2</span>)</div><div class="line">;stopsignal=QUIT               ; signal used to kill process (<span class="keyword">default</span> TERM)</div><div class="line">;stopwaitsecs=<span class="number">10</span>               ; 最长结束等待时间，否则使用 SIGKILL (<span class="keyword">default</span> <span class="number">10</span>)</div><div class="line">;stopasgroup=<span class="literal">false</span>             ; 是否想UNIX进程组发送结束信号 (<span class="keyword">default</span> <span class="literal">false</span>)</div><div class="line">;killasgroup=<span class="literal">false</span>             ; SIGKILL UNIX 进程组 (<span class="keyword">def</span> <span class="literal">false</span>)</div><div class="line">;user=chrism                   ; 设置启动此程序的用户</div><div class="line">;redirect_stderr=<span class="literal">true</span>          ; 重定向程序的标准错误到标准输出 (<span class="keyword">default</span> <span class="literal">false</span>)</div><div class="line">;stdout_logfile=<span class="regexp">/a/</span>path        ; 标准输出的日志路径, NONE <span class="keyword">for</span> none; <span class="keyword">default</span> AUTO</div><div class="line">;stdout_logfile_maxbytes=<span class="number">1</span>MB   ; 日志文件最大值，否则循环写入 (<span class="keyword">default</span> <span class="number">50</span>MB)</div><div class="line">;stdout_logfile_backups=<span class="number">10</span>     ; 标准输出日志备份数目 (<span class="keyword">default</span> <span class="number">10</span>)</div><div class="line">;stdout_capture_maxbytes=<span class="number">1</span>MB   ; number of bytes <span class="keyword">in</span> <span class="string">'capturemode'</span> (<span class="keyword">default</span> <span class="number">0</span>)</div><div class="line">;stdout_events_enabled=<span class="literal">false</span>   ; emit events on stdout writes (<span class="keyword">default</span> <span class="literal">false</span>)</div><div class="line">;stderr_logfile=<span class="regexp">/a/</span>path        ; 标准错误输出日志路径, NONE <span class="keyword">for</span> none; <span class="keyword">default</span> AUTO</div><div class="line">;stderr_logfile_maxbytes=<span class="number">1</span>MB   ; 日志文件最大值，否则循环写入 (<span class="keyword">default</span> <span class="number">50</span>MB)</div><div class="line">;stderr_logfile_backups=<span class="number">10</span>     ; 标准错误日志备份数目 (<span class="keyword">default</span> <span class="number">10</span>)</div><div class="line">;stderr_capture_maxbytes=<span class="number">1</span>MB   ; number of bytes <span class="keyword">in</span> <span class="string">'capturemode'</span> (<span class="keyword">default</span> <span class="number">0</span>)</div><div class="line">;stderr_events_enabled=<span class="literal">false</span>   ; emit events on stderr writes (<span class="keyword">default</span> <span class="literal">false</span>)</div><div class="line">;environment=A=<span class="string">"1"</span>,B=<span class="string">"2"</span>       ; 进程附加环境 (<span class="keyword">def</span> no adds)</div><div class="line">;serverurl=AUTO                ; override serverurl computation (childutils)</div></pre></td></tr></table></figure>
<p>例如，可以简单的配置成:</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section">[program:long_script]</span></div><div class="line"><span class="attr">command</span>=/usr/local/bin/long.sh</div><div class="line"><span class="attr">autostart</span>=<span class="literal">true</span></div><div class="line"><span class="attr">autorestart</span>=<span class="literal">true</span></div><div class="line"><span class="attr">stderr_logfile</span>=/var/log/long.err.log</div><div class="line"><span class="attr">stdout_logfile</span>=/var/log/long.out.log</div></pre></td></tr></table></figure>
<p>编写完配置文件之后，通过 <code>service supervisor restart</code> 命令重启 <code>supervisor</code> 服务，也可以通过以下方式进行温柔的重启服务和进程:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">supervisorctl reread</span></div><div class="line">supervisorctl update</div></pre></td></tr></table></figure>
<h3 id="命令行工具-supervisorctl"><a href="#命令行工具-supervisorctl" class="headerlink" title="命令行工具 supervisorctl"></a>命令行工具 supervisorctl</h3><p>查看所有命令:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">supervisorctl <span class="keyword">help</span></div><div class="line"></div><div class="line"><span class="keyword">default</span> commands (<span class="keyword">type</span> <span class="keyword">help</span> ):</div><div class="line">=====================================</div><div class="line"><span class="keyword">add</span>    <span class="keyword">clear</span>  fg        <span class="keyword">open</span>  quit    remove  restart   <span class="keyword">start</span>   <span class="keyword">stop</span>  <span class="keyword">update</span></div><div class="line">avail  <span class="keyword">exit</span>   maintail  pid   reload  reread  <span class="keyword">shutdown</span>  <span class="keyword">status</span>  tail  <span class="keyword">version</span></div></pre></td></tr></table></figure>
<p>常用命令的功能:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">supervisorctl <span class="keyword">stop</span> programName，停止某一个进程(programName)，programName为[program:chatdemon]里配置的值。</div><div class="line">supervisorctl <span class="keyword">start</span> programName，启动某个进程</div><div class="line">supervisorctl restart programName，重启某个进程</div><div class="line">supervisorctl <span class="keyword">stop</span> groupworker: ，重启所有属于名为groupworker这个分组的进程(<span class="keyword">start</span>,restart同理)</div><div class="line">supervisorctl <span class="keyword">stop</span> all，停止全部进程，注：<span class="keyword">start</span>、restart、<span class="keyword">stop</span>都不会载入最新的配置文件。</div><div class="line">supervisorctl reload，载入最新的配置文件，停止原有进程并按新的配置启动、管理所有进程。</div><div class="line">supervisorctl <span class="keyword">update</span>，根据最新的配置文件，启动新配置或有改动的进程，配置没有改动的进程不会受影响而重启。</div></pre></td></tr></table></figure>
<p>执行 <code>supervisorctl</code> 命令需要管理员权限，如果你以普通用户的身份登陆服务器，需要在命令前使用 <code>sudo</code> 命令:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">sudo supervisorctl reread</span></div><div class="line">sudo supervisorctl update</div></pre></td></tr></table></figure>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://www.liaoxuefeng.com/article/0013738926914703df5e93589a14c19807f0e285194fe84000" target="_blank" rel="external">http://www.liaoxuefeng.com/article/0013738926914703df5e93589a14c19807f0e285194fe84000</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps" target="_blank" rel="external">https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://supervisord.org/&quot;&gt;Supervisor&lt;/a&gt; 是一个用来监控和控制多个服务进程的命令行程序，我们可以用来方便的进行后台进程管理，比如说异常退出时能自动重启。&lt;/p&gt;
&lt;h3 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Ubuntu&lt;/code&gt; 可以直接通过 &lt;code&gt;apt&lt;/code&gt; 安装：&lt;/p&gt;
&lt;figure class=&quot;highlight actionscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;apt-&lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt; install supervisor&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="服务器部署" scheme="http://blog.sqrtthree.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>2、shadowsocks 部署和配置</title>
    <link href="http://blog.sqrtthree.com/2015/10/20/server-deployment-shadowsocks/"/>
    <id>http://blog.sqrtthree.com/2015/10/20/server-deployment-shadowsocks/</id>
    <published>2015-10-20T23:38:06.000Z</published>
    <updated>2015-10-20T23:38:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>关于 <code>shadowsocks</code> 是什么就不多介绍了，这是<a href="http://shadowsocks.org/en/index.html" target="_blank" rel="external">官网</a>，我们前面做了这么多就是为了它，闲话不多说，直接开始搭建服务吧。</p>
<h3 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置:"></a>服务端配置:</h3><p>首先请确保你的服务器中已经安装了 <code>Python 2.6 or 2.7</code>，然后执行以下命令进行安装:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apt-get <span class="keyword">install</span> python-pip</div><div class="line">pip <span class="keyword">install</span> shadowsocks</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>然后？然后就安装完成了啊。什么？你不确定？那你可以输入 <code>ssserver --version</code> 进行确认，如果安装成功，则会反馈程序的当前版本号。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ssserver --version</div><div class="line">Shadowsocks <span class="number">2.8</span><span class="number">.2</span></div></pre></td></tr></table></figure>
<p>接下来，你可以通过 <code>ssserver --help</code> 查看该命令的用法。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">$ ssserver --<span class="keyword">help</span></div><div class="line">usage: ssserver [OPTION]...</div><div class="line">A fast tunnel proxy that helps you bypass firewalls.</div><div class="line"></div><div class="line">You can supply configurations via either config <span class="keyword">file</span> <span class="built_in">or</span> <span class="keyword">command</span> <span class="built_in">line</span> arguments.</div><div class="line"></div><div class="line">Proxy option<span class="variable">s:</span></div><div class="line">  -<span class="keyword">c</span> CONFIG              path <span class="keyword">to</span> config <span class="keyword">file</span></div><div class="line">  -s SERVER_ADDR         server address, defaul<span class="variable">t:</span> <span class="number">0.0</span>.<span class="number">0.0</span></div><div class="line">  -<span class="keyword">p</span> SERVER_PORT         server port, defaul<span class="variable">t:</span> <span class="number">8388</span></div><div class="line">  -<span class="keyword">k</span> PASSWORD            password</div><div class="line">  -<span class="keyword">m</span> METHOD              encryption method, defaul<span class="variable">t:</span> aes-<span class="number">256</span>-cfb</div><div class="line">  -t TIMEOUT             timeout in seconds, defaul<span class="variable">t:</span> <span class="number">300</span></div><div class="line">  --fast-<span class="keyword">open</span>            use TCP_FASTOPEN, requires Linux <span class="number">3.7</span>+</div><div class="line">  --workers WORKERS      <span class="keyword">number</span> of workers, available <span class="keyword">on</span> Unix/Linux</div><div class="line">  --forbidden-ip IPLIST  comma seperated IP <span class="keyword">list</span> forbidden <span class="keyword">to</span> connect</div><div class="line">  --manager-address ADDR optional server manager UDP address, see wiki</div><div class="line"></div><div class="line">General option<span class="variable">s:</span></div><div class="line">  -h, --<span class="keyword">help</span>             show this <span class="keyword">help</span> message <span class="built_in">and</span> <span class="keyword">exit</span></div><div class="line">  -d start/<span class="keyword">stop</span>/restart  daemon <span class="keyword">mode</span></div><div class="line">  --pid-<span class="keyword">file</span> PID_FILE    pid <span class="keyword">file</span> <span class="keyword">for</span> daemon <span class="keyword">mode</span></div><div class="line">  --<span class="built_in">log</span>-<span class="keyword">file</span> LOG_FILE    <span class="built_in">log</span> <span class="keyword">file</span> <span class="keyword">for</span> daemon <span class="keyword">mode</span></div><div class="line">  --user USER            username <span class="keyword">to</span> run <span class="keyword">as</span></div><div class="line">  -v, -vv                <span class="keyword">verbose</span> <span class="keyword">mode</span></div><div class="line">  -q, -qq                quiet <span class="keyword">mode</span>, <span class="keyword">only</span> show warnings/errors</div><div class="line">  --<span class="keyword">version</span>              show <span class="keyword">version</span> information</div><div class="line"></div><div class="line">Online <span class="keyword">help</span>: &lt;http<span class="variable">s:</span>//github.<span class="keyword">com</span>/shadowsocks/shadowsocks&gt;</div></pre></td></tr></table></figure>
<p>比如说你可以这样启动服务:</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssserver -p <span class="number">8388</span> -k password -m aes<span class="number">-256</span>-cfb</div></pre></td></tr></table></figure>
<p>当然了，每次都在命令行上配置是很麻烦的，所幸 <code>ssserver</code> 还支持以配置文件方式启动。比如说，我们在 <code>~/.config/shadowsocks/</code> 文件夹下创建一个 <code>config.json</code> 文件作为 <code>ssserver</code> 的启动配置文件(文件位置随意，放在什么地方都无所谓)， <code>config.json</code> 文件内容如下:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"timeout"</span>:<span class="number">600</span>,</div><div class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</div><div class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</div><div class="line">    <span class="attr">"server"</span>:<span class="string">"0.0.0.0"</span>,</div><div class="line">    <span class="attr">"server_port"</span>:<span class="number">8388</span>,</div><div class="line">    <span class="attr">"password"</span>:<span class="string">"password"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上参数很简单，就不过多解释了，保存好文件之后执行以下命令启动服务即可:</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssserver -c ~/.<span class="built_in">config</span>/shadowsocks/<span class="built_in">config</span>.json</div></pre></td></tr></table></figure>
<p>如果想在后台运行，可以带上 <code>nohup</code> 命令:</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nohup ssserver -c ~/.<span class="built_in">config</span>/shadowsocks/<span class="built_in">config</span>.json &amp;</div></pre></td></tr></table></figure>
<p>当然了，还有更高级的进程管理技巧，这个下一篇文章里会详细介绍。</p>
<p>上面所说的 <code>config.json</code> 文件中还支持配置多端口，我们可以利用这个特性达到多账号使用的效果。配置方式为:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"timeout"</span>:<span class="number">600</span>,</div><div class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</div><div class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</div><div class="line">    <span class="attr">"server"</span>:<span class="string">"0.0.0.0"</span>,</div><div class="line">    <span class="attr">"port_password"</span>: &#123;</div><div class="line">        <span class="attr">"8388"</span>:<span class="string">"password1"</span>,</div><div class="line">        <span class="attr">"8389"</span>:<span class="string">"password2"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"_comment"</span>: &#123;</div><div class="line">        <span class="attr">"8388"</span>:<span class="string">"描述一，可以用来记录端口备注或是对应的用户"</span>,</div><div class="line">        <span class="attr">"8389"</span>:<span class="string">"描述二，可以用来记录端口备注或是对应的用户"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>因为 <code>json</code> 文件不支持注释，因此配置文件中扩展了一个 <code>_comment</code> 参数用来进行备注，程序会自动忽略掉该参数。</p>
<h3 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h3><p>相对来说客户端就太简单了，各个平台均有 <code>GUI</code> 版本的客户端，只需要下载安装即可。文章最下方提供下载链接。</p>
<p>以 <code>Mac</code> 客户端举例，安装完成之后，点击小飞机图标，选择添加服务器，然后将服务端配置中的 <code>端口号</code>，<code>加密方式</code>，<code>密码</code> 填写至对应的一栏中，其中服务器地址一栏要填写服务器的公网 <code>IP</code> 地址。之后就可以尽情的徜徉了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;关于 &lt;code&gt;shadowsocks&lt;/code&gt; 是什么就不多介绍了，这是&lt;a href=&quot;http://shadowsocks.org/en/index.html&quot;&gt;官网&lt;/a&gt;，我们前面做了这么多就是为了它，闲话不多说，直接开始搭建服务吧。&lt;/p&gt;
&lt;h3 id=&quot;服务端配置&quot;&gt;&lt;a href=&quot;#服务端配置&quot; class=&quot;headerlink&quot; title=&quot;服务端配置:&quot;&gt;&lt;/a&gt;服务端配置:&lt;/h3&gt;&lt;p&gt;首先请确保你的服务器中已经安装了 &lt;code&gt;Python 2.6 or 2.7&lt;/code&gt;，然后执行以下命令进行安装:&lt;/p&gt;
&lt;figure class=&quot;highlight cmake&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;apt-get &lt;span class=&quot;keyword&quot;&gt;install&lt;/span&gt; python-pip&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;pip &lt;span class=&quot;keyword&quot;&gt;install&lt;/span&gt; shadowsocks&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="服务器部署" scheme="http://blog.sqrtthree.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>1、SSH 登陆配置</title>
    <link href="http://blog.sqrtthree.com/2015/10/20/server-deployment-ssh/"/>
    <id>http://blog.sqrtthree.com/2015/10/20/server-deployment-ssh/</id>
    <published>2015-10-20T13:23:27.000Z</published>
    <updated>2015-10-20T13:23:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>简单说，SSH是一种网络协议，用于计算机之间的加密登录。关于详细的信息呢，各位可自行 Google。</p>
<p>我们在上一步创建好服务器之后，我们可以在 <a href="https://cloud.digitalocean.com/" target="_blank" rel="external">https://cloud.digitalocean.com/</a> 查看到服务器列表和 <code>ip</code> 地址。</p>
<p>因为我在初始化的过程中没有直接添加 <code>ssh</code> 认证登陆，所以我登陆到服务器之后要先自行添加和配置。</p>
<a id="more"></a>
<h3 id="配置公钥登录"><a href="#配置公钥登录" class="headerlink" title="配置公钥登录"></a>配置公钥登录</h3><p>1、首先，在收到包含有服务器密码的邮件之后，打开终端(或是命令行)工具，输入 <code>ssh user@host</code> 命令进行登录，由于是第一次登陆，所以默认登陆为 <code>root</code>账户，例如:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">ssh</span> <span class="selector-tag">root</span>@<span class="keyword">192</span>.<span class="keyword">168</span>.<span class="keyword">0</span>.<span class="keyword">0</span></div></pre></td></tr></table></figure>
<p>2、之后会提示让你输入密码，你需要将邮件中的初始密码输入，注意，输入密码的时候屏幕不会出现任何反馈，会可能会造成一种没有输入的错觉，你只需正常输入并敲击回车表示完成即可。</p>
<p>3、第一次登陆成功之后，会提示让你进行修改密码，修改完密码之后即以 <code>root</code> 身份登入服务器。</p>
<p>4、使用密码登录，每次都必须输入密码，非常麻烦。因此我们需要配置公钥登录。首先在本地生成对应的公钥。如果你之前已经生成过，则可以直接跳过这一步。SSH 公钥默认储存在账户的主目录下的 <code>~/.ssh</code> 目录。使用一下命令查看:</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span> ~/.ssh</div><div class="line"><span class="keyword">ls</span></div></pre></td></tr></table></figure>
<p>关键是看有没有用 <code>something</code> 和 <code>something.pub</code> 来命名的一对文件，这个 <code>something</code> 通常就是 <code>id_dsa</code> 或 <code>id_rsa</code>。有 <code>.pub</code> 后缀的文件就是公钥，另一个文件则是密钥。假如没有这些文件，或者干脆连 .ssh 目录都没有，可以用 ssh-keygen 来创建，生成的命令为:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">ssh-keygen</span></div></pre></td></tr></table></figure>
<p>它先要求你确认保存公钥的位置 <code>~.ssh/id_rsa</code>，然后它会让你重复一个密码两次，如果不想在使用公钥的时候输入密码，可以留空。</p>
<p>5、拿到公钥之后，就要将公钥上传到服务器。谨记: 一定要在本地保管好你的私钥，而公钥可以发布到各服务器上。</p>
<p><code>Linux</code> 用户可以使用 <code>ssh-copy-id user@host</code>进行上传，<code>Mac</code> 用户则需要麻烦一点:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">scp ~<span class="regexp">/.ssh/id</span>_rsa.pub user@host<span class="symbol">:~/</span>.ssh/</div><div class="line">ssh user@host</div><div class="line">cd ~<span class="regexp">/.ssh/</span></div><div class="line">cat id_rsa.pub <span class="meta">&gt;&gt; </span>authorized_keys</div></pre></td></tr></table></figure>
<p>如果服务器 <code>.ssh</code> 目录下没有 <code>authorized_keys</code> 文件，则可以创建一个。</p>
<p>基本上到这里就算是配置完成了，你可以退出然后重新登录一下测试是否配置成功。</p>
<h3 id="SSH-配置"><a href="#SSH-配置" class="headerlink" title="SSH 配置"></a>SSH 配置</h3><blockquote>
<p>SSH 的配置均通过修改 <code>/etc/ssh/sshd_config</code> 配置文件实现，例如: <code>vim /etc/ssh/sshd_config</code>。<strong>修改配置时最好进行备份操作</strong></p>
<p>修改完之后如果想要立即生效需要重启SSH服务: <code>sudo service ssh restart</code></p>
<p>更多的 SSH 服务命令可阅读文章下方的参考资料。</p>
</blockquote>
<p>1、建议修改ssh登录端口，修改端口可以防止被端口扫描。找到 <code>Port 22</code>，修改成一个五位的端口：<code>Port 22222</code> 之类的一个比较大的数字，减小被扫描到的可能性。<em>建议先添加一个端口，待确认能够通过新添加的端口连接成功，再将原端口注释掉。</em></p>
<p>2、为了安全设置，可以选择禁用 <code>root</code> 账户的密码登录，设置配置文件中的 <code>PermitRootLogin</code> 为 <code>without-password</code>。甚至可以直接禁用 <code>root</code> 账户登录，新建一个普通用户进行登录。</p>
<h3 id="新建普通用户登录"><a href="#新建普通用户登录" class="headerlink" title="新建普通用户登录"></a>新建普通用户登录</h3><p>目前我们总是以 <code>root</code> 用户的身份进行登录，而 <code>root</code> 由于权限太高造成风险也随之升高，因此我们需要在服务器上创建一个普通用户身份以做平时登录使用。</p>
<p>创建普通用户的命令为:<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">sudo</span> <span class="keyword">adduser </span>newUser</div></pre></td></tr></table></figure></p>
<p>这样系统就会自动创建用户主目录，创建用户同名的组，然后屏幕就会出现以下信息:</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">正在添加用户<span class="string">"newUser"</span>…</div><div class="line">正在添加新组<span class="string">"newUser"</span> (<span class="number">1006</span>)…</div><div class="line">正在添加新用户<span class="string">"newUser"</span> (<span class="number">1006</span>) 到组<span class="string">"newUser"</span>…</div><div class="line">创建主目录<span class="string">"/home/newUser"</span>…</div><div class="line">正在从<span class="string">"/etc/skel"</span>复制文件…</div><div class="line">输入新的 UNIX 口令： (作者注:这里是输入新账号的密码)</div><div class="line">重新输入新的 UNIX 口令：</div></pre></td></tr></table></figure>
<p>两次输入 <code>newUser</code> 的初始密码，出现的信息如下:</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">passwd: password updated successfully</div><div class="line">Changing <span class="keyword">the</span> user information <span class="keyword">for</span> db</div><div class="line">Enter <span class="keyword">the</span> <span class="built_in">new</span> <span class="built_in">value</span>, <span class="keyword">or</span> press ENTER <span class="keyword">for</span> <span class="keyword">the</span> default</div><div class="line">Full Name []:</div><div class="line">Room Number []:</div><div class="line">Work Phone []:</div><div class="line">Home Phone []:</div><div class="line">Other []:</div><div class="line">Full Name []:</div></pre></td></tr></table></figure>
<p>等信息一路回车</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">这个信息是否正确？ <span class="string">[Y/n]</span></div></pre></td></tr></table></figure>
<p>致此，新用户就创建好了。</p>
<p>当然了，还有一些事情需要处理。</p>
<h5 id="1、让该用户具有使用-sudo-命令的权限"><a href="#1、让该用户具有使用-sudo-命令的权限" class="headerlink" title="1、让该用户具有使用 sudo 命令的权限"></a>1、让该用户具有使用 <code>sudo</code> 命令的权限</h5><p>通过编辑配置文件 <code>/etc/sudoers</code> 来实现:</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">vim /etc/sudoers</div><div class="line"></div><div class="line"><span class="comment">// 然后添加如下内容:</span></div><div class="line"></div><div class="line">%newUser <span class="keyword">ALL</span>=(<span class="keyword">ALL</span>) <span class="keyword">ALL</span></div><div class="line">newUser <span class="keyword">ALL</span>=(<span class="keyword">ALL</span>) <span class="keyword">ALL</span></div></pre></td></tr></table></figure>
<p>保存，退出。深藏功与名。</p>
<h5 id="2、使用普通用户身份进行登录"><a href="#2、使用普通用户身份进行登录" class="headerlink" title="2、使用普通用户身份进行登录"></a>2、使用普通用户身份进行登录</h5><p>当然了，你如果想要以此用户的身份进行 <code>ssh</code> 登录，还需要将之前的公钥上传至该用户目录下。</p>
<h3 id="本地-SSH-配置"><a href="#本地-SSH-配置" class="headerlink" title="本地 SSH 配置"></a>本地 SSH 配置</h3><blockquote>
<p>每次登录都需要输入用户名和 Host，麻烦不？当然麻烦了。</p>
</blockquote>
<p>上面讲了辣么多的服务器端配置，这里就来讲一下本地配置。本地的配置文件默认为 <code>~/.ssh/config</code>，如果不存在则新创建一个，其配置写法如下:</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Host    别名</div><div class="line">    HostName        主机名</div><div class="line">    Port            端口</div><div class="line">    <span class="keyword">User</span>            <span class="title">用户名</span></div><div class="line">    IdentityFile    密钥文件的路径</div></pre></td></tr></table></figure>
<p>上面的配置可以缺省，不需要每一个都填写。有了这些配置，就可以这样用 <code>ssh</code> 登陆服务器了:</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">ssh</span> 别名</div></pre></td></tr></table></figure>
<p>怎么样？是不是方便了很多呢。 O(∩_∩)O哈哈~</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="external">SSH原理与运用（一）：远程登录</a></li>
<li><a href="http://segmentfault.com/a/1190000002492828#articleHeader4" target="_blank" rel="external">SSH的配置和命令介绍</a></li>
<li><a href="http://www.kafan.cn/edu/584682.html" target="_blank" rel="external">Ubuntu中useradd和adduser的区别</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简单说，SSH是一种网络协议，用于计算机之间的加密登录。关于详细的信息呢，各位可自行 Google。&lt;/p&gt;
&lt;p&gt;我们在上一步创建好服务器之后，我们可以在 &lt;a href=&quot;https://cloud.digitalocean.com/&quot;&gt;https://cloud.digitalocean.com/&lt;/a&gt; 查看到服务器列表和 &lt;code&gt;ip&lt;/code&gt; 地址。&lt;/p&gt;
&lt;p&gt;因为我在初始化的过程中没有直接添加 &lt;code&gt;ssh&lt;/code&gt; 认证登陆，所以我登陆到服务器之后要先自行添加和配置。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="服务器部署" scheme="http://blog.sqrtthree.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>0、服务器主机选择和购买</title>
    <link href="http://blog.sqrtthree.com/2015/10/19/server-deployment-choose/"/>
    <id>http://blog.sqrtthree.com/2015/10/19/server-deployment-choose/</id>
    <published>2015-10-19T13:28:41.000Z</published>
    <updated>2015-10-19T13:28:41.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>由于某种不能说的原因，导致我们没法使用 Google，作为一个开发人员这是不能容忍的，近日来发现竟然连 <a href="https://gist.github.com/" target="_blank" rel="external">https://gist.github.com/</a> 都无法访问，这简直令人发指。于是各种代理服务就如雨后春笋一般出现，但是前段时间某技术升级加上各种手段，导致该关闭的关闭，该封停的封定，现在还有 <code>shadowsocks</code> 技术勉强可以维持，但该项目已经不再更新 <em>(:з」∠)</em>。</p>
<p>有些网站也会提供一些免费的 <code>shadowsocks</code> 账号供使用，但我体验了一段时间之后，第一觉得太麻烦，因为这种公共服务基本上每过一段时间就会改一次密码。第二是不太稳定，并且总觉得在私密性上放不下心，就想着自己利用服务器搭建一个私人服务。</p>
</blockquote>
<p>因为之前没有接触过服务器端的部署，蹒跚学步的过程中遇到了很多困惑和问题，在这里也做一下记录，写一个 <code>&quot;服务器部署从入门不一定到精通&quot;</code> 系列，待多年以后回头来看我是这样被大家看着长大的 O(∩_∩)O哈哈哈~。</p>
<a id="more"></a>
<h2 id="服务器商选择"><a href="#服务器商选择" class="headerlink" title="服务器商选择"></a>服务器商选择</h2><p>最初的目的是为了搭建一些服务以达到代理访问外网的目的，因此毋庸置疑的就要选择那些海外服务器。目前口碑最高的是 <a href="https://www.linode.com/" target="_blank" rel="external">Linode</a> 和 <a href="https://www.digitalocean.com/?refcode=d2b2550b5631" target="_blank" rel="external">digitalocean</a>, 至于两者的区别可以参考<a href="http://www.zhihu.com/question/21454090" target="_blank" rel="external">http://www.zhihu.com/question/21454090</a> 或者其他资料。总之，我选择了 <a href="https://www.digitalocean.com/?refcode=d2b2550b5631" target="_blank" rel="external">digitalocean</a>，如果你也选择这个服务商，点击前面的链接注册后可以获得 <strong>10美金</strong> 的奖励，自己搜索注册可没有哟~</p>
<h2 id="购买服务器"><a href="#购买服务器" class="headerlink" title="购买服务器"></a>购买服务器</h2><p>注册完账号之后，访问 <a href="https://cloud.digitalocean.com/droplets/new" target="_blank" rel="external">https://cloud.digitalocean.com/droplets/new</a> 即可选购一个新服务器。</p>
<p>0、绑定支付方式</p>
<p>选购之前需要绑定支付方式才能进行购买，方式有两种，一种是绑定信用卡，一种是通过 <code>paypal</code> 支付 5 美元。</p>
<p>1、填写 Droplet Hostname</p>
<p>给你的服务器起一个名字。</p>
<p>2、Select Size</p>
<p><code>digitalocean</code> 最低提供 <code>5美金/月</code> 的套餐，并且是按小时扣费。如果你只是为了搭建一个代理服务， 这个套餐足够使用了。</p>
<p>3、Select Region</p>
<p><code>digitalocean</code> 目前提供7个城市的机房可选，其中 <code>New York</code> 和 <code>Amsterdam</code> 各有三个机房，其他地区各一个机房可选。大陆用户建议选择美国西海岸机房，因为优化做的很棒，访问速度还可以。新推出的新加坡机房虽然在亚洲，但是好像从评价来看速度和优化并不理想。我选择了 <code>San Francisco</code> 机房。</p>
<p>4、Select Image</p>
<p>小白用户和开发者建议选择 <code>Ubuntu</code>，运维和高级人员可以使用 <code>CentOS</code>系统。</p>
<p>5、Available Settings</p>
<p>其中 <code>Backups</code> 自动备份选项是附加收费业务，每月20%的收费标准。</p>
<p>6、Add SSH Keys</p>
<p>添加 <code>ssh</code> 公钥，建议在这里直接添加 <code>ssh</code> 公钥，会方便很多。如果你没有选择添加 <code>ssh keys</code>，那么在服务器创建好之后会给你发一封包含服务器密码的邮件，你使用该密码第一次登陆服务器时，会要求更改密码。</p>
<p>7、Create Droplet</p>
<p>然后点击 <code>Create Droplet</code> 按钮，稍等一分钟你就拥有了一台海外服务器咯。</p>
<p>之后你在 <a href="https://cloud.digitalocean.com/" target="_blank" rel="external">https://cloud.digitalocean.com/</a> 就可以查看到你的服务器了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;由于某种不能说的原因，导致我们没法使用 Google，作为一个开发人员这是不能容忍的，近日来发现竟然连 &lt;a href=&quot;https://gist.github.com/&quot;&gt;https://gist.github.com/&lt;/a&gt; 都无法访问，这简直令人发指。于是各种代理服务就如雨后春笋一般出现，但是前段时间某技术升级加上各种手段，导致该关闭的关闭，该封停的封定，现在还有 &lt;code&gt;shadowsocks&lt;/code&gt; 技术勉强可以维持，但该项目已经不再更新 &lt;em&gt;(:з」∠)&lt;/em&gt;。&lt;/p&gt;
&lt;p&gt;有些网站也会提供一些免费的 &lt;code&gt;shadowsocks&lt;/code&gt; 账号供使用，但我体验了一段时间之后，第一觉得太麻烦，因为这种公共服务基本上每过一段时间就会改一次密码。第二是不太稳定，并且总觉得在私密性上放不下心，就想着自己利用服务器搭建一个私人服务。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为之前没有接触过服务器端的部署，蹒跚学步的过程中遇到了很多困惑和问题，在这里也做一下记录，写一个 &lt;code&gt;&amp;quot;服务器部署从入门不一定到精通&amp;quot;&lt;/code&gt; 系列，待多年以后回头来看我是这样被大家看着长大的 O(∩_∩)O哈哈哈~。&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="服务器部署" scheme="http://blog.sqrtthree.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/"/>
    
  </entry>
  
  <entry>
    <title>聊聊 JS 中的严格模式</title>
    <link href="http://blog.sqrtthree.com/2015/10/09/strict-mode/"/>
    <id>http://blog.sqrtthree.com/2015/10/09/strict-mode/</id>
    <published>2015-10-09T12:05:12.000Z</published>
    <updated>2015-10-09T12:05:12.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="什么是严格模式？"><a href="#什么是严格模式？" class="headerlink" title="什么是严格模式？"></a>什么是严格模式？</h2><blockquote>
<p><code>严格模式</code> 是 ECMAScript 5 中引入的一种将更好的错误检查引入代码中的方法, 现在已经被大多浏览器实现. 顾名思义，这种模式使得Javascript在更严格的条件下运行.</p>
</blockquote>
<a id="more"></a>
<p>因此, 在严格模式下, 我们的一些不严谨的写法将会导致程序抛出错误. 例如:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">param</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">arguments</span> = []; <span class="comment">// 在严格模式下该行将会抛出错误: error: redefinition of arguments</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在上面的代码中, 由于 <code>arguments</code> 在 js 中是一个特殊对象, 在严格模式下是不允许被重新定义的. 但是没有实现严格模式检查的环境中会接受这段代码.</p>
<h2 id="为什么会出现严格模式？"><a href="#为什么会出现严格模式？" class="headerlink" title="为什么会出现严格模式？"></a>为什么会出现严格模式？</h2><p>总所周知, 从 ECMAscript 从1997年正式成为国际标准以来, 已经发布了6个版本. 除此之外, 还存在一些 Javascript 实现支持非标准特性, 而其他的 Javascript 实现却并不支持这些特性的情况. 由于 Javascript 的实现多样化, 我们很难确定哪些特性在哪些平台上是支持的, 再加上 Web 浏览器的复杂性, 并且它并不能让开发者指定某一个特定的 Javascript 版本来执行我们的程序. 因此我们需要精心的编写程序, 以确保在所有的平台上都能够正常运行.</p>
<p>因此在 ES5 中引入了一种版本控制的考量: <code>严格模式</code>. 此特性允许开发者选择在受限制的 Javascript 版本中禁止使用一些 Javascript 语言中问题较多或是易于出错的特性.</p>
<p>由于其语法强大的向后兼容特性, 所以即使在没有实现严格模式检查的环境中, 你的严格代码仍然可以正常执行.</p>
<h2 id="如何使用严格模式"><a href="#如何使用严格模式" class="headerlink" title="如何使用严格模式?"></a>如何使用严格模式?</h2><p>在程序中使用严格模式的方式是在程序中的最开始增加一个特定的字符串字面量.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span></div></pre></td></tr></table></figure>
<p>如果你在一个文件的顶部加入这个特定的字符串, 则表示该文件的所有内容将始终使用严格模式执行.</p>
<p>如果你只想在一个函数体内使用严格模式, 则在该函数体内的最开始处(顶部)加入这句指令.</p>
<h2 id="为什么要使用字符串字面量来实现严格模式"><a href="#为什么要使用字符串字面量来实现严格模式" class="headerlink" title="为什么要使用字符串字面量来实现严格模式?"></a>为什么要使用字符串字面量来实现严格模式?</h2><p>单独使用一个特定的字符串字面量来作为指令语法在语言里看起来确实相当怪异, 但是他有一个最大的好处是向后兼容. 我们来看一下它为什么能够向后兼容. 我们都知道在js 中解释执行一个字符串字面量是没有任何副作用的, 这句话什么意思呢？ 比如说你在 chrome 浏览器控制台里面输入一个字符串字面量, 解释器只会返回一个同样的字符串, 除此之外不会发生任何事情, 这就使得即使ES3引擎不支持<code>严格模式</code>, 但依然能够无伤大雅的解释和执行这条指令. ES3 引擎在解析完改字符串之后, 会立即将该值丢弃. 因此, 尽管旧的引擎不支持严格模式, 但依然能够正常运行.</p>
<p>但需要注意的是: 尽管不会抛出错误, 但是旧的引擎不会进行任何的严格检查模式, 因此如果要使用严格模式, 你应该总是在完全兼容ES5的环境中测试严格代码.</p>
<h2 id="使用严格模式需要注意哪些问题"><a href="#使用严格模式需要注意哪些问题" class="headerlink" title="使用严格模式需要注意哪些问题?"></a>使用严格模式需要注意哪些问题?</h2><p>我们在上面已经说过, <code>use strict</code> 指令需要写在脚本或者函数的顶部, 因为该指令只有在写在顶部才能生效. 这就使得我们在使用的时候需要注意一下这里有个小坑. 这个坑是什么呢？</p>
<p>举个例子, 我们在开发大型功能的时候, 开发过程中会使用多个独立的脚本文件, 但是在部署到生产环境的时候出于性能优化的目的, 需要将多个脚本连接成一个单一的文件. 比如说, 脚本1 运行于严格模式下,<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// file1.js</span></div><div class="line"><span class="meta">"use strict"</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSth</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>但是有另外一个同事写了一个脚本2运行于非严格模式下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// file2.js</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doOtherSth</span>(<span class="params">param</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">arguments</span> = [];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>那么, 我们该怎么连接这两个文件呢？ 如果我们以 file1.js 开始, 那么连接后的代码将运行于严格模式下, 但是由于 file2 中的一些操作会在严格模式下抛出错误, 导致我们的程序无法正常运行.如果我们以 file2.js 开始, 那么连接后的代码将运行于非严格模式下, 因为我们前面已经讲过该指令只有在写在顶部才能生效. 似乎怎样都不太合适.</p>
<p>那么如何解决这个问题呢？</p>
<ol>
<li>在项目中坚持只使用<code>严格模式</code>或者只使用<code>非严格模式</code>, 并且不要将使用<code>严格模式</code>和不使用<code>严格模式</code>的文件进行打包构建. O(∩_∩)O哈哈~这样就不会有问题了嘛.</li>
<li>我们上面说过, 如果你只想在一个函数体内使用严格模式, 则在该函数体内的最开始处(顶部)加入这句指令. 我们可以利用这个特性, 将每一个脚本文件里面的代码包裹在一个立即执行的函数表达式内, 这样即使两种模式的文件打包在一起, 依然能够按照我们的期望进行工作. 例如:</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// file1.js</span></div><div class="line"><span class="meta">    "use strict"</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doSth</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// file2.js</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doOtherSth</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    &#125;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>当然了, 上面这样的做法会导致这些文件的内容不会在全局作用域内解释, 这就导致我们通过 <code>var</code> 和 <code>function</code> 声明的变量不会视为全局变量. 不过这刚好对我们来说也是一个很好的特性. 因此就放心大胆的使用吧, 去吧, 皮卡丘.</p>
<h2 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h2><p>上面的方法2看起来是极好的, 并且我们可以通过<code>自动化构建工具</code>为我们的脚本文件上添加如上代码. 但是如果我们想要编写一个通用的库, 使其可以在尽可能多的环境中正常工作, 我们不能假设脚本文件一定会被构建工具置于一个立即执行的函数中, 也不能假设客户端代码一定处于严格模式或是非严格模式中. 所以为了获得最佳效果, 我们应该总是在严格模式下编写代码, 并显式的将其包裹在启用了严格模式的立即执行函数中, 而不是依靠构建工具来实现.</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>“严格模式”体现了Javascript更合理、更安全、更严谨的发展方向. 为了达到更为普遍的兼容性, 我们应该总是在严格模式下编写代码.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是严格模式？&quot;&gt;&lt;a href=&quot;#什么是严格模式？&quot; class=&quot;headerlink&quot; title=&quot;什么是严格模式？&quot;&gt;&lt;/a&gt;什么是严格模式？&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;严格模式&lt;/code&gt; 是 ECMAScript 5 中引入的一种将更好的错误检查引入代码中的方法, 现在已经被大多浏览器实现. 顾名思义，这种模式使得Javascript在更严格的条件下运行.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="技术" scheme="http://blog.sqrtthree.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>春风十里 不如你</title>
    <link href="http://blog.sqrtthree.com/2015/10/05/without-you-im-nothing/"/>
    <id>http://blog.sqrtthree.com/2015/10/05/without-you-im-nothing/</id>
    <published>2015-10-05T00:21:41.000Z</published>
    <updated>2015-10-05T00:21:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>每一个失恋了的人, 都是中了一记玄冥神掌.</p>
<p>这掌力在你每一次听到情歌的时候发作, 歌词句句都是毒素攻心. 这掌力在每一次夜深的时候发作, 无孔不入的孤独直入骨髓, 痛的满地打滚.</p>
<a id="more"></a>
<p>是的, 你不得不承认, 兜兜转转, 到最后, 你终于还是把她弄丢了.</p>
<p>这些日子, 你天天梦到她, 常常半夜醒来不知道自己身在何处, 常常早上望着空荡荡的枕边失落.</p>
<p>现在, 你都害怕再梦到她了吧.</p>
<p>夜深的时候, 你总是望着窗外发呆, 你幻想联系她后的复合, 你幻想联系她后的决裂, 你幻想如果当初没有分开现在会如何, 你幻想此时此刻她正在干嘛.</p>
<p>可是, 你也只能够是想想.</p>
<p>因为我知道, 你不敢, 也不能联系她.</p>
<p>说来可笑, 你会把联系她视为一次定输赢的赌博. 你想赌, 但你不敢赌, 因为你知道自己会输.</p>
<p>输了, 以后连想她的权利都没有了.</p>
<p>你不是没有想过放弃. 你今天决定放弃她了, 可是坚持不了几天, 又不甘心放弃想把她追回来.</p>
<p>周而复始, 永远下不了决心到底是放弃还是坚持.</p>
<p>熬过了无数个痛苦的黑夜, 你不再嘴上逞强, 你终于承认了你爱她, 即使分开了, 你对她的爱却有增无减.</p>
<p>你相信了念念不忘必有回响这样的段子.</p>
<p>你相信梦见她证明你俩缘分未尽这样的迷信.</p>
<p>你相信打喷嚏突然恍惚是因为她正在想你这样的习惯.</p>
<p>是的, 即便你之前觉得这样多可笑, 这一刻, 你都会强行认为是跟你有关.</p>
<p>可惜的是,</p>
<p>你的想念没有声音, 恐怕她是听不到了.</p>
<p>你的想念没有频率, 也许她也收不到了.</p>
<p>你的想念没有路径, 所以只能你自己知道了.</p>
<p>我知道你好想做一万件事来证明你很想她.</p>
<p>但是很可惜你一件也为她做不了.</p>
<p>最遗憾的事大概就是,</p>
<p>你有为她做一万件事的决心, 却没有能为她做一件事的机会了.</p>
<p>而你唯一能做的也只能是在这平淡无味的生活间隙里，</p>
<p>想一想此时此刻的她正在做什么了.</p>
<p>失去了她, 你觉得, 整个世界都空旷旷的. 你觉得, 整个世界都变成了黑白的, 再也没有了色彩.</p>
<p>孤独, 就像是那暴风雨一样骤然而来, 让你触不及防, 狼狈不堪.</p>
<p>可是, 最可怕的不是孤独本身, 而是没有人知道你孤独.</p>
<p>你喝的烂醉, 最后还是得一个人爬回床上, 她不会知道了.</p>
<p>你生病了, 最后还是得一个人滚去医院, 她不会陪你了.</p>
<p>你萎靡不振, 最后在荒度的日子里把自己淬炼成了一个傻逼, 她不会出现了.</p>
<p>是啊, 以后的路上, 就只有你自己了. 她, 永远都不会出现了.</p>
<p>我知道你放不下, 我知道你不甘心,</p>
<p>可是, 又能怎么办呢？</p>
<p>只希望你能在未来的日子里沉迷于学习无法自拔, 习得九阳神功, 破了这寒毒.</p>
<p>终有一天,</p>
<p>你会明白, 有些事情, 只适合珍藏.</p>
<p>终有一天,</p>
<p>你回过头, 再看到这篇文章的时候,</p>
<p>你会对我说:</p>
<p>你看这个人, 真的好像一条狗耶.</p>
<hr>
<embed src="http://music.163.com/style/swf/widget.swf?sid=26508242&type=2&auto=1&width=320&height=66" width="340" height="86" allownetworking="all">
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;每一个失恋了的人, 都是中了一记玄冥神掌.&lt;/p&gt;
&lt;p&gt;这掌力在你每一次听到情歌的时候发作, 歌词句句都是毒素攻心. 这掌力在每一次夜深的时候发作, 无孔不入的孤独直入骨髓, 痛的满地打滚.&lt;/p&gt;
    
    </summary>
    
      <category term="生活" scheme="http://blog.sqrtthree.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
  </entry>
  
</feed>
